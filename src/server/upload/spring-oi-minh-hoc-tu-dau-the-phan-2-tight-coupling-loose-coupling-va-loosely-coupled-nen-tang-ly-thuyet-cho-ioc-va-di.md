Xin chÃ o má»i ngÆ°á»i, sau bÃ i má»™t vá» tá»•ng quan Spring thÃ¬ nay chÃºng ta cÃ¹ng Ä‘i sÃ¢u vÃ o 2 khÃ¡i niá»‡m trung tÃ¢m vÃ  trÃ¡i tim cá»§a Spring nhÃ© Ä‘Ã³ lÃ  IoC (Inversion of Control) vÃ  DI (Dependency Injection). NhÆ°ng trÆ°á»›c khi Ä‘i vÃ o 2 khÃ¡i niá»‡m nÃ y mÃ¬nh sáº½ Ä‘Æ°a má»™t bÃ i tuy khÃ´ng thuá»™c há»‡ sinh thÃ¡i Spring Framework nhÆ°ng nÃ³ lÃ  cÆ¡ sá»Ÿ lÃ½ thuyáº¿t cho khÃ¡i niá»‡m DI Ä‘áº¥y nhÃ©, vÃ  1 chÃºt lÃ½ thuyáº¿t sáº½ dá»… cho báº¡n hÃ¬nh dung hÆ¡n Ä‘Ã³ lÃ  khÃ¡i niá»‡m Tight-coupling, Loose-coupling, Loosely coupled (cháº¯c nghe láº¡ láº¯m Ä‘Ãºng khÃ´ng dÃ¹ nÃ³ cÃ³ trong OOP Ä‘áº¥y nhÃ©).

# Tight-coupling vÃ  Loose-coupling
Ok má»i ngÆ°á»i bÃ¢y giá» chÃºng ta sáº½ Ä‘i vÃ o 2 khÃ¡i niá»‡m nhá» cá»§a láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng nha:
1. **Tight-coupling** lÃ  gÃ¬? Tight-coupling xáº£y ra khi má»™t nhÃ³m cÃ¡c lá»›p cÃ³ sá»± rÃ ng buá»™c (phá»¥ thuá»™c) cao tá»›i cÃ¡c lá»›p khÃ¡c trong chÆ°Æ¡ng trÃ¬nh.
	- VÃ­ dá»¥: HÃ£y suy nghÄ© má»™t chÃºt vá» lÃ n da cá»§a chÃºng ta, da bá»‹ máº¯c káº¹t vÃ o cÆ¡ thá»ƒ báº¡n khi báº¡n sinh ra Ä‘áº¿n Ä‘Ã¢y váº«n á»•n nÃ¨ . NhÆ°ng náº¿u báº¡n muá»‘n thay Ä‘á»•i mÃ u da cá»§a báº¡n tá»« tráº¯ng sang Ä‘en thÃ¬ sao? Báº¡n cÃ³ thá»ƒ tÆ°á»Ÿng tÆ°á»£ng sáº½ Ä‘au Ä‘á»›n tháº¿ nÃ o khi lá»™t da cá»§a báº¡n, nhuá»™m mÃ u cho nÃ³, vÃ  sau Ä‘Ã³ dÃ¡n nÃ³ trá»Ÿ láº¡i? Thay Ä‘á»•i lÃ n da cá»§a báº¡n lÃ  khÃ³ khÄƒn vÃ¬ nÃ³ Ä‘Æ°á»£c gáº¯n cháº·t vá»›i cÆ¡ thá»ƒ cá»§a báº¡n. Báº¡n khÃ´ng thá»ƒ thay Ä‘á»•i dá»… dÃ ng. Báº¡n sáº½ pháº£i thiáº¿t káº¿ láº¡i má»™t cÃ¡ch cÆ¡ báº£n má»™t con ngÆ°á»i Ä‘á»ƒ biáº¿n Ä‘iá»u nÃ y thÃ nh cÃ³ thá»ƒ.
	- Äiá»ƒm máº¥u chá»‘t sá»‘ 1: NÃ³i cÃ¡ch khÃ¡c, náº¿u báº¡n muá»‘n thay Ä‘á»•i lÃ n da, báº¡n cÅ©ng sáº½ pháº£i thay Ä‘á»•i thiáº¿t káº¿ cá»§a cÆ¡ thá»ƒ vÃ¬ cáº£ hai Ä‘Æ°á»£c káº¿t há»£p vá»›i nhau â€“ chÃºng Ä‘Æ°á»£c gáº¯n káº¿t cháº·t cháº½.
	- Káº¿t luáº­n: Khi cÃ¡c lá»›p phá»¥ thuá»™c hay rÃ ng buá»™c láº«n nhau khi thay Ä‘á»•i á»©ng dá»¥ng, báº£o trÃ¬ hoáº·c nÃ¢ng cáº¥p thay vÃ¬ thay Ä‘á»•i nhá» ta pháº£i kÃ©o theo sá»± thay Ä‘á»•i vá»›i cÃ¡c lá»›p liÃªn quan Ä‘iá»u nÃ y ráº¥t pháº£n khoa há»c trong thiáº¿t káº¿ pháº§n má»m Ä‘Ãºng khÃ´ng nÃ o ğŸ˜€
2. **Loose-coupling** lÃ  gÃ¬? NgÆ°á»£c láº¡i vá»›i Tight-coupling thÃ¬ Loose-coupling lÃ  khuyáº¿n khÃ­ch viá»‡c thiáº¿t káº¿ cÃ¡c lá»›p cÃ³ vai trÃ² riÃªng biá»‡t vÃ  giáº£m sá»± liÃªn quan láº«n nhau trong chÆ°Æ¡ng trÃ¬nh.
	- VÃ­ dá»¥: BÃ¢y giá» nghÄ© vá» viá»‡c máº·c quáº§n Ã¡o vÃ o buá»•i sÃ¡ng hay buá»•i tá»‘i tÃ¹y báº¡n. Báº¡n khÃ´ng thÃ­ch mÃ u xanh? KhÃ´ng cÃ³ váº¥n Ä‘á» gÃ¬, báº¡n cÃ³ thá»ƒ láº¥y má»™t chiáº¿c Ã¡o Ä‘á» thay tháº¿. Báº¡n cÃ³ thá»ƒ lÃ m Ä‘iá»u nÃ y má»™t cÃ¡ch dá»… dÃ ng vÃ¬ chiáº¿c Ã¡o khÃ´ng thá»±c sá»± káº¿t ná»‘i vá»›i cÆ¡ thá»ƒ cá»§a báº¡n giá»‘ng nhÆ° lÃ n da cá»§a báº¡n. Chiáº¿c Ã¡o khÃ´ng biáº¿t hoáº·c quan tÃ¢m Ä‘áº¿n cÆ¡ thá»ƒ nÃ³ Ä‘ang Ä‘Æ°á»£c máº·c vÃ o. NÃ³i cÃ¡ch khÃ¡c, báº¡n cÃ³ thá»ƒ thay Ä‘á»•i quáº§n Ã¡o mÃ  khÃ´ng thá»±c sá»± thay Ä‘á»•i cÆ¡ thá»ƒ.
	- Äiá»ƒm máº¥u chá»‘t sá»‘ 2: Náº¿u báº¡n thay Ã¡o, thÃ¬ báº¡n khÃ´ng bá»‹ buá»™c pháº£i thay Ä‘á»•i cÆ¡ thá»ƒ â€“ khi báº¡n cÃ³ thá»ƒ lÃ m Ä‘iá»u Ä‘Ã³, thÃ¬ báº¡n cÃ³ liÃªn káº¿t lá»ng láº»o. Khi báº¡n khÃ´ng thá»ƒ lÃ m Ä‘iá»u Ä‘Ã³, thÃ¬ báº¡n cÃ³ liÃªn káº¿t cháº·t cháº½.
	- Káº¿t luáº­n: LiÃªn káº¿t lá»ng láº»o giÃºp cho cÃ¡c lá»›p lÃ m viá»‡c Ä‘á»™c láº­p, cÃ³ tranh nhiá»‡m rÃµ rÃ ng vÃ  khi cáº§n nÃ¢ng cáº¥p báº£o trÃ¬ chÃºng ta cáº§n káº¿ thá»«a, thÃªm interface hoáº·c má»Ÿ rá»™ng lá»›p code mÃ  khÃ´ng thay Ä‘á»•i code cÅ©.

# VÃ­ dá»¥ thá»±c táº¿ cho 2 khÃ¡i niá»‡m vÃ  cÃ¡ch lÃ m giáº£m sá»± liÃªn káº¿t phá»¥ thuá»™c (**Loosely coupled**)
VÃ­ dá»¥ khi báº¡n lÃ m viá»‡c vá»›i Ä‘áº§u vÃ o Ä‘áº§u ra thÃ¬ khi chÃºng ta Ä‘á»c lÆ°u dá»¯ liá»‡u vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u, code chÃºng ta khÃ´ng cáº§n quan tÃ¢m ta lÆ°u gÃ¬ vÃ¬ lá»›p lÆ°u vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘Ã£ cÃ³ cÃ¡c lá»›p Ä‘áº£m nháº­n, tÆ°Æ¡ng tá»± nhÆ° xuáº¥t dá»¯ liá»‡u Ä‘áº§u ra ta cÅ©ng khÃ´ng quan tÃ¢m xuáº¥t ra dá»¯ liá»‡u gÃ¬ vÃ¬ xuáº¥t ra file Excel sáº½ cÃ³ lá»›p Export Excel Ä‘áº£m nháº­n, xuáº¥t ra CSV sáº½ cÃ³ lá»›p Export CSV Ä‘áº£m nháº­n. Luá»“ng lÃ m viá»‡c ta chá»‰ viá»‡c gá»i cÃ¡c hÃ m lÆ°u dá»¯ liá»‡u, xuáº¥t dá»¯ liá»‡u vÃ  tÃ¹y vÃ o yÃªu cáº§u ngÆ°á»i dÃ¹ng mÃ  thao tÃ¡c chá»n lá»›p thá»±c hiá»‡n cho phÃ¹ há»£p. Ok qua code sáº½ dá»… hiá»ƒu hÆ¡n cho má»i ngÆ°á»i nÃ  ğŸ˜€
Äáº§u tiÃªn lÃ  vÃ­ dá»¥ cho Tight-coupling nhÃ© khi lÃ m viá»‡c cÃ¡c lá»›p phá»¥ thuá»™c Ä‘Æ°á»£c tiÃªm trá»±c tiáº¿p vÃ  trá»Ÿ thÃ nh má»™t thuá»™c tÃ­nh quan trá»ng trong má»™t lá»›p vÃ  khi muá»‘n thay Ä‘á»•i code sáº½ dáº«n Ä‘áº¿n má»™t cÆ¡ sá»‘ ráº¯c rá»‘i kÃ©o theo :v á» Ä‘Ã¢y lÃ  nhÃ³c tÃ¬ ExportCSV Ä‘Ã£ tham gia vÃ o lá»›p ExportData váº­y lÃ  cáº­u ta phá»¥ thuá»™c rá»“i, Export Ä‘Æ°á»£c khá»Ÿi táº¡o thÃ¬ cáº­u ta má»›i khá»Ÿi táº¡o theo.

![](https://images.viblo.asia/e0abe62c-d01d-4bd9-895b-5b93625fc1fd.png)

NhÆ° má»i ngÆ°á»i tháº¥y á»Ÿ trÃªn thÃ¬ lá»›p ExportCSV liÃªn káº¿t vá»›i ExportData vÃ  bÃ¢y giá» khi yÃªu cáº§u thay Ä‘á»•i xuáº¥t JSON thay cho CSV thÃ¬ giáº£i quyáº¿t sao Ä‘Ã¢y má»i ngÆ°á»i? Khi Ä‘Ã³ chÃºng ta sáº½ lÃ m giáº£m sá»± phá»¥ thuá»™c loosely coupled vÃ¬ bÃ¢y giá» lá»›p ExportCSV sá»‘ng cháº¿t máº·c bÃ¢y rá»“i nÃ³ tá»“n táº¡i khi ExportData tá»“n tÃ i mÃ  ğŸ˜€

![](https://images.viblo.asia/9ad11d0d-a534-4041-8e0d-6cfc4a90fa57.png)

Ok bÃ¢y giá» ta thÃªm má»™t interface Ä‘á»ƒ chá»‰ quan tÃ¢m phÆ°Æ¡ng thá»©c thá»±c hiá»‡n mÃ  khÃ´ng cáº§n biáº¿t chi tiáº¿t thá»±c hiá»‡n cá»§a nÃ³, nhÆ°ng yÃªu cáº§u bÃ¢y giá» lÃ  xuáº¥t Ä‘á»‹nh dáº¡ng JSON mÃ  sao interface láº¡i Ä‘á»‹nh nghÄ©a má»™t lá»›p ExportCSV tháº¿ kia. Ã€ thÃ¬ ra lÃºc nÃ y chÃ­nh lÃ  lÃºc tÃ¹y vÃ o yÃªu cáº§u ngÆ°á»i dÃ¹ng mÃ  ta tiÃªm vÃ o hay Ä‘á»©a vÃ o cÃ¡c lá»›p phá»¥ thuá»™c cho chÆ°Æ¡ng trÃ¬nh cháº¡y ngon nghe hÆ¡n nÃ¨.

![](https://images.viblo.asia/1293d2f9-016e-4307-9907-78f6bc4d8782.png)

Khi Ä‘Ã³ tÃ¹y vÃ o nhu cáº§u nghiá»‡p vá»¥ mÃ  ta sáº½ cÃ³ cÃ¡c lá»›p export tÆ°Æ¡ng á»©ng vÃ  cÃ¡c lá»›p nÃ y sáº½ implements Interface IExport cÃ³ nhiá»‡m vá»¥ lÃ  Export. Khi Ä‘Ã³ lá»›p ExportData chá»‰ nháº­n nhiá»‡m vá»¥ xuáº¥t dá»¯ liá»‡u mÃ  khÃ´ng cáº§n quan tÃ¢m xem nÃ³ xuáº¥t JSON hay CSV mÃ  viá»‡c nÃ y dÃ³ chÃºng ta tiÃªm cÃ¡c lá»›p rÃ ng buá»™c logic vÃ o. ThÃªm ná»¯a khi má»i ngÆ°á»i nhÃ¬n code bÃªn trÃªn sáº½ tháº¥y tÆ°Æ¡ng Ä‘á»‘i dÃ i dÃ²ng khi khai bÃ¡o nÃ y ná» Ä‘Ã³ lÃ  lÃ½ do cÃ¡c Design Pattern ra Ä‘á»i vÃ  Factory Method sáº½ giÃºp chÃºng ta giáº£i quyáº¿t váº¥n Ä‘á» tÃ¹y vÃ o yÃªu cáº§u mÃ  táº¡o má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ lá»›p thÃ­ch há»£p (MÃ¬nh sáº½ Ä‘á» cáº­p trong Series Design Pattern hen :D). Ok trÃªn Ä‘Ã¢y lÃ  cÃ¡c khÃ¡i niá»‡m Tight-coupling, Loose-coupling cÅ©ng nhÆ° cÃ¡ch lÃ m giáº£m sá»± phá»¥ thuá»™c giá»¯a cÃ¡c lá»›p Loosely coupled trong láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng. Náº¿u má»i ngÆ°á»i khÃ´ng hiá»ƒu chá»— nÃ o cá»¯ bÃ¬nh luáº­n mÃ¬nh sáº½ giáº£i Ä‘Ã¡p nhÃ©. BÃªn dÆ°á»›i lÃ  link tham kháº£o cho bÃ i viáº¿t, cáº£m Æ¡n má»i ngÆ°á»i Ä‘Ã£ theo dÃµi Ä‘áº¿n Ä‘Ã¢y ^^ Cáº£m Æ¡n má»i ngÆ°á»i nhiá»u!

TÃ i liá»‡u tham kháº£o:
1. https://stackoverflow.com/questions/2832017/what-is-the-difference-between-loose-coupling-and-tight-coupling-in-the-object-o#targetText=Tight%20coupling%20is%20when%20a,than%20having%20its%20own%20class.
2. https://gociter.wordpress.com/2019/09/18/spring-oi-minh-hoc-tu-dau-the-phan-2-tight-coupling-loose-coupling-va-loosely-coupled-nen-tang-ly-thuyet-cho-ioc-va-di/