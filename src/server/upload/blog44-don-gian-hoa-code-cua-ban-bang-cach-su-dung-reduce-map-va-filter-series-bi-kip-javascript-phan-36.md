![image.png](https://images.viblo.asia/e33affbe-3b3e-4fef-97fe-607c2221a92d.png)

M√¨nh l√† TU·∫§N hi·ªán ƒëang l√† m·ªôt Full-stack Developer t·∫°i Tokyo üòä.
N·∫øu b·∫°n th·∫•y Blog n√†y hay xin h√£y cho m√¨nh m·ªôt like v√† ƒëƒÉng k√Ω ƒë·ªÉ ·ªßng h·ªô m√¨nh nh√© üòâ.

N·∫øu b·∫°n m·ªõi b·∫Øt ƒë·∫ßu code JavaScript trong m·ªôt th·ªùi gian ng·∫Øn, c√≥ th·ªÉ b·∫°n ch·ªâ m·ªõi nghe ƒë·∫øn `.map()`, `.reduce()` v√† `.filter()` ch·ª© ko th·ª±c s·ª± d√πng n√≥ nhi·ªÅu. ƒê·ªëi v·ªõi m√¨nh, ph·∫£i m·∫•t m·ªôt th·ªùi gian v√¨ m√¨nh code web cho **cty Nh·∫≠t**. N√™n ph·∫£i code l√†m sao ƒë·ªÉ c√≥ th·ªÉ h·ªó tr·ª£ Internet Explorer 8 v√† m·ªôt s·ªë tr√¨nh duy·ªát c≈© h∆°n t√Ω (M√† ch·ªß y·∫øu √°n maintenance th√¥i c√≤n l·∫°i m·ªõi th√¨ ƒëa ph√¢n ES6 h·∫øt :D). V√¨ th·∫ø, n·∫øu b·∫°n kh√¥ng c·∫ßn code ra m·ªôt c√°i g√¨ ƒë√≥ m√† n√≥ c·∫ßn t∆∞∆°ng th√≠ch v·ªõi m·∫•y c√°i tr√¨nh duy·ªát r·∫•t c≈© n√†y, th√¨ b·∫°n ph·∫£i l√†m quen v·ªõi c√°c h√†m nh∆∞ `.map()`, `.reduce()` v√† `.filter()` n√≥ s·∫Ω gi·ª•p b·∫°n r·∫•t nhi·ªÅu.

V√≠ d·ª• m·ªü ƒë·∫ßu: c√°i h√†m groupBy n√†y ch·ªâ v√†i d√≤ng ƒë∆°n gi·∫£n l√† ƒë√£ c√≥ th·ªÉ v·ª´a group + filter qu√° ti·ªán
N·∫øu l∆∞·ªõt qua h·∫øt b√†i n√†y m√¨nh nghƒ© b·∫°n c≈©ng ho√†n to√†n c√≥ th·ªÉ code ra m·ªôt h√†m y nh∆∞ v·∫≠y
```javascript
const personnel = [
  {
    id: 5,
    name: "Luke Skywalker",
    pilotingScore: 98,
    shootingScore: 56,
    isForceUser: true,
  },
  {
    id: 82,
    name: "Sabine Wren",
    pilotingScore: 73,
    shootingScore: 99,
    isForceUser: false,
  },
  {
    id: 22,
    name: "Zeb Orellios",
    pilotingScore: 20,
    shootingScore: 59,
    isForceUser: false,
  },
  {
    id: 15,
    name: "Ezra Bridger",
    pilotingScore: 43,
    shootingScore: 67,
    isForceUser: true,
  },
  {
    id: 11,
    name: "Caleb Dume",
    pilotingScore: 71,
    shootingScore: 85,
    isForceUser: true,
  },
];

/**
 * H√†m GroupBy theo h√†m ƒëi·ªÅu ki·ªán
 * @param fnKey ƒêi·ªÅu ki·ªán group by
 * @param fnValue ƒêi·ªÅu ki·ªán filter cho m·ªói k·∫øt qu·∫£
 * @param list List ƒë·∫ßu v√†o
 * @returns Tr·∫£ v·ªÅ 1 ƒë·ªëi t∆∞·ª£ng
 */
function groupBy(list, fnKey, fnValue = (e) => e) {
  return list.reduce(
    (prev, next) => ({
      ...prev,
      [fnKey(next)]: [...(prev[fnKey(next)] || []), fnValue(next)],
    }),
    {}
  );
}

console.log(
  groupBy(
    personnel,
    (e) => (e.isForceUser ? "Force User" : "Not Force User"),
    (e) => e.name
  )
);
```

K·∫øt qu·∫£: ƒêi·ªÉm ƒë·∫∑c bi·∫øt n·ªØa l√† ƒë·ªô kh√≥ thu·∫≠t to√°n n√†y l√† `(On)` qu√° ·ªïn :D
```javascript
{
  'Force User': [ 'Luke Skywalker', 'Ezra Bridger', 'Caleb Dume' ],
  'Not Force User': [ 'Sabine Wren', 'Zeb Orellios' ]
}
```

_H√£y l∆∞u √Ω r·∫±ng b√†i vi·∫øt n√†y r·∫•t c√≥ th·ªÉ s·∫Ω √°p d·ª•ng ƒë∆∞·ª£c cho b·∫•t k·ª≥ ng√¥n ng·ªØ l·∫≠p tr√¨nh n√†o kh√°c m√† b·∫°n c√≥ th·ªÉ ƒëang s·ª≠ d·ª•ng, v√¨ ƒë√¢y l√† nh·ªØng kh√°i ni·ªám t·ªìn t·∫°i trong nhi·ªÅu ng√¥n ng·ªØ kh√°c._

OK G√âT G√î

.map()
=========

H√£y ƒë·ªÉ m√¨nh gi·∫£i th√≠ch c√°ch n√≥ ho·∫°t ƒë·ªông v·ªõi m·ªôt v√≠ d·ª• ƒë∆°n gi·∫£n. Gi·∫£ s·ª≠ b·∫°n ƒë√£ nh·∫≠n ƒë∆∞·ª£c m·ªôt array ch·ª©a nhi·ªÅu ƒë·ªëi t∆∞·ª£ng ‚Äì m·ªói ƒë·ªëi t∆∞·ª£ng ƒë·∫°i di·ªán cho m·ªôt ng∆∞·ªùi. Tuy nhi√™n, ƒëi·ªÅu b·∫°n th·ª±c s·ª± c·∫ßn cu·ªëi c√πng l√† m·ªôt array ch·ªâ ch·ª©a id c·ªßa m·ªói ng∆∞·ªùi.

```javascript
// Nh·ªØng g√¨ b·∫°n c√≥   
var officers = [
  { id: 20, name: 'Captain Piett' },
  { id: 24, name: 'General Veers' },
  { id: 56, name: 'Admiral Ozzel' },
  { id: 88, name: 'Commander Jerjerrod' }
];
// Th·ª© b·∫°n c·∫ßn  
[20, 24, 56, 88]
```

C√≥ nhi·ªÅu c√°ch ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c ƒëi·ªÅu n√†y. B·∫°n c√≥ th·ªÉ mu·ªën l√†m ƒëi·ªÅu ƒë√≥ b·∫±ng c√°ch t·∫°o m·ªôt array tr·ªëng, sau ƒë√≥ s·ª≠ d·ª•ng `.forEach()`, `.for(...of)` ho·∫∑c ƒë∆°n gi·∫£n `.for()` ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c m·ª•c ƒë√≠ch c·ªßa m√¨nh.

H√£y so s√°nh c√°c c√°ch l√†m ƒë√≥ nh√©!

S·ª≠ d·ª•ng `.forEach()`:

```javascript
var officersIds = [];
officers.forEach(function (officer) {
  officersIds.push(officer.id);
});
```

L∆∞u √Ω theo c√°ch n√†y b·∫°n ph·∫£i t·∫°o m·ªôt array tr·ªëng tr∆∞·ªõc? 
Ti·∫øp theo, h√£y xem n√≥ tr√¥ng nh∆∞ th·∫ø n√†o khi s·ª≠ d·ª•ng `.map()`:

```javascript
var officersIds = officers.map(function (officer) {
  return officer.id
});

```

Ch√∫ng ta th·∫≠m ch√≠ c√≥ th·ªÉ ng·∫Øn g·ªçn h∆°n v·ªõi c√°c arrow functions (L∆∞u √Ω: ES6, Babel ho·∫∑c TypeScript)

```javascript
const officersIds = officers.map(officer => officer.id);
```

V·∫≠y l√†m th·∫ø n√†o ƒë·ªÉ `.map()` l√†m vi·ªác? V·ªÅ c∆° b·∫£n l√† c√≥ 2 ƒë·ªëi s·ªë, m·ªôt h√†m callback v√† m·ªôt contexts t√πy ch·ªçn (m·∫∑c ƒë·ªãnh s·∫Ω l√† `this` trong h√†m callback) m√† m√¨nh ƒë√£ kh√¥ng s·ª≠ d·ª•ng trong v√≠ d·ª• tr∆∞·ªõc. H√†m callback s·∫Ω ƒë∆∞·ª£c call cho **t·ª´ng value trong array** v√† **tr·∫£ v·ªÅ t·ª´ng value m·ªõi** trong array k·∫øt qu·∫£.

H√£y nh·ªõ r·∫±ng array k·∫øt qu·∫£ s·∫Ω lu√¥n c√≥ c√πng ƒë·ªô d√†i v·ªõi array ban ƒë·∫ßu.

.reduce()
=======

Gi·ªëng nh∆∞ `.map()`, `.reduce()` c≈©ng g·ªçi h√†m callback cho t·ª´ng ph·∫ßn t·ª≠ c·ªßa array. ƒêi·ªÅu kh√°c bi·ªát ·ªü ƒë√¢y l√† `reduce` chuy·ªÉn k·∫øt qu·∫£ c·ªßa h√†m callback n√†y cho m·ªôt `b·ªô t√≠ch l≈©y` t·ª´ ph·∫ßn t·ª≠ array n√†y sang ph·∫ßn t·ª≠ array kh√°c.

**B·ªô t√≠ch l≈©y** c√≥ th·ªÉ l√† b·∫•t k·ª≥ th·ª© g√¨ (s·ªë nguy√™n, chu·ªói, ƒë·ªëi t∆∞·ª£ng, v.v.) v√† ph·∫£i ƒë∆∞·ª£c kh·ªüi t·∫°o ho·∫∑c truy·ªÅn v√†o khi g·ªçi `.reduce()`.

ƒê·∫øn l√∫c l√†m v√†i v√≠ d·ª• ƒë·ªÉ gi·ªÖ hi·ªÉu h∆°n n√†o!
Gi·∫£ s·ª≠ b·∫°n c√≥ m·ªôt list phi c√¥ng v√† s·ªë nƒÉm kinh nghi·ªám t∆∞∆°ng ·ª©ng c·ªßa h·ªç:

```javascript
var pilots = [
  {
    id: 10,
    name: "Poe Dameron",
    years: 14,
  },
  {
    id: 2,
    name: "Temmin 'Snap' Wexley",
    years: 30,
  },
  {
    id: 41,
    name: "Tallissan Lintra",
    years: 16,
  },
  {
    id: 99,
    name: "Ello Asty",
    years: 22,
  }
]
```

Ch√∫ng ta c·∫ßn bi·∫øt t·ªïng s·ªë nƒÉm kinh nghi·ªám c·ªßa t·∫•t c·∫£ h·ªç. V·ªõi `.reduce()`, n√≥ kh√° ƒë∆°n gi·∫£n:

```javascript
var totalYears = pilots.reduce(function (accumulator, pilot) {
  return accumulator + pilot.years;
}, 0);
```

L∆∞u √Ω r·∫±ng m√¨nh ƒë√£ ƒë·∫∑t `value` b·∫Øt ƒë·∫ßu l√† `0`. M√¨nh c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt object n·∫øu c·∫ßn. Sau khi g·ªçi callback cho t·ª´ng ph·∫ßn t·ª≠ c·ªßa array, reduce s·∫Ω tr·∫£ v·ªÅ value cu·ªëi c√πng c·ªßa `b·ªô t√≠ch l≈©y` c·ªßa ch√∫ng ta (trong tr∆∞·ªùng h·ª£p n√†y l√†: `82`).

V√† t·∫•t nhi√™n n√≥ c≈©ng c√≥ th·ªÉ ƒë∆∞·ª£c r√∫t ng·∫Øn v·ªõi c√°c arrow functions c·ªßa ES6:

```javascript
const totalYears = pilots.reduce((acc, pilot) => acc + pilot.years, 0);
```

B√¢y gi·ªù, gi·∫£ s·ª≠ m√¨nh mu·ªën t√¨m phi c√¥ng n√†o l√† ng∆∞·ªùi c√≥ kinh nghi·ªám nh·∫•t. ƒê·ªëi v·ªõi c√¢u h·ªèi n√†y, m√¨nh c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng `reduce`:

```javascript
var mostExpPilot = pilots.reduce(function (oldest, pilot) {
  return (oldest.years || 0) > pilot.years ? oldest : pilot;
}, {});
```

M√¨nh ƒë·∫∑t t√™n cho `b·ªô t√≠ch l≈©y` c·ªßa m√¨nh l√† `oldest`. H√†m callback c·ªßa m√¨nh so s√°nh b·ªô t√≠ch l≈©y v·ªõi t·ª´ng phi c√¥ng. N·∫øu m·ªôt phi c√¥ng c√≥ nhi·ªÅu nƒÉm kinh nghi·ªám h∆°n `oldest`, th√¨ phi c√¥ng ƒë√≥ s·∫Ω tr·ªü th√†nh phi c√¥ng `oldest` ƒë·∫øn cu·ªëi c√πng m√¨nh s·∫Ω tr·∫£ v·ªÅ `oldest`.

Nh∆∞ b·∫°n c√≥ th·ªÉ th·∫•y, s·ª≠ d·ª•ng `.reduce()` l√† m·ªôt c√°ch d·ªÖ d√†ng ƒë·ªÉ t·∫°o m·ªôt `value` ho·∫∑c m·ªôt `Object` t·ª´ m·ªôt array.

.filter()
======

N·∫øu b·∫°n c√≥ m·ªôt array, nh∆∞ng ch·ªâ mu·ªën m·ªôt s·ªë ph·∫ßn t·ª≠ trong ƒë√≥ th√¨ sao? ƒê√≥ l√† khi b·∫°n c·∫ßn d√πng t·ªõi `.filter()`

ƒê√¢y l√† d·ªØ li·ªáu c·ªßa ch√∫ng ta:

```javascript
var pilots = [
  {
    id: 2,
    name: "Wedge Antilles",
    faction: "Rebels",
  },
  {
    id: 8,
    name: "Ciena Ree",
    faction: "Empire",
  },
  {
    id: 40,
    name: "Iden Versio",
    faction: "Empire",
  },
  {
    id: 66,
    name: "Thane Kyrell",
    faction: "Rebels",
  }
];
```

Gi·∫£ s·ª≠ b√¢y gi·ªù ch√∫ng ta mu·ªën c√≥ hai array: m·ªôt array d√†nh cho qu√¢n "Rebels", array c√≤n l·∫°i d√†nh cho qu√¢n "Empire". V·ªõi `.filter()` n√≥ v√¥ d√πng ƒë∆°n gi·∫£n!

```javascript
var rebels = pilots.filter(function (pilot) {
  return pilot.faction === "Rebels";
});
var empire = pilots.filter(function (pilot) {
  return pilot.faction === "Empire";
});
```

V√† n√≥ th·∫≠m ch√≠ c√≤n ng·∫Øn h∆°n v·ªõi c√°c arrow functions:

```javascript
const rebels = pilots.filter(pilot => pilot.faction === "Rebels");
const empire = pilots.filter(pilot => pilot.faction === "Empire");
```

V·ªÅ c∆° b·∫£n, n·∫øu function callback **tr·∫£ v·ªÅ l√† true**, ph·∫ßn t·ª≠ hi·ªán t·∫°i **s·∫Ω n·∫±m trong array k·∫øt qu·∫£**. N·∫øu n√≥ tr·∫£ v·ªÅ `false`, n√≥ s·∫Ω kh√¥ng ƒë∆∞·ª£c ƒë∆∞a v√†o danh s√°ch k·∫øt qu·∫£.

ƒê·∫øn ph·∫ßn hay k·∫øt h·ª£p .map(), .reduce() v√† .filter()
======================================

V√¨ c·∫£ ba ƒë·ªÅu ƒë∆∞·ª£c call tr√™n c√°c array v√† v√¨ `.map()` v√† `.filter()` c·∫£ hai ƒë·ªÅu tr·∫£ v·ªÅ array, n√™n ch√∫ng ta c√≥ th·ªÉ d·ªÖ d√†ng x√¢u chu·ªói c√°c l·ªánh g·ªçi c·ªßa m√¨nh.

H√£y xem m·ªôt v√≠ d·ª• kh√°c. ƒê√¢y l√† d·ªØ li·ªáu c·ªßa ch√∫ng ta:

```javascript
var personnel = [
  {
    id: 5,
    name: "Luke Skywalker",
    pilotingScore: 98,
    shootingScore: 56,
    isForceUser: true,
  },
  {
    id: 82,
    name: "Sabine Wren",
    pilotingScore: 73,
    shootingScore: 99,
    isForceUser: false,
  },
  {
    id: 22,
    name: "Zeb Orellios",
    pilotingScore: 20,
    shootingScore: 59,
    isForceUser: false,
  },
  {
    id: 15,
    name: "Ezra Bridger",
    pilotingScore: 43,
    shootingScore: 67,
    isForceUser: true,
  },
  {
    id: 11,
    name: "Caleb Dume",
    pilotingScore: 71,
    shootingScore: 85,
    isForceUser: true,
  },
];
```

M·ª•c ti√™u c·ªßa ch√∫ng ta l√†: ch·ªâ c·∫ßn c√≥ ƒë∆∞·ª£c t·ªïng s·ªë ƒëi·ªÉm c·ªßa nh·ªØng user c√≥ `isForceUser` l√† `true`. H√£y l√†m ƒëi·ªÅu ƒë√≥ t·ª´ng b∆∞·ªõc m·ªôt!

ƒê·∫ßu ti√™n, ch√∫ng ta c·∫ßn l·ªçc ra nh·ªØng `user` m√† `isForceUser` l√† `false`:

```javascript
var jediPersonnel = personnel.filter(function (person) {
  return person.isForceUser;
});
// Result: [{...}, {...}, {...}] (Luke, Ezra and Caleb)
```

Sau khi l·ªçc, ch√∫ng ta c√≥ 3 ph·∫ßn t·ª≠ c√≤n l·∫°i trong array k·∫øt qu·∫£ c·ªßa m√¨nh. B√¢y gi·ªù ch√∫ng ta c·∫ßn t·∫°o m·ªôt array ch·ª©a t·ªïng s·ªë ƒëi·ªÉm c·ªßa m·ªói `Jedi`.

```javascript
var jediScores = jediPersonnel.map(function (jedi) {
  return jedi.pilotingScore + jedi.shootingScore;
});
// Result: [154, 110, 156]
```

V√† h√£y s·ª≠ d·ª•ng `reduce` ƒë·ªÉ c√≥ ƒë∆∞·ª£c t·ªïng s·ªë:

```javascript
var totalJediScore = jediScores.reduce(function (acc, score) {
  return acc + score;
}, 0);
// Result: 420
```

V√† b√¢y gi·ªù l√† ph·∫ßn th√∫ v·ªã‚Ä¶ ch√∫ng ta c√≥ th·ªÉ x√¢u chu·ªói t·∫•t c·∫£ nh·ªØng th·ª© n√†y ƒë·ªÉ c√≥ ƒë∆∞·ª£c th·ª© ch√∫ng ta mu·ªën trong m·ªôt d√≤ng duy nh·∫•t:

```javascript
var totalJediScore = personnel
  .filter(function (person) {
    return person.isForceUser;
  })
  .map(function (jedi) {
    return jedi.pilotingScore + jedi.shootingScore;
  })
  .reduce(function (acc, score) {
    return acc + score;
  }, 0);
```

V√† h√£y xem n√≥ ng·∫Øn g·ªçn nh∆∞ th·∫ø n√†o n·∫øu s·ª≠ d·ª•ng v·ªõi arrow functions:

```javascript
const totalJediScore = personnel
  .filter(person => person.isForceUser)
  .map(jedi => jedi.pilotingScore + jedi.shootingScore)
  .reduce((acc, score) => acc + score, 0);
```

B√πm! Qu√° ng·∫ßu ƒë√∫ng ko nh√¨n ng·∫Øn g·ªçn gi·ªÖ hi·ªÉu h∆°n nhi·ªÅu nh·ªâ

*L∆∞u √Ω: Trong v√≠ d·ª• tr√™n, `.map()` v√† `.filter()` th·∫≠m ch√≠ c√≤n kh√¥ng c·∫ßn thi·∫øt. Ch√∫ng ta c√≥ th·ªÉ d·ªÖ d√†ng ƒë·∫°t ƒë∆∞·ª£c k·∫øt qu·∫£ t∆∞∆°ng t·ª± ch·ªâ v·ªõi `.reduce()`. Tuy nhi√™n ·ªü v√≠ d·ª• tr√™n m√¨nh v·∫´n d√πng n√≥ ƒë·ªÉ c√°c b·∫°n gi·ªÖ h√¨nh dung h∆°n. B·∫°n c√≥ th·ªÉ ƒëo√°n xem l√†m c√°ch n√†o ch·ªâ c·∫ßn d√πng `.reduce()` m√† v·∫´n nh·∫≠n ƒë∆∞·ª£c k·∫øt qu·∫£ t∆∞∆°ng t·ª± ch·ªâ v·ªõi v·ªõi m·ªôt d√≤ng code kh√¥ng?*

Ten t√®n easy ƒë√∫ng ƒë√∫ng ko:
```javascript
const totalJediScore = personnel.reduce(
  (acc, person) =>
    person.isForceUser
      ? acc + person.pilotingScore + person.shootingScore
      : acc,
  0
);
```

T·∫°i sao kh√¥ng s·ª≠ d·ª•ng .forEach()?
=================================

C√¢u h·ªèi r·∫•t hay, th·ª±c ra th√¨ m√¨nh ƒë√£ t·ª´ng s·ª≠ d·ª•ng c√°c v√≤ng l·∫∑p `for` ·ªü m·ªçi n∆°i thay v√¨ `.map()`, `.reduce()` v√† `.filter()`. Nh∆∞ng g·∫ßn ƒë√¢y, khi c√≥ c∆° h·ªôi ƒë∆∞·ª£c t·ª± tay vi·∫øt nh·ªØng function base cho d·ª± √°n hi·ªán t·∫°i c·ªßa cty, m√¨nh ƒë√£ b·∫Øt ƒë·∫ßu l√†m vi·ªác nhi·ªÅu h∆°n v·ªõi d·ªØ li·ªáu ƒë·∫øn t·ª´ API. ƒê√≥ l√† l√∫c m√¨nh b·∫Øt ƒë·∫ßu th·∫•y nh·ªØng l·ª£i th·∫ø c·ªßa vi·ªác s·ª≠ d·ª•ng ch√∫ng. Nh∆∞ b·∫°n th·∫•y v√≠ d·ª• ƒë·∫ßu ti√™n m√¨nh c√≥ ƒë∆∞a ra b·∫°n ho√†n to√†n c√≥ th·ªÉ gi·∫£i quy·∫øt m·ªôt b√†i to√°n ch·ªâ v·ªõi 1 d√≤ng code.

Formatting
---------

Gi·∫£ s·ª≠ b·∫°n c√≥ 1 danh s√°ch ch·ª©a `name` v√† `title`:

```javascript
var data = [
  {
    name: "Jan Dodonna",
    title: "General",
  },
  {
    name: "Gial Ackbar",
    title: "Admiral",
  },
]
```

API cung c·∫•p cho b·∫°n d·ªØ li·ªáu tr√™n, nh∆∞ng b·∫°n ch·ªâ c·∫ßn ph·∫ßn ti√™u ƒë·ªÅ v√† h·ªç c·ªßa t·ª´ng ng∆∞·ªùi‚Ä¶ V√¨ ta c√≥ fullname n√™n ch·∫Øc ch·∫Øn ph·∫£i ƒë·ªãnh d·∫°ng n√≥ l·∫°i ƒë√∫ng ko? (firstname + lastname)
V√¨ v·∫≠y b·∫°n ph·∫£i vi·∫øt m·ªôt function ƒë·ªãnh d·∫°ng d·ªØ li·ªáu ƒë·ªÉ s·ª≠ d·ª•ng m·ªói khi ch√∫ng ta l·∫∑p.

ƒêi·ªÅu ƒë√≥ c√≥ nghƒ©a l√† b·∫°n kh√¥ng th·ªÉ c√≥ v√≤ng l·∫∑p `.forEach` b√™n trong h√†m `formatElement`, n·∫øu kh√¥ng b·∫°n s·∫Ω ph·∫£i b·ªçc ph·∫ßn t·ª≠ ƒë∆°n l·∫ª c·ªßa m√¨nh trong m·ªôt array tr∆∞·ªõc khi chuy·ªÉn n√≥ v√†o h√†m ch·ªâ ƒë·ªÉ n√≥ ho·∫°t ƒë·ªông, nh∆∞ sau:

```javascript
var result = formatElement([element])[0];
// Yeah... ƒëi·ªÅu ƒë√≥ kh√¥ng ƒë√∫ng ch√∫t n√†o
```

V√¨ v·∫≠y, v√≤ng l·∫∑p c·ªßa b·∫°n ph·∫£i k·∫øt th√∫c vi·ªác g·ªçi c·ªßa h√†m, nh∆∞ th·∫ø n√†y:

```javascript
data.forEach(function (element) {
  var formatted = formatElement(element);
  // Nh∆∞ng sau ƒë√≥ th√¨ sao....   
});
```

Nh∆∞ng `.forEach()` kh√¥ng tr·∫£ l·∫°i b·∫•t c·ª© ƒëi·ªÅu g√¨. ƒêi·ªÅu ƒë√≥ c√≥ nghƒ©a l√† b·∫°n ph·∫£i ƒë·∫©y k·∫øt qu·∫£ v√†o b√™n trong m·ªôt array ƒë∆∞·ª£c khai b√°o t·ª´ tr∆∞·ªõc.

```javascript
var results = [];
data.forEach(function (element) {
  var formatted = formatElement(element);
  results.push(formatted);
});
```

K·∫øt qu·∫£ l√† b·∫°n c√≥ 2 h√†m: h√†m `formatElement()` v√† h√†m `push` k·∫øt qu·∫£ v√†o array c·ªßa b·∫°n.

T·∫°i sao c√≥ 2 function khi b·∫°n ch·ªâ c·∫ßn 1 l√† ƒë·ªß:

```javascript
var results = data.map(formatElement);
```

Testing d·ªÖ d√†ng h∆°n
--------------------

N·∫øu b·∫°n vi·∫øt c√°c **Unit tests** cho code c·ªßa m√¨nh, b·∫°n s·∫Ω th·∫•y vi·ªác ki·ªÉm tra c√°c function b·∫±ng `.map()`, `.reduce()` ho·∫∑c `.filter()`, ƒë∆°n gi·∫£n h∆°n.

T·∫•t c·∫£ nh·ªØng g√¨ b·∫°n ph·∫£i l√†m l√† cung c·∫•p d·ªØ li·ªáu cho h√†m v√† mong ƒë·ª£i k·∫øt qu·∫£ xu·∫•t hi·ªán. V·ªÅ c∆° b·∫£n "ƒëi·ªÅu g√¨ s·∫Ω x·∫£y ra n·∫øu **ƒëi·ªÅu n√†y** ƒë∆∞·ª£c `passed`?". √çt thao t√°c h∆°n, √≠t `beforeEach()` v√† `afterEach()` h∆°n. N√≥ s·∫Ω ƒë∆°n gi·∫£n h∆°n r·∫•t nhi·ªÅu.



C·ªë g·∫Øng thay th·∫ø m·ªôt s·ªë v√≤ng l·∫∑p `for`c·ªßa b·∫°n b·∫±ng `.map()`, `.reduce()`, `.filter()` n∆°i n√≥ c√≥ v·∫ª ph√π h·ª£p. M√¨nh ƒë·∫£m b·∫£o code c·ªßa b·∫°n s·∫Ω b·ªõt l·ªôn x·ªôn v√† d·ªÖ ƒë·ªçc h∆°n nhi·ªÅu.

Ng√†y x∆∞a khi m√¨nh m·ªõi s·ª≠ d·ª•ng m·∫•y h√†m n√†y ƒë·∫∑c bi·ªát l√† `.reduce()` m√¨nh c≈©ng r·∫•t b·ªëi r·ªëi nh∆∞ng d·∫ßn d·∫ßn r·ªìi s·∫Ω quen ·∫•y m√†. [M√¨nh c≈©ng c√≥ m·ªôt b√†i vi·∫øt v·ªÅ nh·ªØng Snippets th∆∞·ªùng d√πng c·ªßa nh·ªØng h√†m n√†y c√°c b·∫°n c√≥ th·ªÉ tham kh·∫£o.](https://viblo.asia/p/blog37-bay-lac-cung-voi-20-snippets-kinh-dien-trong-javascript-series-bi-kip-javascript-phan-32-zXRJ8jj2VGq)

Roundup
=======
Nh∆∞ m·ªçi khi, m√¨nh hy v·ªçng b·∫°n th√≠ch b√†i vi·∫øt n√†y v√† h·ªçc th√™m ƒë∆∞·ª£c ƒëi·ªÅu g√¨ ƒë√≥ m·ªõi.

C·∫£m ∆°n v√† h·∫πn g·∫∑p l·∫°i c√°c b·∫°n trong nh·ªØng b√†i vi·∫øt ti·∫øp theo! üòç

N·∫øu b·∫°n th·∫•y Blog n√†y hay xin h√£y cho m√¨nh m·ªôt like v√† ƒëƒÉng k√Ω ƒë·ªÉ ·ªßng h·ªô m√¨nh nh√©. Thank you.üòâ

Ref
=======
* https://tuan200tokyo.blogspot.com/2022/11/blog44-on-gian-hoa-code-cua-ban-bang.html