## I. Abstract Factory - Creational Patterns

![ThieÃÇÃÅt keÃÇÃÅ chuÃõa coÃÅ teÃÇn (2).png](https://images.viblo.asia/aa188a52-4a6d-437c-85be-d37b52c046fd.png)

N·∫øu ch√∫ng ta ƒë√£ bi·∫øt ƒë∆∞·ª£c m·∫´u thi·∫øt k·∫ø [Factory](https://viblo.asia/p/golang-design-patterns-factory-method-noi-tao-ra-nhieu-loai-do-uong-tu-hat-cafe-y3RL12ynVao) l√† nh∆∞ th·∫ø n√†o, th√¨ h√¥m nay m√¨nh xin gi·ªõi thi·ªáu v·ªõi c√°c b·∫°n design pattern bao qu√°t h∆°n n·ªØa, ch√≠nh l√† Absract Factory.

M·ª•c ƒë√≠ch ch√≠nh c·ªßa m·∫´u thi·∫øt k·∫ø n√†y l√† gom nh√≥m c√°c Factory th√†nh m·ªôt Factory l·ªõn, th·ª© c√≥ th·ªÉ ho√°n ƒë·ªïi v√† m·ªü r·ªông m·ªôt c√°ch d·ªÖ d√†ng h∆°n. Th∆∞·ªùng trong giai ƒëo·∫°n ƒë·∫ßu c·ªßa vi·ªác plan, define v·ªÅ ch·ª©c nƒÉng m√† c√°c Factory c√≥ th·ªÉ c√≥, vi·ªác ch√∫ng ta thao t√°c v√† ch·ªâ quan t√¢m ƒë·∫øn c√°c factories v√† abstract factories s·∫Ω l√† m·ªôt h∆∞·ªõng ti·∫øp c·∫≠n d·ªÖ d√†ng h∆°n so v·ªõi vi·ªác ƒë·ª£i define ƒë·∫ßy ƒë·ªß chi ti·∫øt cho ch√∫ng. Nh∆∞ng ƒë·ªÉ tri·ªÉn khai pattern n√†y, ch√∫ng ta c≈©ng c·∫ßn quan t√¢m nh·ªØng th·ª© m√† m√¨nh s·∫Ω n√≥i trong b√†i vi·∫øt sau nh√© üòÑ

## II. Abstract Factory mang l·∫°i cho developers nh·ªØng g√¨?
Pattern n√†y gi√∫p ch√∫ng ta gom nh√≥m c√°c ƒë·ªëi t∆∞·ª£ng li√™n quan khi s·ªë l∆∞·ª£ng ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ tƒÉng l√™n m√† ta kh√¥ng th·ªÉ ki·ªÉm so√°t trong giai ƒëo·∫°n ph√°t tri·ªÉn, b·∫±ng c√°ch t·∫°o ra m·ªôt unique point, n∆°i c√≥ th·ªÉ t·∫°o ra t·∫•t c·∫£ c√°c ƒë·ªëi t∆∞·ª£ng ƒë√≥: 
- T·∫°o ra m·ªôt l·ªõp m·ªõi `ƒë√≥ng g√≥i` c√°c Factory Method v√† tr·∫£ v·ªÅ m·ªôt common interface cho to√†n b·ªô fatories.
- Gom nh√≥m c√°c common factories v√†o m·ªôt `super Factory`, hay c√≤n ƒë∆∞·ª£c g·ªçi l√† Factory c·ªßa nh·ªØng Factories.

## III. V√≠ d·ª• th·ª±c t·∫ø
Ch√∫ng ta s·∫Ω quay l·∫°i v·ªõi v√≠ d·ª• trong b√†i [Builder Design Pattern](https://viblo.asia/p/golang-design-patterns-builder-khoi-tao-nhung-doi-tuong-phuc-tap-bang-phuong-phap-step-by-step-PwlVm0zPL5Z), nh∆∞ng c√≥ m·ªôt v√†i y√™u c·∫ßu ƒë·∫∑c bi·ªát h∆°n, ch√∫ng ta ƒë·∫øn m·ªôt c·ª≠a h√†ng b√°n xe ƒë·ªÉ mua 1 chi·∫øc xe m√°y v√† 1 chi·∫øc xe ƒë·∫°p. C·ª≠a h√†ng n√†y c√≥ c√°c lo·∫°i xe sau:

- Xe ƒë·∫°p c√≥ 2 lo·∫°i: xe ƒë·∫°p b√¨nh th∆∞·ªùng v√† xe ƒë·∫°p th·ªÉ thao
- Xe m√°y c√≥ 2 lo·∫°i: xe 125cc v√† 150cc
<br>
<br>

ƒê·ªÉ tri·ªÉn khai Abstract Factory d·ª±a tr√™n ƒë·ªëi t∆∞·ª£ng Vehicle c·ªßa m·∫´u Factory Method tr∆∞·ªõc ƒë√≥, ch√∫ng ta c·∫ßn tu√¢n th·ªß c√°c nguy√™n t·∫Øc sau:
- Ch√∫ng ta lu√¥n t·∫°o Vehicle b·∫±ng c√°ch s·ª≠ d·ª•ng factory ƒë∆∞·ª£c tr·∫£ v·ªÅ t·ª´ abstract factory
- M·ªôt ƒë·ªëi t∆∞·ª£ng xe lu√¥n l√† 1 trong 2 ƒë·ªëi t∆∞·ª£ng Bicycle (implement Vehicle + Bicycle) ho·∫∑c Motorbike (implement interface Vehicle + Motorbike)


## IV. Implementation
Theo ƒë·ªÅ b√†i, ch√∫ng ta c·∫ßn ph·∫£i t·∫°o nh·ªØng ƒë·ªëi t∆∞·ª£ng nh∆∞ sau:
- Vehicle: l√† m·ªôt interface m√† t·∫•t c·∫£ c√°c ƒë·ªëi t∆∞·ª£ng factory c·∫ßn ph·∫£i implement:
    + Bicycle: M·ªôt interface bao g·ªìm 2 lo·∫°i xe ƒë·∫°p NormalBicycle - xe ƒë·∫°p th∆∞·ªùng v√† SportBicycle - xe ƒë·∫°p th·ªÉ thao
    + Motorbike: interface c·ªßa xe m√°y g·ªìm xe m√°y Motor125CC v√† Motor150CC
<br>
<br>
- VehicleFactory: l√† interface (abstract interface m√† ch√∫ng ta ƒëang quan t√¢m) ƒë·ªÉ t·∫°o ra c√°c factories tri·ªÉn khai ph∆∞∆°ng th·ª©c c·ªßa n√≥:
    + BicycleFactory: l√† factory implement VehicleFactory interface v√† tr·∫£ v·ªÅ ƒë·ªëi t∆∞·ª£ng vehicle, ƒë·ªëi t∆∞·ª£ng n√†y b·∫Øt bu·ªôc ph·∫£i implement c√°c ph∆∞∆°ng th·ª©c c·ªßa interface Vehicle v√† Bicycle
    + MotorbikeFactory: t∆∞∆°ng t·ª± nh∆∞ tr√™n, ch·ªâ kh√°c l√† c√°c ƒë·ªëi t∆∞·ª£ng vehicle n√†y ph·∫£i tri·ªÉn khai c√°c ph∆∞∆°ng th·ª©c t·ª´ interface Vehicle v√† Motorbike

<br>
<br>
B·∫Øt ƒë·∫ßu v·ªõi Golang th√¥i n√†o ^^

Ch√∫ng ta s·∫Ω t·∫°o c√°c entity ·ªü tr√™n b·∫±ng nh·ªØng file ri√™ng bi·ªát. ƒê·∫ßu ti√™n l√† `Vehicle` interface trong file vehicle.go
```vehicle.go
package abstract_factory

type Vehicle interface {
	NumWheels() int
	NumSeats() int
}

```

Bicycle interface v√† MotorBike interface s·∫Ω ƒë∆∞·ª£c t·∫°o trong file bicyle.go v√† motorbike.go, t∆∞∆°ng ·ª©ng nh∆∞ sau:
```bicycle.go
package abstract_factory

type Bicycle interface {
	GetType() int
}
```
```motorbike.go
package abstract_factory

type Motorbike interface {
	GetCC() string
}
```


Ch√∫ng ta c√≥ m·ªôt interface cu·ªëi c√πng, n∆°i m√† t·∫•t c·∫£ c√°c factory ƒë·ªÅu ph·∫£i tri·ªÉn khai ƒë√≥ l√† VehicleFactory trong file vehicle_factory.go, interface n√†y cung c·∫•p 1 method duy nh·∫•t (ƒë∆∞·ª£c xem nh∆∞ ch·ª©c nƒÉng c·ªßa c·ª≠a h√†ng b√°n xe l√† l·∫•y xe giao cho kh√°ch üòÑ)
```vehicle_factory.go
package abstract_factory

type VehicleFactory interface {
	NewVehicle(v int) (Vehicle, error)
}

```


B√¢y gi·ªù t·ªõi gian ƒëo·∫°n tri·ªÉn khai c√°c ƒë·ªëi t∆∞·ª£ng nh·ªè h∆°n, ta b·∫Øt ƒë·∫ßu v·ªõi BicycleFactory v√† MotorbikeFactory nh√©, v√¨ ƒëo·∫°n n√†y implement nh∆∞ m·∫´u Factory trong b√†i tr∆∞·ªõc n√™n c√°c b·∫°n ƒë·ªçc qua s·∫Ω hi·ªÉu, m√¨nh kh√¥ng n√≥i chi ti·∫øt n·ªØa. V·ªõi BicycleFactory:
```bicycle_factory.go
package abstract_factory

import (
	"errors"
	"fmt"
)

const (
	NormalBicycleType = 1
	SportBicycleType  = 2
)

type BicycleFactory struct{}

func (c *BicycleFactory) NewVehicle(v int) (Vehicle, error) {
	switch v {
	case NormalBicycleType:
		return new(NormalBicycle), nil
	case SportBicycleType:
		return new(SportBicycle), nil
	default:
		err := fmt.Sprintf("Vehicle of type %d not recognized\n", v)
		return nil, errors.New(err)
	}
}

```

```normal_bicycle.go
package abstract_factory

type NormalBicycle struct{}

func (*NormalBicycle) GetType() string {
	return "Normal Bicycle"
}

func (*NormalBicycle) NumWheels() int {
	return 2
}

func (*NormalBicycle) NumSeats() int {
	return 1
}

```

```sport_bicycle.go
package abstract_factory

type SportBicycle struct{}

func (*SportBicycle) GetType() string {
	return "Sport Bicycle"
}

func (*SportBicycle) NumWheels() int {
	return 1
}

func (*SportBicycle) NumSeats() int {
	return 1
}

```

V√† MotorbikeFactory:
```motorbike_factory.go
package abstract_factory

import (
	"errors"
	"fmt"
)

const (
	Motorbike125CCType = 1
	Motorbike150CCType = 2
)

type MotorbikeFactory struct{}

func (c *MotorbikeFactory) NewVehicle(v int) (Vehicle, error) {
	switch v {
	case Motorbike125CCType:
		return new(Motorbike125CC), nil
	case Motorbike150CCType:
		return new(Motorbike150CC), nil
	default:
		err := fmt.Sprintf("Vehicle of type %d not recognized\n", v)
		return nil, errors.New(err)
	}
}



```


```motorbike_125cc.go
package abstract_factory

type Motorbike125CC struct{}

func (*Motorbike125CC) GetCC() string {
	return "125cc"
}

func (*Motorbike125CC) NumWheels() int {
	return 2
}

func (*Motorbike125CC) NumSeats() int {
	return 2
}

```

```motorbike_150cc.go
package abstract_factory

type Motorbike150CC struct{}

func (*Motorbike150CC) GetCC() string {
	return "150cc"
}

func (*Motorbike150CC) NumWheels() int {
	return 2
}

func (*Motorbike150CC) NumSeats() int {
	return 2
}

```

V√† cu·ªëi c√πng, ch√∫ng ta c·∫ßn abstract c√°c factory tr√™n, v√† t·∫°o ra m·ªôt `unique point` nh∆∞ ƒë·∫ßu b√†i vi·∫øt m√¨nh c√≥ nh·∫Øc ƒë·∫øn, ph·ª•c v·ª• cho vi·ªác t·∫°o ra c√°ch ƒë·ªëi t∆∞·ª£ng vehicle. Ch√∫ng ta tri·ªÉn khai function n√†y trong file vehicle_factory.go ƒë√£ ƒë∆∞·ª£c t·∫°o ph√≠a tr√™n lu√¥n nh√©:

``` vehicle_factory.go
package abstract_factory

import (
	"errors"
	"fmt"
)

type VehicleFactory interface {
	NewVehicle(v int) (Vehicle, error)
}

const (
	BicycleFactoryType   = 1
	MotorbikeFactoryType = 2
)

func BuildFactory(f int) (VehicleFactory, error) {
	switch f {
	case BicycleFactoryType:
		return new(BicycleFactory), nil
	case MotorbikeFactoryType:
		return new(MotorbikeFactory), nil
	default:
		err := fmt.Sprintf("Factory with id %d not recognized\n", f)
		return nil, errors.New(err)
	}

}

```


C√≥ ƒë·∫ßy ƒë·ªß t·∫•t c·∫£ r·ªìi, ch√∫ng ta ch·∫°y ch∆∞∆°ng tr√¨nh trong main.go:
```main.go
func main() {
	/*
		Example Abstract Factory
	*/
	fmt.Println("*** Example Abstract Factory ***")

	bicycleFactory, err := abstract_factory.BuildFactory(abstract_factory.BicycleFactoryType)
	if err != nil {
		fmt.Println("Error: ", err)
	}

	sportBicycle, err := bicycleFactory.NewVehicle(abstract_factory.SportBicycleType)
	if err != nil {
		fmt.Println("Error: ", err)
	}

	fmt.Println("Sport Bicycle:")
	fmt.Printf("Vehicle has %d wheels, %d seats.\n", sportBicycle.NumWheels(), sportBicycle.NumSeats())

	fmt.Print("*** End of Abstract Factory ***\n\n\n")

}

```

K·∫øt qu·∫£:
![image.png](https://images.viblo.asia/102c5044-02e2-44aa-b2cb-cb6d50818c67.png)

## V. L·ªùi k·∫øt
Qua b√†i vi·∫øt c·ªßa m√¨nh, c√°c b·∫°n ƒë√£ hi·ªÉu ƒë∆∞·ª£c c√°ch t·∫°o ra factory t·ª´ nh·ªØng factories r·ªìi, m·∫´u thi·∫øt k·∫ø n√†y th∆∞·ªùng ƒë∆∞·ª£c d√πng nhi·ªÅu trong c√°c ·ª©ng d·ª•ng, th∆∞ vi·ªán ƒëa n√™n t·∫£ng nh∆∞ GUI libraries. L·∫•y v√≠ d·ª• ƒë∆°n gi·∫£n nh·∫•t l√† `button`, m·ªôt ƒë·ªëi t∆∞·ª£ng r·∫•t chung, v√† m·ªôt button factory gi√∫p b·∫°n t·∫°o ra c√°c factory tr√™n c√°c OS kh√°c nhau nh∆∞ Microsoft Windows buttons hay Mac OS X buttons. Ch√∫ng ta kh√¥ng c·∫ßn quan t√¢m ph·∫ßn tri·ªÉn khai c·ª• th·ªÉ tr√™n t·ª´ng platform, h·ªá ƒëi·ªÅu h√†nh,... C√¥ng vi·ªác c·ªßa ch√∫ng ta ch·ªâ c·∫ßn ƒë·ªãnh nghƒ©a m·ªôt v√†i action ƒë·∫∑c bi·ªát ph·∫£i c√≥ c·ªßa m·ªôt button m√† th√¥i.

Vi·ªác t·∫°o ra c√°c ƒë·ªëi t∆∞·ª£ng, c√≥ th·ªÉ ti·∫øp c·∫≠n b·∫±ng nhi·ªÅu ph∆∞∆°ng ph√°p kh√°c nhau. Nh∆∞ ·ªü b√†i vi·∫øt Buider Design Pattern, m√¨nh t·∫°o ra Bicycle v√† MotorBike t·ª´ 1 factory duy nh·∫•t, nh∆∞ng ·ªü b√†i vi·∫øt n√†y, m√¨nh ƒë√£ m·ªü r·ªông n√≥ ra, v√† ch√∫ng ta c√≥ th·ªÉ th·∫•y ƒë∆∞·ª£c vi·ªác customize nh·ªØng ƒë·ªëi t∆∞·ª£ng m·ªõi th√™m v√†o s·∫Ω d·ªÖ d√†ng h∆°n r·∫•t nhi·ªÅu. Tuy nhi√™n, kh√¥ng c√≥ m·∫´u thi·∫øt k·∫ø n√†o l√† t·ªëi ∆∞u h∆°n m·∫´u thi·∫øt k·∫ø n√†o c·∫£, t·∫•t c·∫£ l√† ph·ª• thu·ªôc v√† business, v√†o ch√≠nh b·∫°n ^^

C·∫£m ∆°n c√°c b·∫°n ƒë√£ xem b√†i vi·∫øt.

## VI. References
 Go Design Patterns (Mario Castro Contreras)

## M·ª•c t√¨m ki·∫øm ƒë·ªìng ƒë·ªôi

![](https://images.viblo.asia/9fbde6d9-5e57-4429-a903-10a961e1c96c.png)

Team c√¥ng ngh·ªá Ho√†ng Ph√∫c c·ªßa b·ªçn m√¨nh ƒë∆∞·ª£c th√†nh l·∫≠p v·ªõi nhi·ªám v·ª• l√† x√¢y d·ª±ng m·ªôt h·ªá th·ªëng c√¥ng ngh·ªá n·ªôi b·ªô cho c√¥ng ty, Ho√†ng Ph√∫c l√† m·ªôt c√¥ng ty b√°n l·∫ª trong lƒ©nh v·ª±c th·ªùi trang v√† c√≥ h∆°n 30 nƒÉm tu·ªïi ƒë·ªùi, v·ªõi chu·ªói c·ª≠a h√†ng r·∫•t nhi·ªÅu tr√™n to√†n qu·ªëc, n√™n vi·ªác v·∫≠n h√†nh c·ªßa Ho√†ng Ph√∫c l√† r·∫•t l·ªõn v√† vi·ªác x√¢y d·ª±ng ƒë∆∞·ª£c m·ªôt h·ªá th·ªëng c√¥ng ngh·ªá ƒë·ªÉ ƒë√°p ·ª©ng vi·ªác v·∫≠n h√†nh n·ªôi b·ªô cho c√¥ng ty l√† m·ªôt c√¥ng vi·ªác r·∫•t th·ª≠ th√°ch, ƒë√¢y l√† m·ªôt qu√° tr√¨nh chuy·ªÉn ƒë·ªïi s·ªë v√† team b·ªçn m√¨nh ƒë√£ l√†m ƒë∆∞·ª£c nh·ªØng b∆∞·ªõc ban ƒë·∫ßu.

Th·ª© m√† team m√¨nh th·∫•y c·∫•n duy nh·∫•t l√† c√°i website, ƒë√¢y l√† trang web m√† tr∆∞·ªõc khi team m√¨nh ƒë∆∞·ª£c th√†nh l·∫≠p ƒë√£ c√≥ m·ªôt ƒë·ªôi outsource kh√°c l√†m, v√† nh·ªØng g√¨ h·ªç ƒë·ªÉ l·∫°i cho b·ªçn m√¨nh l√† m·ªôt trang web v·ªõi ƒë·ªëng b√πi nh√πi, v·ªõi s·ªë ƒëi·ªÉm t·ª´ google l√† 1 tr√™n 100. V·∫≠y b·ªçn m√¨nh s·∫Ω l√†m g√¨ v·ªõi trang web n√†y ƒë√¢y, n·∫£n ch√≠ sao? ƒêi·ªÅu ƒë√≥ kh√¥ng c√≥ trong t·ª´ ƒëi·ªÉn c·ªßa hai s·∫øp m√¨nh, v√† v·ªõi s·ª± d·∫´n d·∫Øt c·ªßa hai s·∫øp team m√¨nh s·∫Ω bi·∫øn ƒë·ªëng website b√πi nh√πi ƒë√≥ th√†nh kim c∆∞∆°ng, nh∆∞ c√°ch b·ªçn m√¨nh ƒë√£ c·∫£i thi·ªán h·ªá th·ªëng n·ªôi b·ªô. B·ªçn m√¨nh ƒëang c·∫£i thi·ªán trang web h·∫±ng ng√†y v√† h·∫±ng ng√†y, t·ª´ 1 ƒëi·ªÉm b·ªçn m√¨nh ƒë√£ c·∫£i thi·ªán n√≥ l√™n 70 ƒëi·ªÉm, v√† m·ª•c ti√™u l√† tr√™n 90 ƒëi·ªÉm.

Hi·ªán t·∫°i team b·ªçn m√¨nh ƒëang c·∫ßn c√°c ƒë·ªìng ƒë·ªôi tham gia ƒë·ªÉ c·∫£i thi·ªán l·∫°i trang web v·ªõi s·ªë l∆∞·ª£ng ng∆∞·ªùi d√πng truy c·∫≠p kh√° l·ªõn, ƒë√¢y l√† m·ªôt th·ª≠ th√°ch r·∫•t th√∫ v·ªã, c√≥ bao gi·ªù c√°c b·∫°n ƒë∆∞·ª£c tham gia thi·∫øt k·∫ø m·ªôt h·ªá th·ªëng l·ªõn t·ª´ ƒë·∫ßu ch∆∞a, m√¨nh kh√° ch·∫Øc l√† s·ªë l∆∞·ª£ng ƒë√≥ r·∫•t √≠t. B·ªçn m√¨nh ƒë√£ c√≥ kh√°ch h√†ng, nh·ªØng g√¨ c√≤n l·∫°i l√† c·∫ßn nh·ªØng ƒë·ªìng ƒë·ªôi ƒë·ªÉ c√πng nhau ph√°t tri·ªÉn m·ªôt h·ªá th·ªëng ƒë·ªÉ ph·ª•c v·ª• r·∫•t nhi·ªÅu ng∆∞·ªùi d√πng. M·ª•c ti√™u c·ªßa c√¥ng ty Ho√†ng Ph√∫c l√† tr·ªü th√†nh nh√† b√°n l·∫ª v·ªÅ th·ªùi trang l·ªõn nh·∫•t Vi·ªát Nam, h√£y tham gia v·ªõi b·ªçn m√¨nh nh√©. M·ªôt th√†nh vi√™n trong team m√¨nh kh√¥ng y√™u c·∫ßn ph·∫£i gi·ªèi, ch·ªâ c·∫ßn h√≤a ƒë·ªìng, h·ª£p t√°c v√† s·∫µn s√†ng h·ª£p t√°c v·ªõi nhau. C√≥ th·ªÉ b·∫°n kh√¥ng l√† gi·ªèi nh·∫•t nh∆∞ng n·∫øu gia nh·∫≠p v·ªõi b·ªçn m√¨nh th√¨ b·∫°n s·∫Ω t·∫°o ra ƒë∆∞·ª£c nh·ªØng th·ª© gi√° tr·ªã nh·∫•t.

[ƒê·ªìng ƒë·ªôi Senior Backend Engineer.](https://tuyendung.hoang-phuc.com/job/senior-backend-engineer-1022)

[ƒê·ªìng ƒë·ªôi Senior Frontend Engineer.](https://tuyendung.hoang-phuc.com/job/senior-frontend-engineer-1021)

[ƒê·ªìng ƒë·ªôi Junior Backend Engineer.](https://tuyendung.hoang-phuc.com/job/junior-backend-engineer-1067)

[ƒê·ªìng ƒë·ªôi Junior Frontend Engineer.](https://tuyendung.hoang-phuc.com/job/junior-frontend-engineer-1068)