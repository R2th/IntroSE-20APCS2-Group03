# â–  Intro.

*Thá»i gian nÃ y khÃ´ng biáº¿t anh chá»‹ em mÃ¬nh cÃ³ theo dÃµi `SEA Games 31` khÃ´ng nhá»‰ ^^ Hai ngÃ y cuá»‘i tuáº§n vá»«a rá»“i cÃ³ ai "Ä‘i bÃ£o" khÃ´ng =))) ChÆ°a bao giá» chiáº¿n tháº¯ng vÃ  tinh tháº§n thá»ƒ thao cao Ä‘áº¹p láº¡i thá»•i máº¡nh máº½ trÃªn kháº¯p con phá»‘ nhÆ° váº­y! Quáº£ lÃ  má»™t ká»³ thi Ä‘áº¥u thÃ nh cÃ´ng cho Ä‘oÃ n thá»ƒ thao Viá»‡t Nam, khÃ©p láº¡i má»™t mÃ¹a `SEA Games` quÃ¡ trá»n váº¹n ğŸ™Œ &nbsp;ğŸ™Œ &nbsp;ğŸ™Œ*

![](https://images.viblo.asia/ccbfb04b-e806-42de-9448-27daf5692551.gif)

*Xin chÃºc má»«ng táº¥t cáº£ cÃ¡c tuyá»ƒn thá»§ má»™t láº§n ná»¯a!!!*

Bá»Ÿi váº­y má»›i má»›i nÃ³i:
```JS
- ChÃºt thay Ä‘á»•i chiáº¿n thuáº­t cÃ³ thá»ƒ viáº¿t nÃªn cáº£ má»™t lá»‹ch sá»­;
  VÃ  tá»‰ sá»‘ thÃ¬ cháº³ng thá»ƒ nÃ o Ä‘Æ°á»£c kháº³ng Ä‘á»‹nh cho Ä‘áº¿n phÃºt 90 cá»§a tráº­n Ä‘áº¥u ğŸ˜ŒğŸ˜Œ
```

áº¤y lÃ  cÃ¢u chuyá»‡n vá» trÃ¡i bÃ³ng bÃªn sÃ¢n cá». CÃ²n vá»›i láº­p trÃ¬nh viÃªn chÃºng ta thÃ¬ sao ğŸ˜¸ğŸ˜¸ ChÃºt thay Ä‘á»•i trong `code` Ä‘Ã´i khi cÅ©ng cÃ³ thá»ƒ lÃ m thay Ä‘á»•i cáº£ luá»“ng `logic` rá»“i áº¥y nhá»‰, vÃ  tÃ­nh Ä‘Ãºng Ä‘áº¯n cÅ©ng cháº³ng thá»ƒ nÃ o kháº³ng Ä‘á»‹nh Ä‘Æ°á»£c cho tá»›i khi chÆ°Æ¡ng trÃ¬nh Ä‘Ã£ cháº¡y xong =)))

Váº­y Ä‘Ã³ giá» anh chá»‹ em Ä‘Ã£ tham gia dá»± Ã¡n nÃ o cÃ³ `build time` há»‡  *&nbsp;s l o w  &nbsp;m o t i o n*  &nbsp;chÆ°a? Pháº£i chá» táº­n vÃ i giÃ¢y *(hoáº·c nhiá»u hÆ¡n tháº¿ =)))* Ä‘á»ƒ chá» `hot-reload` sau khi chá»‰nh sá»­a vÃ i dÃ²ng mÃ£ cháº³ng háº¡n? Hoáº·c tháº­m chÃ­ cÃ³ thá»ƒ máº¥t tá»›i `20 - 45'` Ä‘á»ƒ cÃ³ thá»ƒ `deploy "xong"` má»™t tiáº¿n trÃ¬nh - dÃ¹ chá»‰ lÃ  láº§n sá»­a má»™t lá»—i nho nhá»? ğŸ¥²ğŸ¥² 

PhÃ­m vá»›i chiáº¿c `Buddy` trong `team` vá» váº¥n Ä‘á» nÃ y, mÃ¬nh Ä‘Æ°á»£c gá»£i Ã½ tá»« khoÃ¡ **`Vite`** - má»™t `build tool` Ä‘Æ°á»£c cá»™ng Ä‘á»“ng vÃ­ von lÃ  **`Next Generation Frontend Tooling`**.

*Nom "cháº¥t lÆ°á»£ng" quÃ¡ nhá»‰, cÆ¡ mÃ  tÃ¬m hiá»ƒu má»™t mÃ¬nh thÃ¬ *"buá»“n Æ¡i lÃ  buá»“n"*, Ä‘á»“ng hÃ nh cÃ¹ng mÃ¬nh trong bÃ i viáº¿t nÃ y nhÃ©!*

![](https://images.viblo.asia/7790891f-bceb-4556-827b-87bc8148d091.png)

*Äáº§u tiÃªn, chÃºng ta ngÃ³ láº¡i [`Module Bundler`](https://viblo.asia/p/frontend-build-cham-qua-thi-chay-ve-khoc-voi-vite-djeZ1E2GZWz#_-module-bundler--1) má»™t chÃºt!*

*Báº¡n nÃ o rÃ nh Ä‘oáº¡n nÃ y rá»“i thÃ¬ cÃ³ thá»ƒ chuyá»ƒn qua [Má»¥c tiáº¿p theo](https://viblo.asia/p/frontend-build-cham-qua-thi-chay-ve-khoc-voi-vite-djeZ1E2GZWz#_-vite-2) luÃ´n nhaa ^^*

# â–  Module Bundler (*)

Äá»ƒ báº¯t Ä‘áº§u xÃ¢y dá»±ng má»™t `website` theo phong cÃ¡ch "kinh Ä‘iá»ƒn" Ä‘Ã³ giá», táº¥t cáº£ nhá»¯ng gÃ¬ chÃºng ta cáº§n lÃ  `HTML`, `CSS` vÃ  Ä‘Ã´i dÃ²ng `JavaScript`.

NÃ¢ng cáº¥p hÆ¡n xÃ­u xiu, khi muá»‘n sá»­ dá»¥ng nhá»¯ng thÆ° viá»‡n ngoÃ i *(`Bootstrap`, `lodash` cháº³ng háº¡n)*, chÃºng ta sáº½ `download` chÃºng vá» vÃ  nhÃºng vÃ o `HTML/CSS`.

Äiá»u nÃ y thÃ¬ cháº³ng cÃ²n xa láº¡ gÃ¬ Ä‘á»‘i vá»›i cÃ¡c anh chá»‹ em `web developer` rá»“i nhá»‰ ğŸ˜¸ğŸ˜¸

CÆ¡ mÃ  náº¿u dá»± Ã¡n cÃ³ nhiá»u `dependencies` quÃ¡ thÃ¬ chÃºng ta quáº£n lÃ½ nhÆ° tháº¿ nÃ o Ä‘Ã¢y? LuÃ´n pháº£i `manually download` mÃ£i hay sao? Ká»ƒ cáº£ khi chÃºng cÃ³ cÃ¡c báº£n cáº­p nháº­t má»›i?

![](https://images.viblo.asia/ad9ce24a-fd26-4a7d-ba09-1f15c9b136f3.gif)

ÄÃ³ lÃ  lÃ½ do cÃ¡c `Package Manager` nhÆ° *`Bower`, `NPM`, `Yarn`*... Ä‘Æ°á»£c sinh ra "cho Ä‘á»i bá»›t khá»•" =))

Vá»›i `NPM` cháº³ng háº¡n, chÃºng ta sáº½ cÃ³ má»™t `package.json` lÆ°u thÃ´ng tin dá»± Ã¡n, má»™t thÆ° má»¥c `node_modules` chá»©a táº¥t cáº£ cÃ¡c `packages` - cÃ¡i dá»… dÃ ng Ä‘Æ°á»£c cÃ i Ä‘áº·t thÃ´ng qua dÃ²ng lá»‡nh:

```js:Terminal
$ npm i PACKAGE_NAME
```

vÃ  rá»“i Ä‘Ã­nh kÃ¨m chÃºng vÃ o `HTML/CSS`:

```html:index.html
<script src="node_modules/.../package_1.js"></script>
<script src="node_modules/.../package_2.js"></script>
...
<script src="main.js"></script> 

<!-- Má»—i script X Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a bá»Ÿi 01 global variable
=>   X cÃ³ thá»ƒ Ä‘Æ°á»£c dÃ¹ng á»Ÿ báº¥t kÃ¬ script nÃ o Ä‘Æ°á»£c-load-sau-nÃ³ -->
```

Viá»‡c pháº£i Ä‘Ã o sÃ¢u vÃ o `node_modules` Ä‘á»ƒ tÃ¬m vá»‹ trÃ­ cá»§a tá»«ng `package`  vÃ  láº§n lÆ°á»£t thÃªm thá»§ cÃ´ng gÃ¢y ra báº¥t tiá»‡n quÃ¡!!! *(sad)*

Äá»ƒ phÃ¡ vá»¡ nguyÃªn táº¯c nÃ y, [`CommonJS`](https://en.wikipedia.org/wiki/CommonJS) - dá»± Ã¡n Ä‘Æ°a ra cÃ¡c Ä‘áº·c táº£ vá» `modules` - Ä‘Ã£ cho phÃ©p `JavaScript` Ä‘Æ°á»£c `import/export`:

```js:main.js
const lodash = require('lodash');
// FYI, NodeJS lÃ  má»™t trong nhá»¯ng implementation pháº§n modules cá»§a CommonJS
```

NhÆ°ng `Browser` khÃ´ng cÃ³ quyá»n truy cáº­p Ä‘áº¿n cÃ¡c `file` há»‡ thá»‘ng, nÃªn Ä‘á»ƒ dÃ¹ng `module` theo cÃ¡ch nÃ y, chÃºng cáº§n Ä‘Æ°á»£c `load Ä‘á»™ng`, báº±ng cÃ¡ch Ä‘á»“ng bá»™ *(sáº½ lÃ m cháº­m quÃ¡ trÃ¬nh thá»±c thi)* hoáº·c báº¥t Ä‘á»“ng bá»™ *(cÃ³ thá»ƒ cÃ³ váº¥n Ä‘á» vá» thá»i Ä‘iá»ƒm load)*.

ÄÃ³ lÃ  chÆ°a ká»ƒ trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn, chÃºng ta cÃ²n cÃ i Ä‘áº·t thÃªm cÃ¡c `pre-processor` *(nhÆ° `Pug`, `SCSS`,..)*; sá»­ dá»¥ng `ES6`; tÃ­ch há»£p `TypeScript`; hay lÃ  `React` vá»›i `JSX`; rá»“i thÃ¬ Ã¡p dá»¥ng má»™t sá»‘ phÆ°Æ¡ng phÃ¡p `performance optimization` nhÆ° *`Code-spliting`, `Lazy-loading` theo `modules`*... vá»›i má»¥c Ä‘Ã­ch nÃ¢ng cao `developer experience`. Trong khi Ä‘Ã³, `browser` láº¡i chá»‰ cáº§n `HTML`, `CSS`  vÃ  `JavaScript` thÃ´iii!?!

Vá»›i táº¥t cáº£ cÃ¡c váº¥n Ä‘á» ká»ƒ trÃªn, má»™t chiáº¿c **`Module bundler`** sáº½ giÃºp chÃºng ta *compile, transform, optimize, minify...* rá»“i Ä‘Ã³ng gÃ³i cÃ¡c `modules` nÃ y láº¡i, táº¡o ra káº¿t quáº£ cuá»‘i cÃ¹ng tÆ°Æ¡ng thÃ­ch vá»›i `browser`.

![](https://cdn-media-1.freecodecamp.org/images/0*WwDTeWwIRxVPg5jK.png)

***(\*)** Ná»™i dung nÃ y Ä‘Æ°á»£c tÃ³m lÆ°á»£c trong bÃ i viáº¿t [`Giáº£i thÃ­ch vá» Javascript thá»i hiá»‡n Ä‘áº¡i cho khá»§ng long`](https://viblo.asia/p/giai-thich-ve-javascript-thoi-hien-dai-cho-khung-long-Eb85oBM2l2G) siÃªu-hayyy siÃªu-chi-tiáº¿ttt cá»§a anh **`Táº¡ Duy Anh`** (respect)x10 ğŸ‘ï¸ ğŸ‘ï¸*

CÃ³ thá»ƒ ká»ƒ tá»›i má»™t vÃ i cÃ´ng cá»¥ `module bundler` phá»• biáº¿n mÃ  báº¡n cÃ³ thá»ƒ Ä‘Ã£ tá»«ng nghe qua nhÆ°: *`Webpack`, `Parcel`, `Rollup`, `Browserify`...* nÃ y, vÃ  bÃ¢y giá» lÃ  `Vite`mÃ  chÃºng ta sáº½ tÃ¬m hiá»ƒu ngay trong pháº§n tiáº¿p theoo!

# â–  Vite

*Theo *[Trang chá»§](https://vitejs.dev/guide/)*:*
> `Vite` is `a build tool` that aims to provide `a faster and leaner development experience` for modern web projects.

TÆ°Æ¡ng tá»± cÃ¡c `build tools` phá»• biáº¿n hiá»‡n nay, `Vite` cÃ³ cÃ¡c chá»©c nÄƒng cá»‘t lÃµi nhÆ°:
- `Project scaffolding` thÃ´ng qua cÃ¡c `CLI generators`
- `Hot Reload Module` *(HRM)* - tá»± Ä‘á»™ng `reload modules` trong quÃ¡ trÃ¬nh `dev`
- `Plugin system` cho phÃ©p `config`, `custom` thÃªm má»™t sá»‘ chá»©c nÄƒng
- ...

<br />

___

####  ğŸ¾  ChÃºt Fun fact, cÃ³ thá»ƒ báº¡n ...thá»«a biáº¿t =)))

*`Vite` Ä‘Æ°á»£c Ä‘á»c lÃ  *`/vit/`ğŸ”Š*, trong tiáº¿ng PhÃ¡p cÃ³ nghÄ©a lÃ  "nhanh chÃ³ng".*

*`Build tool` nÃ y Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi [anh **`Evan You`**](https://evanyou.me/) - cha Ä‘áº» cá»§a `VueJS`. Báº£o sao mÃ  cÃ³`V-prefix` vÃ  phong cÃ¡ch viáº¿t `document` cá»§a `Vue` vÃ  `Vite` "da same" tháº¿ (LOL).*

*BÃªn cáº¡nh máº£ng `Coding`, anh nÃ y há»c cáº£ `Art`, `Design` vÃ  `UI/UX` ná»¯a nÃªn cÅ©ng nghá»‡ láº¯m anh chá»‹ em áº¡ (yaoming) =='*
___

<br />



Ban Ä‘áº§u, `Vite` Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ phá»¥c vá»¥ cho "gÃ  cÆ°ng"  [`VueJS`](https://vite.new/vue), vá» sau thÃ¬ há»— trá»£ thÃªm [`React`](https://reactjs.org/), [`Preact`](https://vite.new/preact) vÃ   [`Svelte`](https://stackblitz.com/edit/vitejs-vite-6m6vng?file=index.html&terminal=dev) ná»¯a ğŸ˜¸ğŸ˜¸ .

*Äiá»u khiáº¿n `Vite` nháº­n Ä‘Æ°á»£c sá»± Ä‘Ã³n nháº­n tÃ­ch cá»±c tá»« cá»™ng Ä‘á»“ng lÃ  vá» tá»‘c Ä‘á»™ ná»•i báº­t cá»§a nÃ³. Äá»ƒ lÃ½ giáº£i táº¡i sao `Vite` láº¡i "nhanh" nhÆ° váº­y? ChÃºng ta cÃ¹ng tÃ¬m hiá»ƒu cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a nÃ³ trong `Development build` vÃ  `Production build` nhÃ©!*

# â–  How Vite is faster?

### â–   Unbundled dev build
Khi chÃºng ta báº¯t Ä‘áº§u khá»Ÿi cháº¡y á»©ng dá»¥ng, `Vite` phÃ¢n loáº¡i cÃ¡c `modules` thÃ nh `02 categories`:

- **Dependency modules**:
    - Chá»§ yáº¿u lÃ  cÃ¡c `plain JavaScript` hoáº·c cÃ¡c `modules` Ä‘Æ°á»£c `import` tá»« `node_modules`, khÃ´ng thay Ä‘á»•i thÆ°á»ng xuyÃªn trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn.
    - VÃ­ dá»¥: *Má»™t sá»‘ `libraries`, `packages` nhÆ° `Antd`, `Bootstrap`, etc.*
    - CÃ¡c `modules` nÃ y sáº½ Ä‘Æ°á»£c `pre-bundle` báº±ng [**`esbuild`**](https://esbuild.github.io/) - má»™t **`JavaScript bundler`** Ä‘Æ°á»£c viáº¿t báº±ng `Golang`, há»©a háº¹n nhanh hÆ¡n ngÆ°á»i anh `Webpack` khoáº£ng tá»« `10â€“100x` vá» máº·t tá»‘c Ä‘á»™.

- **Application modules**:
    - LÃ  cÃ¡c `non-plain JavaScript` - cáº§n Ä‘Æ°á»£c *chuyá»ƒn Ä‘á»•i, biÃªn dá»‹ch,...* vÃ  thÆ°á»ng Ä‘Æ°á»£c chá»‰nh sá»­a thÆ°á»ng xuyÃªn.
    - VÃ­ dá»¥: *`Component.jsx`, `styles.scss`, etc.* 
    - DÃ¹ng **[Native ES Modules](https://hacks.mozilla.org/2018/03/es-modules-a-cartoon-deep-dive/) *(ESM)***.

Vá»›i tÃ´n chá»‰ `On-demand compilation`, `Vite`  khÃ´ng-gÃ³i-táº¥t-cáº£ cÃ¡c `modules` láº¡i vá»›i nhau *(Ä‘iá»u nÃ y giáº£m Ä‘Æ°á»£c má»™t khá»‘i lÆ°á»£ng cÃ´ng viá»‡c Ä‘Ã¡ng ká»ƒ)*. `Vite` chá»‰ cung cáº¥p cÃ¡c`modules` mÃ  trÃ¬nh duyá»‡t cáº§n. ChÃºng cÃ³ thá»ƒ lÃ  **Application modules** kÃ¨m **Dependency modules** - cÃ¡i mÃ  Ä‘Ã£ Ä‘Æ°á»£c `pre-compile` báº±ng `esbuild` á»Ÿ láº§n cháº¡y Ä‘áº§u tiÃªn.

![](https://miro.medium.com/max/1400/1*Lkud6S3RwVTLhgaeeIyvTw.png)

*[Anh  **`Evan You`**](https://evanyou.me/)  cÅ©ng Ä‘Ã£ chia sáº» vá» hiá»‡u quáº£ cá»§a `Native ESM dev build` trong `show` [`The Open Source Friday` cá»§a `Github`](https://www.youtube.com/watch?v=UJypSr8IhKY), báº¡n xem thÃªm nhÃ© ^^*


### â–   Bundled prod build

NgÆ°á»£c láº¡i vá»›i `no-bundle dev build` phÃ­a trÃªn, `Vite` tiáº¿p cáº­n `prod build` váº«n theo hÆ°á»›ng `bundle` thÃ´ng qua má»™t `module bundler` cÃ³ tÃªn lÃ  **[`Rollup`](https://rollupjs.org/guide/en/)**.

![](https://images.viblo.asia/ecf33b5e-87fb-4130-83fc-2bc55103b0bf.PNG)

*Hmmm...*

*Tá»›i Ä‘Ã¢y thÃ¬ má»™t vÃ i cÃ¢u há»i Ä‘Æ°á»£c Ä‘áº·t ra...*

**(?) `Dev build` phÃ­a trÃªn sá»­ dá»¥ng `ESM` rá»“i sao `Production build` khÃ´ng dÃ¹ng luÃ´n?**

Theo chia sáº» cá»§a [anh **`Evan You`**](https://evanyou.me/), dÃ¹ hiá»‡n táº¡i, cÃ¡c `ESM` Ä‘Ã£ Ä‘Æ°á»£c há»— trá»£ á»Ÿ táº¥t cáº£ cÃ¡c trÃ¬nh duyá»‡t chÃ­nh, song, viá»‡c gom má»™t `bundle.js` kÃ¨m cÃ¡c kÄ© thuáº­t `performance optimization`: *`tree-shaking`, `lazy-loading`, `chunk splitting`,...* váº«n mang láº¡i hiá»‡u suáº¥t tá»•ng thá»ƒ tá»‘t hÆ¡n lÃ  hÃ¬nh thá»©c `unbundled` - cÃ¡i mÃ  sáº½ táº¡o ra nhiá»u `extra HTTP requests` hÆ¡n.

*Okayy, cÃ¢u tiáº¿p theo =)))*

**(?) Báº£o `esbuild` nhanh, tháº¿ táº¡i sao sang `Production build`, `Vite` cÃ²n dÃ¹ng thÃªm `Rollup` chi váº­y?**

Váº«n theo lá»i [anh **`Evan You`**](https://evanyou.me/) =)) CÃ³ má»™t sá»‘ tÃ¡c vá»¥ khÃ³ thá»±c hiá»‡n hÆ¡n khi dÃ¹ng `esbuild` nhÆ° *`CSS code-splitting`, tá»± Ä‘á»™ng tá»‘i Æ°u cÃ¡c Ä‘oáº¡n mÃ£ khÃ´ng Ä‘á»“ng bá»™,...* nÃªn dÃ¹ thá»i gian `prod build` cháº­m hÆ¡n chÃºt, nhÆ°ng sáº½ cÃ³ `performance` tá»‘t hÆ¡n cho `end user`. Nom nhÆ° lÃ  má»™t sá»± Ä‘Ã¡nh Ä‘á»•i  ğŸ˜¹ğŸ˜¹

*Chi tiáº¿t vá» bÃ i phá»ng váº¥n nÃ y, báº¡n cÃ³ thá»ƒ Ä‘á»c thÃªm [táº¡i Ä‘Ã¢y](https://portal.gitnation.org/contents/vite-rethinking-frontend-tooling) nhÃ©!*

*Giá» thÃ¬ Ä‘áº·t `Vite` cáº¡nh `Webpack` - má»™t "tÆ°á»£ng Ä‘Ã i" `module bundler` Ä‘Æ°á»£c tin dÃ¹ng vÃ  sá»­ dá»¥ng rá»™ng rÃ£i - Ä‘á»ƒ so sÃ¡nh chÃºt nÃ o!*
# â–   Vite vs. Webpack

### â–   Operating mechanism

Ngay chÃ­nh trÃªn *[Trang chá»§](https://webpack.js.org/)*, `Webpack` Ä‘áº·t nháº¹ má»™t `slogan`:

> Bundle your scripts; Bundle your images; Bundle your styles; Bundle your assets.

*Quáº£ lÃ  má»™t ngÆ°á»i anh `bundle` "cáº£ tháº¿ giá»›i" (J4F) =))*

Theo `workflow`, trÆ°á»›c má»™t `browser request`, `Webpack` sáº½ thu tháº­p, xá»­ lÃ½, gom gÃ³p, Ä‘Ã³ng gÃ³i cÃ¡c `modules` láº¡i thÃ nh `01 bundle.js` Ä‘á»ƒ sá»­ dá»¥ng nhÆ° hÃ¬nh mÃ´ táº£ dÆ°á»›i:

![](https://miro.medium.com/max/1400/1*n9Svn3juqhsoQ-B0B9vpvw.png)

So sÃ¡nh vá»›i `Vite` á»Ÿ phÃ­a trÃªn má»™t chÃºt:

| Scope | Webpack | Vite |
| -------- | -------- | -------- |
| **Supported modules**     | `ES Modules`, `CommonJS`, `AMD Modules`     | `ES Modules`     |
| **Dev Server** | `Bundled modules` served via `webpack-dev-server` using `Express.js`| `ES-Modules` served via `Vite` using `Koa` - a lightweight node web server |
| **Production build** | `Webpack` | `Rollup` |

<br/>

*Váº­y cÃ²n vá» `tá»‘c Ä‘á»™` thÃ¬ sao?*

### â–   Speed

Trong tráº­n "battle" nÃ y, chÃºng ta sáº½ so sÃ¡nh má»™t á»©ng dá»¥ng `ReactJS` láº§n lÆ°á»£t sá»­ dá»¥ng `Vite` vÃ  `Webpack` nhÃ©!

*FYI, náº¿u Ä‘Ã£ tiáº¿p cáº­n vá»›i `ReactJS`, háº³n báº¡n Ä‘Ã£ tá»«ng dÃ¹ng qua `Create-React-App` *(CRA)* Ä‘á»ƒ khá»Ÿi táº¡o dá»± Ã¡n rá»“i nhá»‰? `CRA` nhÃ  mÃ¬nh sá»­ dá»¥ng `Webpack` nhÆ° `01 build tool` nha. Báº¡n cÃ³ thá»ƒ ghÃ© qua bÃ i viáº¿t ***[Äiá»u React luÃ´n giá»¯ kÃ­n trong tim](https://haodev.wordpress.com/2021/01/22/dieu-react-luon-giu-kin-trong-tim/)*** náº¿u muá»‘n tÃ¬m hiá»ƒu thÃªm vá» nÃ³.*

Xem káº¿t quáº£ vá» tá»‘c Ä‘á»™ cho má»™t `sample app` vá»›i `02 routes`, `06 components`trÃªn cÃ¹ng má»™t mÃ¡y tÃ­nh:

| Scope | React with Webpack in CRA | React with Vite |
| -------- | -------- | -------- |
| **Server start duration**     | 12s     | 298ms     |
| **Build duration**     | 16.66s     | 9.11s     |


Tháº­t ra,  vá»›i vÃ­ dá»¥ bÃ© con phÃ­a trÃªn, tá»« `ms` tá»›i vÃ i `s`, chÃºng ta váº«n cÃ³ thá»ƒ dá»… dÃ ng hÃ i lÃ²ng vÃ  cháº¥p nháº­n Ä‘Æ°á»£c. Song, náº¿u tÃ­nh tá»‰ lá»‡ %, giáº£ sá»­ quÃ¡ trÃ¬nh `build` á»©ng dá»¥ng hiá»‡n táº¡i cá»§a báº¡n Ä‘ang lÃ  `30'`, giá» cÃ³ thÃªm `Vite`, Ä‘á»i bá»—ng vui vá»›i thá»i gian chá» cÃ²n láº¡i chá»‰ cÃ²n khoáº£ng `~12-15'`. Nghe váº» áº¥n tÆ°á»£ng quÃ¡ nhá»‰!

*Báº¡n cÃ³ thá»ƒ xem thÃªm má»™t vÃ­ dá»¥ khÃ¡c vá» *`Creation time`, `Project size`, `Build time`, `Build size`* cá»§a má»™t anh áº¤n táº¡i [video nÃ y](https://www.youtube.com/watch?v=nKfzcLPXl0s) ğŸ˜¸ğŸ˜¸*.

<br />


#### ğŸ¾   Äá»«ng hiá»ƒu nháº§m nhÃ© !!!
MÃ¬nh khÃ´ng cá»‘ "dÃ¬m" `Webpack` vÃ  "ca tá»¥ng" `Vite` Ä‘Ã¢u ğŸ˜ºğŸ˜º

Cháº³ng pháº£i tá»± nhiÃªn mÃ  `Webpack`Ä‘Æ°á»£c tin dÃ¹ng vÃ  sá»­ dá»¥ng rá»™ng rÃ£i nhÆ° váº­y Ä‘Ãºng khÃ´ng nÃ o ^^ Báº£n thÃ¢n nÃ³ Ä‘Ã£ vÃ  Ä‘ang lÃ m ráº¥t tá»‘t rá»“i. Báº¯t Ä‘áº§u nhÆ° má»™t `JavaScript-focused bundler`, `Webpack` cÃ³ cÃ¡c `default configurations` vÃ´ cÃ¹ng Ä‘Æ¡n giáº£n, cho phÃ©p chÃºng ta `customize` ráº¥t-ráº¥t-Ä‘a-dáº¡ng.

ChÃ­nh vÃ¬ cÃ³ tÃ­nh `configurable` linh hoáº¡t nhÆ° váº­y, Ä‘a pháº§n `90%` cÃ¡c cÃ´ng cá»¥ sá»­ dá»¥ng `Webpack` Ä‘á»u pháº£i `config` cÃ¡c `conventions` thÆ°á»ng hay Ä‘Æ°á»£c sá»­ dá»¥ng trong má»™t há»‡ sinh thÃ¡i nÃ o Ä‘Ã³ *(giáº£ sá»­ nhÆ° viá»‡c `compile ES6, JSX` trong `React` cháº³ng háº¡n, chÃºng ta cÃ³ `Create React App`)*.

Má»¥c-Ä‘Ã­ch-chÃ­nh [anh **`Evan You`**](https://evanyou.me/) táº¡o ra `Vite` lÃ  xÃ¢y dá»±ng nhá»¯ng `default configurations` tÆ°Æ¡ng á»©ng vá»›i cÃ¡c `libraries`, giÃºp chÃºng ta táº­p trung vÃ o nghiá»‡p vá»¥ quan trá»ng hÆ¡n. BÃªn cáº¡nh Ä‘Ã³, vÃ¬ khÃ´ng pháº£i `default configurations`nÃ o cÅ©ng phÃ¹ há»£p nÃªn `Vite` cÅ©ng cho phÃ©p chÃºng ta `customize` chÃºt thÃ´ng qua cÃ¡c `plugins`. 

Tháº¿ nhÆ°ng `Vite` khÃ´ng-cÃ³-má»¥c-tiÃªu-thay-tháº¿-hoÃ n-toÃ n `Webpack` nha. Viá»‡c lá»±a chá»n `Vite`, `Webpack`, `Parcel` hay báº¥t kÃ¬ má»™t `build tools` nÃ o cho dá»± Ã¡n cÅ©ng tÆ°Æ¡ng tá»± nhÆ° viá»‡c lá»±a chá»n cÃ´ng nghá»‡ Ä‘á»ƒ theo Ä‘uá»•i váº­y. **KhÃ´ng cÃ³ cÃ´ng nghá»‡ nÃ o lÃ  tá»‘t nháº¥t, quan trá»ng hÆ¡n cáº£ váº«n lÃ  sá»± phÃ¹ há»£p.**

![](https://cdn130.picsart.com/308580741189211.gif?to=crop&r=256)

*Quay láº¡i bÃ i viáº¿t cá»§a chÃºng ta, vá»›i Æ°u Ä‘iá»ƒm vá» tá»‘c Ä‘á»™ cá»§a `Vite` nhÆ° váº­y, cÃ³ anh chá»‹ em nÃ o Ä‘Ã£ nghÄ© tá»›i viá»‡c Ä‘á» xuáº¥t Ã½ kiáº¿n `migrate` `build tool` cá»§a dá»± Ã¡n hiá»‡n táº¡i sang `Vite` trong buá»•i `Daily` sáº¯p tá»›i cá»§a `team` chÆ°aaa áº¡?*

*TrÆ°á»›c khi Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh thÃ¬ chÃºng ta cÃ¹ng xem viá»‡c chuyá»ƒn Ä‘á»•i nhÆ° váº­y cÃ³ tá»‘n nhiá»u cÃ´ng sá»©c khÃ´ng nhÃ©! MÃ¬nh sáº½ láº¥y vÃ­ dá»¥ vá»›i `ReactJS`.*

# â–  React with Vite

### â–   Init a React app with Vite

Äá»ƒ khá»Ÿi táº¡o má»™t dá»± Ã¡n `ReactJS` sá»­ dá»¥ng `Vite` nhÆ° má»™t `build tool`, chÃºng ta cháº¡y dÃ²ng lá»‡nh:

```js:Terminal
$ npm init vite PROJECT_NAME --template react
```

Xem qua chÃºt `folder structure` thÃ¬ cÃ³ vÃ i Ä‘iá»ƒm khÃ¡c biá»‡t so vá»›i `CRA`:


| Scope | CRA boilerplate | Vite boilerplate |
| -------- | -------- | -------- |
| **Entry point**      | `index.js`     | `index.html`     |
| **Dependencies**    | `react-scripts`     |   `@vitejs/plugin-react`   |
|  **Bundler config**     | `Webpack`     |   `Vite`   |

<br />

*Tá»« sá»± khÃ¡c biá»‡t nÃ y, chÃºng ta cÃ³ cÃ¡c bÆ°á»›c Ä‘á»ƒ `migrate` tá»« má»™t dá»± Ã¡n `CRA` Ä‘ang phÃ¡t triá»ƒn qua dÃ¹ng `Vite` nhÆ°  sau:*

### â–   Migrate CRA to Vite

Äáº§u tiÃªn, bá»/thÃªm má»™t sá»‘ `dependencies`:

```js:Terminal
$ npm remove react-scripts
$ npm install --save-dev @vitejs/plugin-react vite 
// Vite khÃ´ng dÃ¹ng react-scripts mÃ  dÃ¹ng chÃ­nh plugin cá»§a nÃ³
```

`Config` chÃºt:

```js:vite.config.js
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";

export default ({ mode }) => defineConfig({
    plugins: [react()],
    define: {
        "process.env.NODE_ENV": `"${mode}"`,
    }
});
```

Di chuyá»ƒn `index.html` ra ngoÃ i:

```html:root/public/index.html->root/index.html
...
<link rel="icon" href="/favicon.ico" />             <!-- Bá» "%PUBLIC_URL%" --> 
...
<div id="root"></div>
<script type="module" src="/src/index.js"></script> <!-- ÄÃ­nh thÃªm script --> 
```

Cáº­p láº¡i chÃºt `script` vá»›i `vite`:

```js:package.json
{
    ...
    "scripts": {
        "start": "vite",
        "build": "vite build"
    },
}
```


NgoÃ i ra, vá»›i cÃ¡c `.env` *(náº¿u cÃ³)*:
```js:.env
// Change
REACT_APP_ENV = https://haodev.wordpress.com
// To
VITE_ENV = https://haodev.wordpress.com
```

Cuá»‘i cÃ¹ng thÃ¬:

```:Terminal
$ npm start 
```

vÃ  tráº£i nghiá»‡m thÃ´iii!  ğŸ˜¸ğŸ˜¸

# â–  Sumup

NhÆ° váº­y lÃ  chÃºng ta Ä‘Ã£ cÃ¹ng nhau *CÃ³ cÃ¡i nhÃ¬n tá»•ng quan vá» `Module Bundler`; TÃ¬m hiá»ƒu vÃ  khÃ¡m phÃ¡ cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a `Vite`; So sÃ¡nh chÃºt vá»›i ngÆ°á»i anh `Webpack` vÃ  TÃ­ch há»£p `Vite` vÃ o á»©ng dá»¥ng `ReactJS`* rá»“i nÃ¨!!!

Máº·c dÃ¹ `Webpack` váº«n lÃ  má»™t `build tool` Ä‘Æ°á»£c `Next.js`, `Create React App`,... Æ°a chuá»™ng nhÆ°ng chÃºng ta cÅ©ng cháº³ng thá»ƒ nÃ o phá»§ nháº­n `Vite` - má»™t á»©ng cá»­ viÃªn sÃ¡ng giÃ¡ trong tÆ°Æ¡ng lai - vá»›i nhá»¯ng Æ°u Ä‘iá»ƒm vÆ°á»£t trá»™i vá» tá»‘c Ä‘á»™.

*Báº¡n nghÄ© sao vá» `build tool` nÃ y, hÃ£y chia sáº» Ã½ kiáº¿n xuá»‘ng phÃ­a dÆ°á»›i `comments` nhÃ©!*

![](https://cdn140.picsart.com/289323672011202.png)

Hy vá»ng ráº±ng bÃ i viáº¿t nÃ y cÃ³ thá»ƒ giÃºp Ã­ch Ä‘Æ°á»£c cÃ¡c báº¡n. Cáº£m Æ¡n cÃ¡c báº¡n Ä‘Ã£ Ä‘á»c bÃ i chia sáº», mÃ¬nh ráº¥t vui náº¿u Ä‘Æ°á»£c **`á»§ng há»™ 01 upvote`** Ä‘á»ƒ cÃ³ thÃªm Ä‘á»™ng lá»±c cho nhá»¯ng bÃ i viáº¿t sáº¯p tá»›i áº¡ <3

<br />

____

#### ğŸ¾  DÃ nh cho cÃ¡c ace quan tÃ¢m tá»›i `Vietnam Mobile Day 2022`

*FYI, `Vietnam Mobile Day` lÃ  sá»± kiá»‡n thÆ°á»ng niÃªn do `Top Dev` tá»• chá»©c. Hai nÄƒm sau `COVID-19`, `Vietnam Mobile Day 2022` vá»›i chá»§ Ä‘á» `WE CONNECT` Ä‘Ã£ quay trá»Ÿ láº¡i hÃ¬nh thá»©c `offline` táº¡i hai thÃ nh phá»‘ lá»›n:*

- ***HÃ  Ná»™i: `10/06/2022` | CTM Palace***
- ***Há»“ ChÃ­ Minh: `03/06/2022` | Melisa Center***

*ThÃ´ng tin chi tiáº¿t vá» sá»± kiá»‡n, mÃ¬nh Ä‘á»ƒ [táº¡i Ä‘Ã¢y](https://mobileday.vn/) nhÃ©!*

*MÃ¬nh cÅ©ng cÃ³ má»™t chiáº¿c Early bird rÃ¹i ^^ CÃ¡c anh chá»‹ em Ä‘Äƒng kÃ½ tham gia sá»± kiá»‡n thÃ¬ cÃ³ thá»ƒ sá»­ dá»¥ng thÃªm 01 Voucher:*
- **`GIAM50K@VMD2022`** Ä‘á»ƒ Ä‘Æ°á»£c giáº£m **`-50k`** *(Sá»‘ lÆ°á»£ng: 05)*
- **`HAODEV@VMD2022`** Ä‘á»ƒ Ä‘Æ°á»£c giáº£m **`-30k`** *(Cáº­p nháº­t: MÃ£ nÃ y Ä‘Ã£ deactivated)*

*khi mua vÃ© nhaaa ^^*


*LÆ°u Ã½ chÃºt lÃ  cÃ¡c mÃ£ khÃ´ng Ã¡p dá»¥ng Ä‘á»“ng thá»i vÃ  sá»‘ lÆ°á»£ng giá»›i háº¡n áº¡ ^^*

____


![](https://images.viblo.asia/bcac0ae4-37b9-4f82-a75a-8dc9bbdd51ba.gif)

*ChÃºc cÃ¡c báº¡n tuáº§n lÃ m viá»‡c hiá»‡u quáº£! Tiá»‡n ghÃ© qua [nhÃ  mÃ¬nh](https://haodev.wordpress.com/) chÆ¡i má»™t chÃºt rá»“i vá»!*


# â–  Credits

- **Resources: [Vite Document](https://github.com/vitejs/vite), [The Open Source Friday Show](https://www.youtube.com/watch?v=UJypSr8IhKY) , [GitNation](https://portal.gitnation.org/contents/vite-rethinking-frontend-tooling), [Nilanth from Dev.to](https://dev.to/nilanth/use-vite-for-react-apps-instead-of-cra-3pkg), [Keefdrive from Dev.to](https://dev.to/keefdrive/create-react-app-vs-vite-2amn), [Bits and Pieces](https://blog.bitsrc.io/vite-is-better-than-webpack-d5dd59610d56), [Harlanzw](https://harlanzw.com/blog/how-the-heck-does-vite-work/#understanding-webpack), [Ta Duy Anh's post](https://viblo.asia/p/giai-thich-ve-javascript-thoi-hien-dai-cho-khung-long-Eb85oBM2l2G), [Radixweb](https://radixweb.com/blog/webpack-vs-vitejs-comparison), [Freecodecamp](https://www.freecodecamp.org/news/lets-learn-how-module-bundlers-work-and-then-write-one-ourselves-b2e3fe6c88ae/).**
- **Thumbnail: [Asset from May Fest 2022](https://mayfest.viblo.asia/), [Design via Canva](https://www.canva.com).**
- **Policies:**
    - [**This original article from My Make It Awesome blog**](https://haodev.wordpress.com/2022/05/23/frontend-build-cham-qua-thi-chay-ve-khoc-voi-vite%ef%bf%bc/).
    - **Use my contents for sharing purpose, please attached resource linked to [my blog](https://haodev.wordpress.com/2022/05/23/frontend-build-cham-qua-thi-chay-ve-khoc-voi-vite%ef%bf%bc/).**
    - **Use my contents for trading purpose, please [contact me](https://haodev.wordpress.com).**
    - **Support: [Buy me a pizza](https://www.buymeacoffee.com/haolt).**
- **Copyright:** **The posts in a spirit of sharing knowledge. If there is anything with regard to copyright of your contents, please [contact me](https://haodev.wordpress.com).**

<br/>


***Happy coding!***