# Giới thiệu
Trong thời điểm bài viết được viết thì cụm từ này đang là một cụm từ vô cùng hot trong cộng đồng crypto currencies nói riêng và blockchain nói chung. Yield farming thực sự nổi lên khi cộng đồng chứng kiến các nhà đầu tư kiếm lợi nhuận hằng năm (Annual Percentage Yields - APY) vượt quá 100% trên nền tảng Compound.

Lợi nhuận kiếm được thông qua **Yield farming** được đến từ nhiều yếu tố và cũng đi kèm nhiều rủi ro

![](https://images.viblo.asia/c76a0340-8fec-4f3a-a871-363d883d610b.png)


# Giới thiệu về Decentralized Finance (Defi)
Điểm đầu tiên khi tìm hiểu về Yield Farming sẽ cần một chút tìm hiểu về defi - một từ khóa cũng vô cùng hot.
Defi trong thời điểm bài viết này chỉ là bao gồm những sản phẩm tài chính hoạt động trên Ethereum. Những sản phẩm này được triền khai dưới dạng đoạn code (smart contract) và đoạn mã này được triển khai trên nền tảng Ethereum.

Những sản phẩm nổi tiếng của Defi có thể kể đến như các sản phẩm để swap giữa các token như Uniswap, hay một sản phẩm của Việt Nam là Kyber network.

![](https://images.viblo.asia/606e66e6-e10d-4d95-921c-fe079864affb.jpg)


Ngoài những nền tảng kể trên thì cũng có những service khác nổi lên trên làn sóng Defi mới đây như:
 
 - Nền tảng lending and borrowing cryptocurrencies như Compound, Aave (Được sử dụng rộng rãi tại UK)
     ![](https://images.viblo.asia/af7c33d1-46f5-4384-ad8c-00dd225ae652.jpg)

 - Các đồng stablecoin tương ứng với các đồng USD, Euro...
     
     ![](https://images.viblo.asia/c83e8fed-3456-4dc9-bda8-b56ed5478439.png)
     
 - Xổ số không ai lỗ trên ETH (no-loss lottery) PoolTogether
 ![](https://images.viblo.asia/7c2d115a-4150-4bb1-a749-bb8c0196241f.jpeg)
- ....

Có thể thấy các sản phẩm Defi hiện tại không chỉ đơn thuần là các swap token mà đã mở rộng hơn rất nhiều và sẽ còn phát triển hơn trong thời gian tới
# Yield Farming

## Yield farming là gì ???
Yield farming là một hình thức thu lợi từ việc sử dụng các ứng dụng defi, các phần thưởng (yield) được mang đến thường từ việc cung cấp thanh khoản cho các nền tảng. Những phần thưởng này thường được đến từ việc chi phí trao đổi trên nền tảng (uniswap, kyber network), lãi suất (lending) và cả từ các token được trả thưởng (đôi khi đây chính là thứ chiếm phần lớn lợi nhuận).

## Các phương pháp kiếm lợi nhuận từ Farming
Trong nền tảng Defi sẽ có rất nhiều cách thức để farming, trong phần này mình sẽ giới thiệu các phương pháp từ đơn giản đến phức tạp.

### Uniswap
![](https://images.viblo.asia/a61cc086-e12d-47cc-9f92-32fb91467a0f.jpeg)

Đầu tiên và cũng đơn giản nhất là cung cấp thanh khoản cho các nền tảng Automated Market Maker (AMM) - Đây là nền tảng cho phép người dùng có thể chuyển đổi giữa các Cryptocurrencies. Mỗi giao dịch trên Uniswap sẽ mất 0.3 % phí , phí này sẽ được chuyển vào cho các Liquidity providers - Do đó để có thể kiếm được lợi nhuận từ nền tảng này, chúng ta phải trở thành các **Liquidity providers**.

Vậy **Liquidity providers** là gì ?
Đây là những người cung cấp tính thanh khoản cho các Pool lớn. Trong trường hợp với **Uniswap**, với cặp trading **ETH-DAI** thì những người cung cấp **ETH** hoặc **Dai** sẽ là những **Liquidity providers**, những người này sẽ chia nhau khoản phí khi các cặp trade giữa **ETH-DAI** được thực hiện.

Đây là cách thức đơn giản nhất và ít rủi ro nhất trong **Yield Farming**, phù hợp với những người muốn giữ Token dài hạn.

### Đòn bẩy (Leverage)

Những farmer có nhiều cách thức để tăng số lượng yield kiếm được. Bằng cách tìm được sự chênh lệch giữa **lending** và **borrowing** ở 2 nền tảng mà họ có thể vừa thu được 1 lượng token trả thưởng và lượng lãi suất từ việc lending. Một ví dụ cơ bản nhất với 2 nền tảng **lending & borrowing** là **Compound** và **Balancer**. Một số người đã nhận ra lợi nhuận được trả khi lending trên **Balancer** cao hơn so với số lãi phải trả khi **borrowing** trên **Compound** -> Nhờ sự chênh lệch này mà họ đã vừa lấy được lượng lãi xuất chênh lệch và token trả thưởng **COMP** (token được sinh ra khi lending hoặc borrowing trên **Compound**)

![](https://images.viblo.asia/4784a96d-c27e-4719-b1d8-91a1c8c7d4e1.jpeg)
![](https://images.viblo.asia/170d73fa-5a85-4594-8ae3-7e5d9828359a.png)

Việc sử dụng đòn bẩy càng được mở rộng trên nền tảng Compound để có thể thu lại token COMP do việc lending và borrowing trên Compound đều được trả thưởng COMP token. 

**Chú ý:** COMP token đã tăng giá trị từ 60$ lên 330$ chỉ trong 1 tuần 

Việc sử dụng đòn bẩy trên Compound có thể giải thích đơn giản bằng các bước sau :
1. Cung cấp (lending) USDC
2. Vay USDT từ lượng USDC vừa cung cấp
3. Swap từ USDT sang USDC
4. Tiếp tục lending USDC
5. Vay tiếp USDT từ lượng USDC vừa lending

Cứ như vậy, người dùng có thể lặp lại rất nhiều lần các bước trên. Số lượng token COMP thu được có thể gấp 30 lần so với việc chỉ đơn giản lending ở bước 1.

Tuy nhiên phương pháp này đã bị **Compound** ngăn chặn (sad)


### Stacking Yields

Phần lớn những nền tảng Defi hiện tại đều cung cấp các token trả thưởng, do đó đã có một chiến thuật được đề ra đó chính là tạo ra các lợi nhuận từ việc staking những token mới được farm ở các nền tảng khác nhau. Phương pháp này có thể giải thích đơn giản là việc có thể tạo ra các loại token khác nhau từ một nguồn cung cấp thanh khoản duy nhất nhờ các nền tảng:
* Curve
* Balancer
* Ren
* Synthetix

1. Đầu tiên với nền tảng Curve, đây là nơi cho phép người dùng có thể trao đổi các loại BTC trên ETH (sBTC, wBTC, renBTC). Bằng cách cung cấp thanh khoản cho nền tảng này, người dùng sẽ được thu về token mới sinh ra là **CRV** và **pool fees**
![](https://images.viblo.asia/1c9f24c0-7aa5-43d8-a09d-95cf58812ea0.png)


2. Staking Curve LP Tokens: Sau khi có được **CRV** token, lượng token này lại có thể tiếp tục **staking** trên nền tảng **Synthetix** . Nhờ việc staking này mà chúng ta lại thu được về các token mới là **REN** và **SNX**

![](https://images.viblo.asia/6b403679-c3c4-4e12-be74-3a3c270413fc.jpg)



3. Balancer: Bược cuối cùng là chúng ta có thể dễ dàng thu được token **BAL** từ việc staking lượng **REN** và **SNX** thu được từ bước trên.

Sau một chuỗi trên chúng ta đã thu được một lượng token đáng kể trong khi chỉ cần cung cấp 1 lượng thanh khoản nhất định là các BTC trên ETH. Tuy nhiên điều này sẽ có rủi ro khi người dùng sẽ phải cân bằng giữa chi phí và độ biến động giá giữa lượng thanh khoản cung cấp ban đầu (BTC trên ETH) và giá trị của các token mới sinh ra 

![](https://images.viblo.asia/513c8c71-4e0e-4ab9-a059-073c42aefa47.png)

# Những điều cân nhắc trước khi farming
## Nhầm lẫn về cách tính APY

Lãi suất hằng năm (APY) có thể gây nhầm lẫn cho người dùng. Nhiều nền tảng quảng cáo rằng việc cung cấp thanh khoản cho họ có thể làm cho người dùng thu được lợi nhuận vượt quá 100% 1 năm. Lợi nhuận này có thể được tính bằng cả lãi và giá trị của token mới được trả thưởng ( Với nền token COMP thì giá trị tăng một cách nhanh chóng từ 30$ lên 330$ nên lợi nhuận 1 năm vượt quá 100% là điều hiển nhiên) tuy nhiên với những token khác thì đôi khi khá khó có thể định lượng một cách ổn định.

## Biến động giá

Ngoại trừ việc sử dụng những đồng stablecoin để cung cấp thanh khoản, nhiều người vẫn đang sử dụng các loại tiền mã hóa khác nhau, và đặc điểm chung của chúng là rất dễ biến động giá. Có thể một nền tảng cung cấp APY cao nhưng giá trị của tài sản staking bị mất giá nhanh có thể làm cho chiến thuật farming không đem lại lợi nhuận

## Rủi ro

Rủi ro từ việc farming có thể đến từ những vấn đề liên quan đến kĩ thuật như :
*  Lỗi trên smart contract
*  Lỗi trên Oracle
*  Tỷ giá thay đổi
*  Blackswan

### Smart contract risk
Như đã đề cập thì các sản phẩm Defi có ưu điểm là không cần đến bên thứ 3 can thiệp, mọi thứ được thực thi bằng code (Được thực thi trên smart contract) do đó nó sẽ tiềm ẩn các lỗi khi các đoạn code smart contract không được audit cẩn thận. Có thể kể đến như Daos trên ETH hay một sữ cố gần đây khiến cho token YAM giảm bất ngờ 99% do trong code của smart contract quên một phép chia khiến lượng token sinh ra lớn hơn rất nhiều so với dư định 
![](https://images.viblo.asia/af5d3744-9246-4ec2-8751-5d2777145c73.png)

Để ngăn chặn hiểm họa này thì chúng ta cần phải audit code smart contract trước khi chạy chúng trên mainnet, hiện tại có một số tổ chức audit uy tín có thể kể đế như :
* Trail of Bits
* Zeppelin
* Quantstamp
* Consensys

### Lỗi trên Oracle

Oracle chính là điểm kết nối các smart contract với các thông tin của thể giới thực, do đó các hacker có thể lợi dụng độ trễ của các Oracle về giá của các loại cryptocurrencies để hưởng lợi.

Để ngăn chặn vấn đề này thì người ta đang sử dụng Oracle của **Chainlink** cung cấp, đây là một oracle tương đối ổn định và được tổng hợp giá token từ nhiều nguồn lớn khác nhau.

![](https://images.viblo.asia/e98d8829-51c9-48bd-b198-76fb2d3bceaf.jpeg)


### Tỉ giá thay đổi

Mặc dù việc staking trên các nền tảng Defi rất linh hoạt trong việc deposit do tài khoản không hề bị locking nhưng với sự khốc liệt về tỉ giá với thị trường coin (có thể xuống vài chục % trong 1 2 nến) thì việc rút khỏi các nền tảng staking cũng sẽ gây một chút khó khăn trong trường hợp các tải sản cần được bán nhanh chóng

![](https://images.viblo.asia/e4489f03-3c5e-464f-9e38-eac2bb217efb.png)


### Black swan
Đây là những rủi ro mà không chỉ Defi mà bất kì nền kinh tế nào cũng sẽ gặp phải, đây là những rủi ro mà không thể lường trước được. Ví dụ như đại dịch corona cũng đã ảnh hưởng không hề nhỏ đến thị trường crypto.


# Kết luận
Trên đây là những phương pháp mình đã đưa ra để có thể tăng lợi nhuận từ việc Yield Farming và những rủi ro mà từng nền tảng mang lại. Có thể những bài viết tiếp theo mình sẽ hướng dẫn xây dựng cơ bản một sản phẩm Defi.

# Nguồn
[A Guide to Yield Farming on Ethereum](https://ethereumprice.org/guides/article/yield-farming/)

[What is DeFi and why is it the hottest ticket in cryptocurrencies?](https://theconversation.com/what-is-defi-and-why-is-it-the-hottest-ticket-in-cryptocurrencies-144883)