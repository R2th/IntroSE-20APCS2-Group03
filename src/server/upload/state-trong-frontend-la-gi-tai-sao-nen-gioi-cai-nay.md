## Táº¡i sao nÃªn Ä‘á»c bÃ i nÃ y

- Tráº£ lá»i cho cÃ¢u há»i, em há»c xong HTML, CSS vÃ  JS rá»“i thÃ¬ lÃ m gÃ¬ Ä‘á»ƒ pro ná»¯a anh?

> ğŸ£ Bá»¯a Ä‘á»c Ä‘Ã¢u Ä‘Ã³ cÅ©ng tháº¥y má»™t báº¡n viáº¿t format nÃ y, tháº¥y hay quÃ¡ nÃªn nay mÃ¬nh há»c theo, hy vá»ng má»i ngÆ°á»i thÃ­ch nÃ³


ğŸ£: Em nghe máº¥y ngÆ°á»i hay nÃ³i vá» State, State Mangement rá»“i dÃ¹ng Redux cÃ¡c thá»©, váº­y State vá»›i State management lÃ  gÃ¬ váº­y anh?

ğŸ”: Ã€, trong cÃ¡i app cá»§a em thÃ¬ sáº½ cÃ³ tráº¡ng thÃ¡i (state) Ä‘Ãºng khÃ´ng, vÃ­ dá»¥ nhÆ° nÃºt Like/Reaction trÃªn facebook sáº½ cÃ³ nhiá»u tráº¡ng thÃ¡i (Like, Tim, Haha, khÃ³c, pháº«n ná»™,...). ThÃ¬ viá»‡c em biáº¿t cÃ¡i nÃºt Ä‘ang á»Ÿ tráº¡ng thÃ¡i nÃ o nghÄ©a lÃ  em biáº¿t state cá»§a nÃ³

![Untitled.png](https://images.viblo.asia/565ff3c9-30d6-431c-830b-11666e776aae.png)

CÃ²n state management lÃ  gÃ¬ háº£? ThÃ¬ má»™t app cÃ³ má»™t Ä‘á»‘ng state rá»‘i ráº¯m, rÆ°á»m rÃ  nhÆ° váº­y, mÃ¬nh lÃ  tháº±ng frontend dev thÃ¬ cáº§n pháº£i quáº£n lÃ½ (manage) Ä‘á»‘ng tráº¡ng thÃ¡i (state) Ä‘Ã³ nÃªn gá»i lÃ  State management thÃ´i!

ğŸ£: Ra váº­y, mÃ  em tháº¥y lÃºc há»c jQuery rá»“i lÃ m Landing page thÃ¬ cÅ©ng Ä‘Ã¢u cáº§n quan tÃ¢m nÃ³ lÃ  gÃ¬ Ä‘Ã¢u ta?

ğŸ”: KhÃ¡ lÃ  Ä‘Ãºng, vÃ¬ cÃ¡c app dÃ¹ng jQuery hay lÃ  Landing page thÃ¬ háº¥u háº¿t nÃ³ náº±m á»Ÿ dáº¡ng tÄ©nh, hoáº·c ráº¥t Ã­t tÆ°Æ¡ng tÃ¡c, mÃ  Ã­t tÆ°Æ¡ng tÃ¡c thÃ¬ Ã­t cÃ³ state, nÃªn cÆ¡ báº£n e khÃ´ng cáº§n quan tÃ¢m tá»›i nÃ³ láº¯m. State thÃ¬ váº«n cÃ³ nhÆ°ng nÃ³ khÃ´ng tá»›i má»©c phá»©c táº¡p Ä‘á»ƒ mÃ¬nh cáº§n quan tÃ¢m

Sau nÃ y khi mÃ  mÃ¡y tÃ­nh cá»§a ngÆ°á»i dÃ¹ng cÃ ng ngÃ y cÃ ng máº¡nh lÃªn, thÃ¬ ngÆ°á»i ta muá»‘n Ä‘Æ°a nhiá»u viá»‡c tÃ­nh toÃ¡n xuá»‘ng browsers, do Ä‘Ã³ há» build ra nhá»¯ng framework Ä‘á»ƒ lÃ m web app nhÆ° lÃ  Angular, React, Vuejs,... nÃ¨.

![Untitled 1.png](https://images.viblo.asia/b48c0b06-5229-403e-a5dc-45f6176dd5a0.png)

Há»“i trÆ°á»›c khi state chá»§ yáº¿u lÆ°u á»Ÿ database, sau Ä‘Ã³ ngÆ°á»i ta render trá»±c tiáº¿p nÃ³ vÃ o HTML thÃ¬ háº§u háº¿t máº¥y ngÆ°á»i back-end lÃ m cÃ¡i nÃ y nÃªn tá»¥i Frontend chá»‰ cÃ³ â€œcáº¯t HTML/CSSâ€ thÃ´i. BÃ¢y giá» thÃ¬ state Ä‘Æ°á»£c Ä‘áº©y xuá»‘ng thÃ´ng qua API, vÃ  tá»¥i Frontend pháº£i khá»• hÆ¡n lÃ  cáº§m API Ä‘Ã³, call Ä‘á»ƒ láº¥y data vá», xá»­ lÃ½ xong rá»“i má»›i render ra. Tá»« Ä‘Ã³ Ä‘áº» ra má»™t Ä‘á»‘ng state má»›i phÃ¡t sinh.

ğŸ£: Tháº¿ tháº±ng Redux lÃ  Ä‘á»ƒ quáº£n lÃ½ state á»Ÿ React chá»© gÃ¬, em há»c xong nÃ³ lÃ¢u rá»“i!

ğŸ”: Yup, Redux lÃ  má»™t thÆ° viá»‡n Ä‘á»ƒ quáº£n lÃ½ state, nhÆ°ng mÃ  nÃ³ cÃ³ thá»ƒ dÃ¹ng á»Ÿ háº§u háº¿t cÃ¡c framework khÃ¡c nhÆ° Angular, Vuejs, ... hay cáº£ á»Ÿ backend luÃ´n, cÃ³ Ä‘iá»u bá»™ Ä‘á»™i React + Redux lÃ  káº¿t há»£p ok nháº¥t nÃªn em tháº¥y ai báº£o há»c xong React cÅ©ng há»c Redux thÃ´i.

ğŸ£: MÃ  nÃ³ cÃ³ liÃªn quan gÃ¬ tá»›i redux-thunk hay redux-sagas khÃ´ng anh?

ğŸ”: Hai tháº±ng Ä‘Ã³ Ä‘á»ƒ thÃªm viá»‡c call Asynchronous cho Redux Ã¡, nÃ³i chung lÃ  vá»›i Ä‘á»‹nh nghÄ©a cá»§a Redux thÃ¬ cÃ¡c hÃ m xá»­ lÃ½ state trong Ä‘Ã³ báº¯t buá»™c pháº£i lÃ  Pure vÃ  Synchronous. NhÆ°ng mÃ  váº¥n Ä‘á» em muá»‘n call api thÃ¬ sao? NÃ³ lÃ  Asynchronous mÃ , do Ä‘Ã³ em cáº§n thÃªm má»™t sá»‘ thÆ° viá»‡n Ä‘á»ƒ lÃ m máº¥y thá»© nhÆ° váº­y, nÃ³i chung lÃ  khÃ ... rÆ°á»m rÃ 

![Untitled 2.png](https://images.viblo.asia/b24acd04-4725-4ddb-a2d4-bf025a8a469e.png)

ğŸ£: Em Ä‘á»c Ä‘á»‘ng Ä‘Ã³ cÅ©ng tháº¥y rá»‘i, cÃ³ cÃ¡ch nÃ o Ä‘á»¡ rÆ°á»m rÃ  hÆ¡n khÃ´ng anh?

ğŸ”: CÃ³ chá»©, nhiá»u láº¯m anh cÃ³ viáº¿t á»Ÿ Ä‘Ã¢y nÃ¨:

[Chá»n lib state management nÃ o bÃ¢y giá»?](https://thanhle.blog/blog/chon-lib-state-management-nao-bay-gio)

NÃ³i chung lÃ  em pháº£i tÃ¬m hiá»ƒu xem Project vÃ  team cá»§a mÃ¬nh há»£p vá»›i thÆ° viá»‡n nÃ o, anh cÃ³ má»™t sá»‘ tiÃªu chÃ­ nhÆ°:

- Feature - Chá»©c nÄƒng ngon khÃ´ng, há»£p vá»›i prj cá»§a mÃ¬nh ko
- Easy to add - CÃ i vÃ o prj cÃ³ dá»… khÃ´ng
- Easy to write - Rá»“i sÃ i nÃ³ lÃ m sao? MÃ¬nh viáº¿t dc mÃ  tháº±ng báº¡n mÃ¬nh khÃ´ng lÃ m dc lÃ  cháº¿t rá»“i
- Community - Cá»™ng Ä‘á»“ng tháº¿ nÃ o? Lá»¡ bug cÃ¡i biáº¿t há»i ai

KÃ¬ nÃ y anh Ä‘ang dÃ¹ng [React-query](https://react-query.tanstack.com/), tháº¥y cá»±c kÃ¬ á»•n, ai trong team cÅ©ng khen ğŸ˜—

ğŸ£: Hehe cáº£m Æ¡n anh. Äáº§u bÃ i anh cÃ³ nÃ³i táº¡i sao nÃªn giá»i cÃ¡i nÃ y, anh nÃ³i cho em vá»›i

ğŸ”: 

**Ok, Ä‘áº§u tiÃªn lÃ  vÃ¬ nÃ³ quan trá»ng!**

![Untitled 3.png](https://images.viblo.asia/ca2b3b92-3894-4b60-a496-4187acb9cbc5.png)

NhÆ° lÃºc nÃ£y anh cÃ³ nÃ³i Ã¡, viá»‡c mÃ¡y cá»§a user ngÃ y cÃ ng máº¡nh lÃªn thÃ¬ thÃ¬ frontend mÃ¬nh cÃ ng ngÃ y cÃ ng pháº£i lÃ m nhiá»u hÆ¡n, vÃ  viá»‡c quan trá»ng nháº¥t lÃ  manage state. VÃ¬ lÃºc nÃ y em sáº½ cáº§n call khÃ¡ nhiá»u api Ä‘á»ƒ cÃ³ thá»ƒ tÃ¡i hiá»‡n láº¡i cÃ¡i state lÆ°u sáºµn á»Ÿ backend Ä‘á»ƒ thá»ƒ hiá»‡n cho user. Rá»“i khi user tÆ°Æ¡ng tÃ¡c vá»›i app thÃ¬ mÃ¬nh cÅ©ng pháº£i coi xá»­ lÃ½ state lÃ m sao, update láº¡i state chá»— nÃ o, call api lÆ°u káº¿t quáº£, rá»“i cÃ²n coi xem api call Ä‘Ã³ cÃ³ thÃ nh cong hay khÃ´ng!

Do Ä‘Ã³ nÃ³ lÃ  cÃ´ng viá»‡c mÃ  náº¿u em code frontend pháº£i lÃ m, vÃ  sáº½ pháº£i lÃ m ráº¥t nhiá»u trong tÆ°Æ¡ng lai

**Thá»© hai lÃ  vÃ¬ nÃ³ nhiá»u tiá»n.**

![Untitled 4.png](https://images.viblo.asia/30e12092-998b-4304-871c-018e81c337c7.png)

Thá»±c ra cÃ¡i nÃ y kÃ©o theo do há»‡ quáº£ cá»§a cÃ¡i trÃªn thÃ´i, vÃ¬ nÃ³ quan trá»ng vÃ  vÃ¬ nÃ³ cÅ©ng khÃ¡ khÃ³, do Ä‘Ã³ em lÃ m Ä‘Æ°á»£c thÃ¬ em cÃ³ nhiá»u tiá»n thÃ´i. Náº¿u so vá»›i má»™t frontend chá»‰ biáº¿t cáº¯t ghÃ©p HTML/CSS thÃ¬ ngÆ°á»i biáº¿t lÃ m state, biáº¿t lÃ m web app dÃ¹ng React, vuejs, Angular,... Ä‘á»“ Ä‘Ã³ thÃ¬ lÆ°Æ¡ng cá»§a em sáº½ ráº¥t ráº¥t cao. Anh Ä‘Ã£ tá»«ng tháº¥y bÃ¡o giÃ¡ má»™t sá»‘ dá»± Ã¡n lÃ m web landing page Ä‘á»“ vÃ  tÆ°á»Ÿng tÆ°á»£ng no way mÃ  anh cÃ³ thá»ƒ lÃ m Ä‘Æ°á»£c trang web Ä‘Ã³ trong vÃ i ngÃ y vá»›i giÃ¡ 10-15tr. Trong khi anh lÃ m cÃ¡i web app nhÃ n nhÃ n 6-7 tiáº¿ng trÃªn Upwork cÅ©ng Ä‘Æ°á»£c táº§m 4-5tr Ä‘i uá»‘ng cocktail rá»“i

Do Ä‘Ã³ lÃ m frontend thÃ¬ pháº£i quan tÃ¢m tá»›i State Management Ä‘i, khÃ´ng lÃ  khÃ´ng thÃ nh â€œvua cá»§a cÃ¡c nghá»â€ Ä‘Æ°á»£c Ä‘Ã¢u.

**Thá»© ba lÃ  nÃ³ biáº¿n em trá»Ÿ nÃªn Ä‘a nÄƒng hÆ¡n.**

![Untitled 5.png](https://images.viblo.asia/2a0a0fb3-83df-45f1-9836-36822d918c83.png)

Viá»‡c em náº¯m rÃµ viá»‡c state tháº¿ nÃ o, tá»• chá»©c ra sao sáº½ giÃºp em má»Ÿ rá»™ng con Ä‘Æ°á»ng muá»‘n Ä‘i hÆ¡n. VÃ¬ háº§u háº¿t cÃ¡c kÄ© nÄƒng quáº£n lÃ½ state sáº½ khÃ¡ giá»‘ng viá»‡c em code backend, do Ä‘Ã³ sau nÃ y há»c thÃªm tÃ­ back-end lÃ  trá»Ÿ thÃ nh Phun Sá» Táº¯c ÄÃ¬ ve lá»›p pá» rá»“i! Ngay cáº£ sau nÃ y em cÃ³ nháº£y qua code blockchain cÅ©ng váº­y, cá»±c kÃ¬ dá»… luÃ´n nhÃ©. Anh pháº£i nÃ³i lÃ  giá»i vá» state thÃ¬ dá»… há»c code blockchain hÆ¡n lÃ  qua há»c backend luÃ´n Ä‘Ã³.

Ã€ ngoÃ i ra em náº¯m Ä‘Æ°á»£c state thÃ¬ em cÅ©ng code Ä‘Æ°á»£c á»Ÿ gáº§n nhÆ° báº¥t cá»© framework nÃ o: Angular, Vuejs, Svelte,... Ä‘á»ƒu quáº©y dc háº¿t nhÃ©

ğŸ£: Oh nghe quan trá»ng tháº­t Ä‘Ã³, cÃ³ cÃ¡ch nÃ o há»c dá»… khÃ´ng anh?

ğŸ”: Anh khÃ´ng biáº¿t cÃ³ cÃ¡ch nÃ o há»c tá»‘t hÆ¡n khÃ´ng, nhÆ°ng Ä‘á»‘i vá»›i anh thÃ¬ lÃ m nhiá»u, tá»± coi láº¡i mÃ¬nh code cÃ³ chá»— gÃ¬ khÃ´ng á»•n, rá»“i Ä‘á»c thÃªm cÃ¡ch giáº£i quyáº¿t váº¥n Ä‘á» Ä‘Ã³ nhÆ° tháº¿ nÃ o lÃ  cÃ¡ch há»c hiá»‡u quáº£ nháº¥t.



Ã€, anh cÃ³ há»‡ thá»‘ng láº¡i vá» state management á»Ÿ hÃ¬nh trÃªn, em thá»­ xem cÃ³ há»c Ä‘Æ°á»£c khÃ´ng nhÃ©:

- CÆ¡ báº£n quáº£n lÃ½ state lÃ  viá»‡c mÃ¬nh xá»­ lÃ½: State + Event = State má»›i. Vd em cÃ³ nÃºt Reaction á»Ÿ Ä‘áº§u Ä‘ang cÃ³ state lÃ  Like, user click vÃ o nÃ³ chá»n Event Tháº£ tim, váº­y em pháº£i handle event Ä‘Ã³ vá»›i state hiá»‡n táº¡i Ä‘á»ƒ chuyá»ƒn thÃ nh state Tháº£ tim
- Event thÃ¬ chá»‰ cÃ³ 2 nguá»“n chÃ­nh thÃ´i: Má»™t lÃ  tá»« users (click, scroll, hover, type,...), 2 lÃ  tá»« cÃ¡c 3rd party khÃ¡c (Api response, websocket, service workers)
- Vá»›i state má»›i thÃ¬ mÃ¬nh sáº½ cÃ³ 2 Ä‘Æ°á»ng: Má»™t lÃ  update láº¡i UI (cÃ¡i nÃ y thÆ°á»ng framework/lib nÃ³ lÃ m cmnr); hai lÃ  Update láº¡i vÃ o 3rd party, vd call api Ä‘á»ƒ lÆ°u láº¡i bÃ i viáº¿t cháº³ng háº¡n.

 Anh láº¥y vÃ­ dá»¥ vá» viá»‡c Post 1 bÃ i trÃªn Facebook nhÃ©:

- State Ä‘áº§u tiÃªn: New feed (Post, comment,...), user hiá»‡n táº¡i, list báº¡n bÃ¨,...
- Event: User nháº­p vÃ o Ã´ status â€œHÃ´m nay báº¡n cáº£m tháº¥y tháº¿ nÃ o?â€
- MÃ¬nh sáº½ cÃ³ logic xá»­ lÃ½ user gÃµ vÃ o Ã´ Ä‘Ã³ thÃ¬ lÆ°u láº¡i Text cá»§a status Ä‘Ã³, Ä‘á»“ng thá»i cÅ©ng check thÃªm xem trong content tháº±ng nÃ y gÃµ cÃ³ Hash tag hay Mention Ä‘á»©a nÃ o Ä‘i Äƒn bÃºn Ä‘áº­u máº¯m tÃ´m khÃ´ng? Náº¿u cÃ³ thÃ¬ update state Ä‘á»ƒ hiá»‡n cho nÃ³ cÃ¡i dropdown show ra cho nÃ³ chá»n cho nhanh cÃ¡i
- Váº­y lÃ  update thÃ nh state hiá»‡n táº¡i hiá»‡n thÃªm cÃ¡i dropdown, bÃ¢y giá» react má»›i map cÃ¡i state Ä‘Ã³ Ä‘á»ƒ render ra cÃ¡i dropdown cho user click vÃ o
- Rá»“i khi user cÃ³ Event click xong, thÃ¬ mÃ¬nh láº¡i update láº¡i state lÃ  â€œTáº¡o chá»n xong rá»“i, táº¯t há»™ bá»‘ cÃ¡iâ€
- Ok cuá»‘i cÃ¹ng thÃ¬ cÅ©ng viáº¿t xong, `Enter` thÃ´i
- BÃ¢y giá» mÃ¬nh sáº½ nháº­n Event Ä‘Ã³, lÆ°u cÃ¡i status Ä‘Ã³ vÃ o trong State new Feed Ä‘á»ƒ render ra luÃ´n tháº±ng users. Äá»“ng thá»i, gá»­i thÃªm má»™t cÃ¡i Event vÃ o 3rd party cá»¥ thá»ƒ á»Ÿ Ä‘Ã¢y lÃ  call API Ä‘á»ƒ lÆ°u láº¡i status.
- Xong

ğŸ£: Ohhh, nghe anh giáº£i thÃ­ch cÅ©ng khÃ¡ Ä‘Æ¡n giáº£n Ã¡!

ğŸ”: Uh anh pháº£i tá»‘n bao nhiÃªu nÃ£o má»›i há»‡ thá»‘ng Ä‘Æ°á»£c nhÆ° váº­y Ã¡. Tuy nhiÃªn nÃ³ khÃ´ng táº§m thÆ°á»ng Ä‘Ã¢u. NÃ³ giÃºp em há»c cÃ¡c lib vá» quáº£n lÃ½ state khÃ¡c nhanh hÆ¡n nhiá»u luÃ´n

ğŸ£: á» chá»— nÃ o anh?

ğŸ”: Theo nhÆ° anh biáº¿t lÃ  táº¥t cáº£ cÃ¡c thÆ° viá»‡n vá» quáº£n lÃ½ state Ä‘á»u dá»±a trÃªn concept trÃªn. Viá»‡c em tÃ¡ch Ä‘Æ°á»£c Ä‘Ã¢u lÃ  State hiá»‡n táº¡i, ÄÃ¢u lÃ  Event, ÄÃ¢u lÃ  state má»›i giÃºp em code clean hÆ¡n vÃ  rÃ nh máº¡ch hÆ¡n. VD hÃ m Ä‘á»ƒ xá»­ lÃ½ Event thÃ¬ nÃªn Ä‘á»ƒ á»Ÿ Ä‘Ã¢u, state má»›i nÃªn tÃ­nh nhÆ° tháº¿ nÃ o nÃ¨,... Rá»“i tá»± Ä‘Ã³ map sang tá»¥i thÆ° viá»‡n nÃ³ support cho mÃ¬nh á»Ÿ pháº§n nÃ o, Ä‘á»ƒ mÃ¬nh chá»‰ cáº§n quan tÃ¢m pháº§n cÃ²n láº¡i thÃ´i

Ã€ ngoÃ i ra anh cÅ©ng share má»™t cÃ¡ch viáº¿t state cho cÃ¡c báº¡n á»Ÿ Ä‘Ã¢y nÃ¨:

[State management gá»n gÃ ng](https://thanhle.blog/blog/state-management-gon-gang)

ğŸ£: Cáº£m Æ¡n anh vÃ¬ Ä‘Ã£ bá» thá»i gian xÃ m xÃ m á»Ÿ Ä‘Ã¢y. Hy vá»ng anh sau nÃ y pro hÆ¡n ná»¯a!

*ThÃ´i má»i tay + háº¿t trÃ­ tÆ°á»Ÿng tÆ°á»£ng rá»“i, má»i ngÆ°á»i ai tháº¥y cáº§n há»i gÃ¬ thÃ¬ comment á»Ÿ dÆ°á»›i nhÃ©!*

BÃ i gá»‘c: https://thanhle.blog/en/blog/state-trong-frontend-la-gi-tai-sao-nen-gioi-cai-nay