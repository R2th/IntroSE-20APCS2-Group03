Cháº¯c háº³n nhiá»u ngÆ°á»i cÅ©ng Ä‘Ã£ tá»«ng lÃ m 1 á»©ng dá»¥ng tráº£ lá»i Survey báº±ng viá»‡c sá»­ dá»¥ng thÆ° viá»‡n hay service bÃªn thá»© 3 nhÆ° Google Form.

Náº¿u khÃ´ng cÃ³ yÃªu cáº§u gÃ¬ Ä‘áº·c biá»‡t thÃ¬ Google Form quáº£ thá»±c quÃ¡ Ä‘á»§. NhÆ°ng mÃ  Ä‘á»ƒ hiá»ƒn thá»‹ káº¿t quáº£ Survey báº±ng realtime thÃ¬ cÃ³ láº½ Google Form khÃ´ng pháº£i lÃ  sá»± lá»±a chá»n há»£p lÃ½.

Váº­y cÃ¹ng xem cÃ¡c kÄ© sÆ° ZOZO Ä‘Ã£ táº¡o ra á»©ng dá»¥ng Survey realtime nhÆ° tháº¿ nÃ o nhÃ©.

## Bá»‘i cáº£nh
[ZOZO](https://zozo.jp/) lÃ  1 trang web bÃ¡n hÃ ng online gáº§n nhÆ° lá»›n nháº¥t Nháº­t Báº£n. CÃ´ng ty Ä‘Æ°á»£c thÃ nh láº­p vÃ o nÄƒm 1998, Ä‘áº¿n nay Ä‘Ã£ Ä‘áº¡t hÆ¡n 1000 nhÃ¢n viÃªn.

Äa sá»‘ cÃ¡c cÃ´ng ty Nháº­t báº£n, há» thÆ°á»ng tá»• chá»©c bá»¯a tiá»‡c tá»•ng káº¿t cuá»‘i nÄƒm Ä‘á»ƒ bÃ¡o cÃ¡o tÃ¬nh hÃ¬nh tÃ i chÃ­nh, giá»›i thiá»‡u dá»‹ch vá»¥ cÃ´ng ty Ä‘ang váº­n hÃ nh Ä‘áº¿n toÃ n thá»ƒ nhÃ¢n viÃªn.

VÃ  ZOZO cÅ©ng váº­y. VÃ o buá»•i tá»•ng káº¿t cuá»‘i nÄƒm, há» quay video giá»›i thiá»‡u vá» dá»‹ch vá»¥ trong cÃ´ng ty. VÃ  má»—i khi káº¿t thÃºc 1 pháº§n nÃ o Ä‘Ã³ trong video, há» tá»• chá»©c 1 cÃ¡i Survey thÄƒm dÃ² Ã½ kiáº¿n cá»§a toÃ n bá»™ nhÃ¢n viÃªn, vÃ  sáº½ hiá»ƒn thá»‹ káº¿t quáº£ ra mÃ n hÃ¬nh 1 cÃ¡ch realtime. VÃ  cÃ¡i Survey nÃ y sáº½ Ä‘Æ°á»£c chÃ¨n vÃ o giá»¯a cÃ¡c Ä‘oáº¡n trong video.

ÄÃ¢y lÃ  toÃ n bá»™ khung cáº£nh há»™i trÆ°á»ng lÃºc Ä‘Ã³. CÃ´ng ty to cÃ³ khÃ¡c, há»™i trÆ°á»ng trÃ´ng hoÃ nh trÃ¡ng quÃ¡.

![](https://images.viblo.asia/035a38b0-4870-4322-b8bf-97dc5d68616d.jpg)
![](https://images.viblo.asia/54950cb7-1030-432a-bc2a-c5786451bde6.jpg)
![](https://images.viblo.asia/e47d4f79-34b1-4bb3-8335-151013025308.jpg)
![](https://images.viblo.asia/1af062b5-4373-40c6-affd-b2b329394791.jpg)
![](https://images.viblo.asia/7eea6e9f-2d70-4eee-8c65-71497cc02b8a.jpg)

## Äiá»u kiá»‡n khi thá»±c hiá»‡n Survey
TrÆ°á»›c buá»•i tá»•ng káº¿t 2 tuáº§n thÃ¬ Ä‘Ã£ nháº­n Ä‘Æ°á»£c 1 sá»‘ request tá»« bÃªn admin nhÆ° sau:

* á» há»™i trÆ°á»ng sáº½ thá»±c hiá»‡n lÃ m survey á»Ÿ trÃªn web 1 cÃ¡ch realtime, káº¿t quáº£ thá»‘ng kÃª sáº½ hiá»ƒn thá»‹ ngay láº­p tá»©c trÃªn mÃ n hÃ¬nh há»™i trÆ°á»ng.
* CÃ¢u tráº£ lá»i chá»‰ cÃ³ YES hoáº·c NO
* CÃ³ khoáº£ng tá»« 7 Ä‘áº¿n 8 cÃ¢u há»i
* CÃ³ thá»ƒ tráº£ lá»i thÃ´ng qua smartphone báº±ng cÃ¡ch quÃ©t mÃ£ QR Code
* Muá»‘n hiá»ƒn thá»‹ káº¿t quáº£ trÃªn mÃ n hÃ¬nh há»™i trÆ°á»ng vá»›i UI dá»… nhÃ¬n, báº¯t máº¯t.
* CÃ¢u há»i vÃ  cÃ¢u tráº£ lá»i sáº½ thá»±c hiá»‡n giá»¯a cÃ¡c Ä‘oáº¡n video.

## HÆ°á»›ng giáº£i quyáº¿t
Sau khi nháº­n Ä‘Æ°á»£c 1 sá»‘ request tá»« bÃªn admin, cÃ¡c kÄ© sÆ° ZOZO Ä‘Ã£ Ä‘Æ°a ra 1 sá»‘ giáº£i phÃ¡p nhÆ° sau:

1. DÃ¹ng tool [Polly](https://www.polly.ai/) trÃªn Slack, má»i ngÆ°á»i vÃ o Ä‘Ã³ tráº£ lá»i Survey. Rá»“i thÃ´ng qua Slack API sáº½ thá»‘ng kÃª vÃ  hiá»ƒn thá»‹ káº¿t quáº£ lÃªn mÃ n hÃ¬nh.
á» cÃ´ng ty cÅ©ng cÃ³ ngÆ°á»i khÃ´ng cÃ³ account slack nÃªn viá»‡c thá»±c hiá»‡n lÃ  khÃ´ng thá»ƒ. => Loáº¡i

2. DÃ¹ng 1 dá»‹ch vá»¥ cá»§a bÃªn thá»© 3 chuyÃªn vá» Survey Ä‘Ã³ lÃ   [respon](https://respon.jp/biz/). NhÆ°ng mÃ  tool nÃ y láº¡i khÃ´ng biáº¿t lÃ  cÃ³ thá»ƒ dá»… dÃ ng customize Ä‘Æ°á»£c hay khÃ´ng, vá»›i cáº£ thá»i gian láº§n nÃ y chá»‰ cÃ³ 2 tuáº§n nÃªn cÃ³ thá»ƒ sáº½ khÃ´ng thá»ƒ lÃ m xong hoÃ n toÃ n Ä‘Æ°á»£c => Loáº¡i

3. Team Frontend Ä‘ang váº­n hÃ nh [zozo](https://zozo.com/) sáº½ Ä‘áº£m nhiá»‡m. VÃ¬ team nÃ y Ä‘Ã£ tá»«ng cÃ³ kinh nghiá»‡m vá»›i Firebase, hÆ¡n ná»¯a Firebase cÃ³ thá»ƒ thá»‘ng kÃª káº¿t quáº£ realtime. NÃªn team Ä‘Ã£ quyáº¿t Ä‘á»‹nh chá»n Firebase Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y.

## Tá»•ng káº¿t láº¡i Ä‘iá»u kiá»‡n khi lÃ m Survey
Sau khi chá»n Firebase lÃ m giáº£i phÃ¡p chÃ­nh, thÃ¬ mÃ¬nh sáº½ tá»•ng há»£p láº¡i yÃªu cáº§u khi lÃ m Survey nhÆ° sau:

* CÃ³ tá»•ng tá»« 7 Ä‘áº¿n 8 cÃ¢u há»i
* ChÃ¨n cÃ¢u há»i vÃ o giá»¯a cÃ¡c Ä‘oáº¡n trong video
* ÄÃ¡p Ã¡n tráº£ lá»i sáº½ cÃ³ 2 lá»±a chá»n lÃ  YES vÃ  NO
* CÃ³ thá»ƒ quyÃ©t mÃ£ QR code Ä‘á»ƒ hiá»ƒn thá»‹ trang web Survey.
* Káº¿t quáº£ tráº£ lá»i Survey sáº½ Ä‘Æ°á»£c thá»‘ng kÃª vÃ  hiá»ƒn thá»‹ ra mÃ n hÃ¬nh há»™i trÆ°á»ng ngay láº­p tá»©c
* Khi chuyá»ƒn sang cÃ¢u há»i tiáº¿p theo sáº½ khÃ´ng reload láº¡i page
* Viá»‡c thay Ä‘á»•i cÃ¢u há»i sáº½ Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua mÃ n hÃ¬nh quáº£n lÃ½
* TrÃªn smartphone chá»‰ Ä‘Æ°á»£c tráº£ lá»i 1 láº§n duy nháº¥t, vÃ  khÃ´ng thá»ƒ xoÃ¡
* Thá»i gian tráº£ lá»i cÃ¢u há»i lÃ  15s (Thá»i gian hiá»ƒn thá»‹ cÃ¢u há»i lÃ  10s, cÃ²n 5s sáº½ hiá»ƒn thá»‹ count down)
* Káº¿t quáº£ sáº½ hiá»ƒn thá»‹ tá»‰ lá»‡ pháº§n trÄƒm cá»§a YES/NO

## Nhá»¯ng viá»‡c cáº§n chuáº©n bá»‹
Äá»ƒ buá»•i tá»•ng káº¿t khÃ´ng cÃ³ váº¥n Ä‘á» gÃ¬ xáº£y ra, cÃ¡c kÄ© sÆ° ZOZO Ä‘Ã£ tá»•ng káº¿t láº¡i quy mÃ´ há»‡ thá»‘ng vÃ  nhá»¯ng viá»‡c cáº§n thiáº¿t nÃªn chuáº©n bá»‹ nhÆ° sau:

* Sá»‘ lÆ°á»£ng ngÆ°á»i tham gia: 1000 ngÆ°á»i
* Chuáº©n bá»‹ máº¡ng Internet cÃ³ thá»ƒ chá»‹u Ä‘Æ°á»£c 1000 ngÆ°á»i
* Spec vá» Ä‘á»™ phÃ¢n giáº£i mÃ n hÃ¬nh: 1920Ã—1080
* Sá»‘ lÆ°á»£ng mÃ n hÃ¬nh: 4 mÃ n hÃ¬nh
* Buá»•i hÃ´m Ä‘Ã³ cÃ³ thá»ƒ demo Ä‘Æ°á»£c khÃ´ng? => Tá»« 15:00 cÃ³ thá»ƒ demo Ä‘Æ°á»£c tá»« 30~40p
* Thá»±c hiá»‡n viá»‡c test táº£i há»‡ thá»‘ng (vá»›i quy mÃ´ lÃ  1000 ngÆ°á»i)
* Náº¿u cÃ³ bug xáº£y ra thÃ¬ lÃ m tháº¿ nÃ o? => Chuáº©n bá»‹ 1 slide vá» toÃ n cÃ¡c cÃ¢u há»i, vÃ  nhá» má»i ngÆ°á»i lÃ m trÃªn Ä‘Ã³.
* Thá»±c hiá»‡n test viá»‡c hiá»ƒn thá»‹ trÃªn 1 sá»‘ loáº¡i smartphone

## CÃ´ng nghá»‡ sá»­ dá»¥ng
VÃ¬ team Frontend ZOZO quyáº¿t Ä‘á»‹nh tá»± build láº¥y nÃªn há» Ä‘Ã£ quyáº¿t Ä‘á»‹nh chá»n 1 sá»‘ cÃ´ng nghá»‡ dÆ°á»›i Ä‘Ã¢y:

* Data Management:  [Firebase](https://firebase.google.com/)
* Frontend:  [Vuejs](https://vuejs.org/)
* Animation khi hiá»ƒn thá»‹ káº¿t quáº£:  [Tweenmax](https://greensock.com/tweenmax)

## Design mÃ n hÃ¬nh
ZOZO Ä‘Ã£ chuáº©n bá»‹ ra 3 mÃ n hÃ¬nh:

1. MÃ n hÃ¬nh tráº£ lá»i cÃ¢u há»i
* Má»—i ngÆ°á»i dÃ¹ng sáº½ tráº£ lá»i cÃ¢u há»i trÃªn smartphone
* Sáº½ enable/disable mÃ n hÃ¬nh khi cÃ¢u há»i báº¯t Ä‘áº§u vÃ  káº¿t thÃºc

![](https://images.viblo.asia/67824236-8b11-464e-8e35-0468eb9a9239.png)

2. MÃ n hÃ¬nh káº¿t quáº£

* Hiá»ƒn thá»‹ cÃ¢u há»i vÃ  káº¿t quáº£ ra mÃ n hÃ¬nh
![](https://images.viblo.asia/41a9af8c-3d3a-4444-ae2f-70256a0ee159.png)

3. MÃ n hÃ¬nh quáº£n lÃ½

* MÃ n hÃ¬nh dÃ¹ng cho Admin thá»ƒ thay Ä‘á»•i Ä‘Æ°á»£c cÃ¢u há»i
* Khi thay Ä‘á»•i cÃ¢u há»i thÃ¬ cÅ©ng setting luÃ´n thá»i gian káº¿t thÃºc cÃ¢u há»i

![](https://images.viblo.asia/fa359ec8-4bcf-4e76-957c-093e0ea2eac8.gif)

## Setting Firebase
**Äiá»u kiá»‡n**: Cáº§n pháº£i cÃ³ tÃ i khoáº£n Google.

Äáº§u tiÃªn cáº§n login vÃ o trong tÃ i khoáº£n Google, sau Ä‘Ã³ tá»«  [Firebase Console](https://console.firebase.google.com/) sáº½ táº¡o ra 1 project.

* Nháº­p tÃªn project
* Check vÃ o nhá»¯ng má»¥c Ä‘iá»u khoáº£n sau Ä‘Ã³ áº¥n vÃ o nÃºt Create Project

![](https://images.viblo.asia/42ddbefd-bb70-4612-9067-d1142f57c1bc.png)

Sau khi táº¡o xong sáº½ Ä‘i Ä‘áº¿n mÃ n hÃ¬nh Project Dashboard.

Máº·c Ä‘á»‹nh thÃ¬ Ä‘ang dÃ¹ng Plan lÃ  Spark. Vá»›i á»©ng dá»¥ng nÃ o Ã­t request thÃ¬ mÃ¬nh tháº¥y plan nÃ y cÅ©ng Ä‘á»§ dÃ¹ng.

NhÆ°ng mÃ  do quy mÃ´ láº§n nÃ y lÃ  1000 ngÆ°á»i, nÃªn Ä‘á»ƒ an toÃ n ZOZO Ä‘Ã£ quyáº¿t Ä‘á»‹nh dÃ¹ng plan Blaze (Pay as you go â€“ dÃ¹ng Ä‘áº¿n Ä‘Ã¢u tráº£ tiá»n Ä‘áº¿n Ä‘Ã³)

## Setting FireStore
Tiáº¿p theo mÃ¬nh sáº½ Ä‘i cÃ i Ä‘áº·t tháº±ng FireStore.

á» menu bÃªn trÃ¡i mÃ n hÃ¬nh, chá»n **Develop** -> **Database**

![](https://images.viblo.asia/ef73a63d-8862-480d-afe5-efc5ab670b09.png)

Vá» chá»— **Security rules**: Do láº§n nÃ y thá»±c hiá»‡n á»Ÿ trong cÃ´ng ty nÃªn khÃ´ng cáº§n Ä‘á»ƒ Ã½ Ä‘áº¿n security cÅ©ng Ä‘Æ°á»£c. Do Ä‘Ã³ sáº½ chá»n **Start in test mode**.

Sau khi táº¡o xong thÃ¬ 1 database (Giá»‘ng nhÆ° RDS) Ä‘Ã£ Ä‘Æ°á»£c táº¡o ra. FireStore lÃ  NoSQL nÃªn khÃ´ng cáº§n thiáº¿t pháº£i táº¡o schema.

BÆ°á»›c tiáº¿p theo mÃ¬nh sáº½ liÃªn káº¿t vá»›i pháº§n Web Application. Trong mÃ n hÃ¬nh chÃ­nh, chÃºng ta click vÃ o cÃ¡i nÃºt </> á»Ÿ trong hÃ¬nh áº£nh bÃªn dÆ°á»›i.

![](https://images.viblo.asia/af960e0d-46b2-4ca8-9ef8-d6264768f08a.png)

VÃ  thá»±c hiá»‡n theo cÃ¡c bÆ°á»›c trong hÃ¬nh, cuá»‘i cÃ¹ng chÃºng ta sáº½ add cÃ¡i Ä‘oáº¡n javascript vÃ o trong file src/main.js.

![](https://images.viblo.asia/06d4c33f-6b4e-4e93-a171-b71474de22da.png)

Do á»Ÿ phÃ­a Application mÃ¬nh váº«n chÆ°a táº¡o, á»Ÿ Ä‘Ã¢y mÃ¬nh sáº½ táº¡o báº±ng VueJs. Vá» cÃ¡ch táº¡o á»©ng dá»¥ng VueJS á»Ÿ trÃªn máº¡ng khÃ¡ nhiá»u nÃªn á»Ÿ Ä‘Ã¢y mÃ¬nh sáº½ khÃ´ng nÃ³i láº¡i ná»¯a. CÃ¡c báº¡n cÃ³ thá»ƒ Google Ä‘á»ƒ tÃ¬m hiá»ƒu nhÃ©.

Sau khi cÃ³ á»©ng dá»¥ng VueJS rá»“i thÃ¬ bÆ°á»›c tiáº¿p theo lÃ  nhÃºng Ä‘oáº¡n Javascript phÃ­a trÃªn vÃ o file src/main.js.

![](https://images.viblo.asia/f3045db6-396e-4a16-b06b-ee5f2ad22ebf.jpg)

## Setting Firebase Hosting
Vá» hosting cá»§a web application, ZOZO cÅ©ng quyáº¿t Ä‘á»‹nh dÃ¹ng luÃ´n hosting cá»§a firebase.

So vá»›i Firestore thÃ¬ Firebase Hosting cÃ i Ä‘áº·t khÃ¡ Ä‘Æ¡n giáº£n.

á» menu, chá»n **Develop** -> **Hosting**. Sau Ä‘Ã³ áº¥n vÃ o nÃºt **Get Started** vÃ  thá»±c hiá»‡n 1 sá»‘ cÃ¢u lá»‡nh á»Ÿ bÃªn dÆ°á»›i mÃ n hÃ¬nh.

![](https://images.viblo.asia/28f073e8-1de0-46b3-9ff3-4ab5343e9282.png)
![](https://images.viblo.asia/e6a8a52c-c923-4739-b6e2-b65b040fc7d1.png)

```
$ firebase login
$ firebase init hosting
```

Sau khi thá»±c hiá»‡n xong 2 cÃ¢u lá»‡nh trÃªn thÃ¬ chÃºng ta sáº½ tháº¥y 1 file Ä‘Æ°á»£c táº¡o ra Ä‘Ã³ lÃ  **firebase.json**. Trong file nÃ y thÃ¬ **hosting.public** Ä‘Ã³ chÃ­nh lÃ  Ä‘á»‘i tÆ°á»£ng sáº½ Ä‘Æ°á»£c deploy.

NhÆ°ng do VueJS Ä‘ang sá»­ dá»¥ng webpack Ä‘á»ƒ build, vÃ  thÆ° má»¥c sau khi build xong lÃ  **dist** nÃªn trong **firebase.json** chÃºng ta sáº½ chuyá»ƒn **hosting.public** thÃ nh **dist**. Cá»¥ thá»ƒ sáº½ nhÆ° sau:

```
{
  "hosting": {
    "public": "dist",
    "ignore": [
      "firebase.json",
      "**/.*",
      "**/node_modules/**"
    ],
    "rewrites": [
      {
        "source": "**",
        "destination": "/index.html"
      }
    ]
  }
}
```

Tiáº¿p theo chÃºng ta cÃ¹ng thá»±c hiá»‡n deploy firebase nhÃ©:
```
$ npm run build
$ firebase deploy
```

Sau khi deploy xong thÃ¬ á»Ÿ mÃ n hÃ¬nh Hosting sáº½ hiá»ƒn thá»‹ ra domain Ä‘Ã£ Ä‘Æ°á»£c deploy, vÃ  cÃ³ thá»ƒ access Ä‘Æ°á»£c tá»« URL Ä‘Ã³.

Váº­y viá»‡c cÃ i Ä‘áº·t Firebase Ä‘áº¿n Ä‘Ã¢y lÃ  káº¿t thÃºc.

## LiÃªn káº¿t mÃ n hÃ¬nh vá»›i Firestore
Tiáº¿p theo chÃºng ta Ä‘áº¿n bÆ°á»›c liÃªn káº¿t mÃ n hÃ¬nh web vá»›i firestore nhÃ©.

Cáº¥u trÃºc cá»§a FireStore sáº½ Ä‘áº·t nhÆ° sau:

* id cá»§a cÃ¢u há»i hiá»‡n táº¡i
* thá»i gian káº¿t thÃºc cÃ¢u tráº£ lá»i
* cÃ¢u tráº£ lá»i cá»§a ngÆ°á»i dÃ¹ng

ãƒ»Thá»±c táº¿ cáº¥u trÃºc dá»¯ liá»‡u khÃ´ng pháº£i dáº¡ng JSON, nhÆ°ng Ä‘á»ƒ dá»… hiá»ƒu mÃ¬nh sáº½ viáº¿t láº¡i dÆ°á»›i dáº¡ng JSON
```
{
  "questions": {
    "current": {
      "id": 1, // id cÃ¢u há»i hiá»‡n táº¡i
      "endTime": 1545906141 // thá»i gian káº¿t thÃºc cÃ¢u tráº£ lá»i
    },
  },
  "votes": { // cÃ¢u tráº£ lá»i cá»§a má»—i ngÆ°á»i dÃ¹ng
    "001EjYAwtSMXlrWWTP5r": { // (ID mÃ  Firestore Ä‘Ã£ sinh ra)
      "answerId": 0, // id cÃ¢u tráº£ lá»i
      "questionId": 2 // id cÃ¢u há»i
    },
    "004gO0YzXUJ2bNFSbc5y": {
      "answerId": 1,
      "questionId": 3
    },
    .
    .
    .
  }
}
```

ãƒ»Update dá»¯ liá»‡u táº¡i mÃ n hÃ¬nh káº¿t quáº£
```
import firebase from 'firebase'
 
export default {
  .
  .
  .
  created() {
    // this.db = firebase.firestore()
    this.unsubscribe = this.db.collection('questions').doc('current')
      .onSnapshot((doc) => {
        const currentQuestion = doc.data()
        // =>
        //   {
        //     "id": 1,
        //     "endTime": 1545906141
        //   }
      })
  }
  .
  .
  .
}
```

ãƒ»CÃ¢u tráº£ lá»i cá»§a má»—i ngÆ°á»i dÃ¹ng:

```
import firebase from 'firebase'
 
const db = firebase.firestore()
export default {
  .
  .
  .
  created() {
    // this.db = firebase.firestore()
    this.db.collection('votes').onSnapshot((collection) => {
      this.votes = collection.docChanges().reduce((votes, c) => {
        const vote = c.doc.data()
        // =>
        //   {
        //     "answerId": 0,
        //     "questionId": 2
        //   }
        return {
          ...votes,
          [vote.questionId]: [...(votes[vote.questionId] || []), vote]
        }
      }, this.votes)
      // =>
      //   {
      //     .
      //     .
      //     .
      //     "2": [ // thá»‘ng kÃª dá»±a vÃ o tá»«ng id cá»§a cÃ¢u há»i
      //       {
      //         "answerId": 0,
      //         "questionId": 2
      //       },
      //       .
      //       .
      //       .
      //     ],
      //     "3": [
      //       {
      //         "answerId": 1,
      //         "questionId": 3
      //       },
      //       .
      //       .
      //       .
      //     ],
      //     .
      //     .
      //     .
      //   }
    })
  }
}
```

Táº¡i mÃ n hÃ¬nh káº¿t quáº£ sáº½ Ä‘i thá»‘ng kÃª dá»¯ liá»‡u dá»±a vÃ o tá»«ng id cÃ¢u há»i. Äá»‘i vá»›i dá»¯ liá»‡u cá»§a cÃ¢u tráº£ lá»i, Ä‘á»ƒ lÃ m tá»‘i thiá»ƒu cost nÃªn ZOZO Ä‘Ã£ sá»­ dá»¥ng hÃ m docChanges() Ä‘á»ƒ chá»‰ láº¥y cÃ¡i sá»± khÃ¡c nhau cá»§a tá»«ng káº¿t quáº£.

ãƒ» á» mÃ n hÃ¬nh Admin, sáº½ tiáº¿n hÃ nh viá»‡c ghi dá»¯ liá»‡u cÃ¢u há»i vÃ o trong FireStore

```
import firebase from 'firebase'
import moment from 'moment'
 
export default {
  .
  .
  .
  methods: {
    setQuestion() {
      db.collection('questions').doc('current').set({
        id: questionId,
        endTime: moment().add(questionTime, 'second').unix()
      })
    }
  }
  .
  .
  .
}
```

á» mÃ n hÃ¬nh Admin khi mÃ  báº¯t Ä‘áº§u 1 cÃ¢u há»i, khi Ä‘Ã³ nÃ³ sáº½ ghi question_id vá»›i endTime vÃ o trong FireStore.

Sau khi ghi vÃ o FireStore xong, ngay láº­p tá»©c sáº½ gá»­i thÃ´ng bÃ¡o Ä‘áº¿n toÃ n bá»™ smartphone vÃ  thá»i gian báº¯t Ä‘áº§u cÃ¢u há»i sáº½ Ä‘Æ°á»£c báº¯t Ä‘áº§u. VÃ  khi thá»i gian káº¿t thÃºc, mÃ n hÃ¬nh hiá»ƒn thá»‹ cÃ¢u há»i sáº½ bá»‹ máº¥t Ä‘i vÃ  sáº½ Ä‘i Ä‘áº¿n mÃ n hÃ¬nh káº¿t quáº£.

OK, váº­y pháº§n liÃªn káº¿t FireStore vá»›i mÃ n hÃ¬nh Ä‘áº¿n Ä‘Ã¢y Ä‘Ã£ xong.

VÃ  Ä‘Ã¢y lÃ  phÃ²ng Ä‘iá»u hÃ nh buá»•i tá»•ng káº¿t. NhÃ¬n Ä‘Ã£ tháº¥y sá»± chuyÃªn nghiá»‡p rá»“i. ÄÃºng lÃ  nÆ°á»›c ngoÃ i cÃ³ khÃ¡c. Há» lÃ m gÃ¬ cÅ©ng tháº¥y chuyÃªn nghiá»‡p

![](https://images.viblo.asia/78073163-fc62-4211-ae72-d4caeb8d9114.jpg)

## Vá» Pricing cá»§a Firebase
Sau khi event káº¿t thÃºc, vÃ o mÃ n hÃ¬nh Firebase Ä‘á»ƒ xÃ¡c nháº­n xem máº¥t bao nhiÃªu tiá»n.

**0.02$**

LÃ m Ä‘c 1 á»©ng dá»¥ng nhÆ° váº­y mÃ  chá»‰ máº¥t cÃ³ 0.02$. QuÃ¡ kinh khá»§ng.

## Tá»•ng káº¿t
Náº¿u báº¡n nÃ o Ä‘ang cÃ³ Ã½ Ä‘á»‹nh lÃ m 1 á»©ng dá»¥ng tráº£ lá»i survey realtime thÃ¬ cÃ³ thá»ƒ tham kháº£o bÃ i viáº¿t nÃ y nhÃ©.

ChÃºc cÃ¡c báº¡n thÃ nh cÃ´ng.

==============

Äá»ƒ nháº­n thÃ´ng bÃ¡o khi cÃ³ bÃ i viáº¿t má»›i nháº¥t thÃ¬ cÃ¡c báº¡n cÃ³ thá»ƒ like fanpage cá»§a mÃ¬nh á»Ÿ bÃªn dÆ°á»›i nhÃ©:

ğŸ‘‰ğŸ‘‰ğŸ‘‰ [Nghá»‡ thuáº­t Coding Fanpage Facebook](https://www.facebook.com/669339543503374)

ChÃºc cÃ¡c báº¡n 1 tuáº§n tháº­t vui váº».

Nguá»“n: https://nghethuatcoding.com/2019/05/04/zozo-da-tao-ung-dung-survey-realtime-xu-ly-1000-nguoi-dong-thoi-nhu-the-nao/