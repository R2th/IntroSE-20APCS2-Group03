{
  "data": [
    {
      "id": 65711,
      "title": "Blog#54: Design Patterns: Chain of Responsibility Pattern trong TypeScript üòä (Series: B√≥n h√†nh TypeScript - PH·∫¶N 4)",
      "slug": "gwd43B0rVX9",
      "url": "https://viblo.asia/p/blog54-design-patterns-chain-of-responsibility-pattern-trong-typescript-series-bon-hanh-typescript-phan-4-gwd43B0rVX9",
      "user_id": 74229,
      "moderation": null,
      "transliterated": "blog54-design-patterns-chain-of-responsibility-pattern-trong-typescript-series-bon-hanh-typescript-phan-4",
      "contents_short": "\n\nM√¨nh l√† TU·∫§N hi·ªán ƒëang l√† m·ªôt Full-stack Web Developer t·∫°i Tokyo üòä.\nN·∫øu b·∫°n th·∫•y Blog n√†y hay xin h√£y cho m√¨nh m·ªôt like v√† ƒëƒÉng k√Ω ƒë·ªÉ ·ªßng h·ªô m√¨nh nh√© üòâ.\n\nC√°ch s·ª≠ d·ª•ng Chain of Responsibility b·∫±ng TypeScript ƒë·ªÉ gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ th·ª±c t·∫ø trong c√°c project web.\n\nCh√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi lo·∫°t b√†i Design Patterns trong TypeScript, lo·∫°t b√†i n√†y m√¨nh s·∫Ω gi·ªõi thi·ªáu m·ªôt s·ªë Design Patterns h·ªØu √≠ch tro...",
      "contents": "![image.png](https://images.viblo.asia/1958d061-17b7-4a0e-915d-a36d09466071.png)\n\nM√¨nh l√† TU·∫§N hi·ªán ƒëang l√† m·ªôt Full-stack Web Developer t·∫°i Tokyo üòä.\nN·∫øu b·∫°n th·∫•y Blog n√†y hay xin h√£y cho m√¨nh m·ªôt like v√† ƒëƒÉng k√Ω ƒë·ªÉ ·ªßng h·ªô m√¨nh nh√© üòâ.\n\n**C√°ch s·ª≠ d·ª•ng Chain of Responsibility b·∫±ng TypeScript ƒë·ªÉ gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ th·ª±c t·∫ø trong c√°c project web.**\n\nCh√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi lo·∫°t b√†i **Design Patterns trong TypeScript**, lo·∫°t b√†i n√†y m√¨nh s·∫Ω gi·ªõi thi·ªáu m·ªôt s·ªë Design Patterns h·ªØu √≠ch trong ph√°t tri·ªÉn web b·∫±ng TypeScript.\n\nC√°c **Design Patterns** r·∫•t quan tr·ªçng ƒë·ªëi v·ªõi c√°c web developer v√† ch√∫ng ta c√≥ th·ªÉ code t·ªët h∆°n b·∫±ng c√°ch th√†nh th·∫°o ch√∫ng. Trong b√†i vi·∫øt n√†y, m√¨nh s·∫Ω s·ª≠ d·ª•ng **TypeScript** ƒë·ªÉ gi·ªõi thi·ªáu **Chain of Responsibility**.\n\nC√°c Design Patterns r·∫•t quan tr·ªçng ƒë·ªëi v·ªõi c√°c Dev web v√† ch√∫ng ta c√≥ th·ªÉ good code h∆°n b·∫±ng c√°ch th√†nh th·∫°o ch√∫ng. Trong b√†i vi·∫øt n√†y, m√¨nh s·∫Ω s·ª≠ d·ª•ng **TypeScript** ƒë·ªÉ gi·ªõi thi·ªáu **Chain of Responsibility** .\n\nChain of Responsibility\n----\n\n**Chain of Responsibility** l√† m·ªôt c√°ch ƒë·ªÉ tr√°nh gh√©p n·ªëi gi·ªØa `sender` v√† `receiver` c·ªßa c√°c request b·∫±ng c√°ch cho nhi·ªÅu ƒë·ªëi t∆∞·ª£ng x·ª≠ l√Ω request. Trong Chain of Responsibility, nhi·ªÅu ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c k·∫øt n·ªëi b·∫±ng m·ªôt tham chi·∫øu t·ª´ m·ªói ƒë·ªëi t∆∞·ª£ng ƒë·∫øn ƒë·ªëi t∆∞·ª£ng ti·∫øp theo c·ªßa n√≥ ƒë·ªÉ t·∫°o th√†nh m·ªôt chu·ªói (next,next,next...). C√°c request ƒë∆∞·ª£c truy·ªÅn d·ªçc theo chu·ªói cho ƒë·∫øn khi m·ªôt trong c√°c ƒë·ªëi t∆∞·ª£ng trong chu·ªói quy·∫øt ƒë·ªãnh x·ª≠ l√Ω request.\n\n![image.png](https://images.viblo.asia/3d2f43d8-1321-4c0f-9ebc-48c53b46a1ce.png)\n\nC√°c v·ªã tr√≠ kh√°c nhau trong c√¥ng ty c√≥ tr√°ch nhi·ªám v√† quy·ªÅn h·∫°n kh√°c nhau. L·∫•y v√≠ d·ª• v·ªÅ quy tr√¨nh ngh·ªâ c·ªßa m·ªôt c√¥ng ty, khi xin ngh·ªâ ch·ªâ c·∫ßn ƒë∆∞·ª£c s·ª± ƒë·ªìng √Ω c·ªßa t·ªï tr∆∞·ªüng, kh√¥ng c·∫ßn ph·∫£i chuy·ªÉn cho c·∫•p tr√™n v√† gi√°m ƒë·ªëc. N·∫øu m·ªôt li√™n k·∫øt trong **Chain of Responsibility** kh√¥ng th·ªÉ x·ª≠ l√Ω request hi·ªán t·∫°i, n·∫øu c√≥ li√™n k·∫øt ti·∫øp theo, request s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ti·∫øp ƒë·∫øn li√™n k·∫øt ti·∫øp theo ƒë·ªÉ x·ª≠ l√Ω.\n\nTrong qu√° tr√¨nh ph√°t tri·ªÉn ph·∫ßn m·ªÅm, ƒë·ªëi v·ªõi **Chain of Responsibility**, m·ªôt k·ªãch b·∫£n ·ª©ng d·ª•ng ph·ªï bi·∫øn l√† **middleware**. Ch√∫ng ta h√£y xem c√°ch s·ª≠ d·ª•ng **Chain of Responsibility** ƒë·ªÉ x·ª≠ l√Ω c√°c request.\n\nƒê·ªÉ hi·ªÉu r√µ h∆°n v·ªÅ ƒëo·∫°n code sau, tr∆∞·ªõc ti√™n ch√∫ng ta h√£y xem s∆° ƒë·ªì UML t∆∞∆°ng ·ª©ng:\n\n![image.png](https://images.viblo.asia/a30c54c5-8447-4b76-8837-5a04534b53eb.png)\n\nTrong h√¨nh tr√™n, ch√∫ng ta x√°c ƒë·ªãnh m·ªôt Interface `Handler`. Hai h√†m sau ƒë√¢y ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong Interface n√†y:\n\n*   **use(h: Handler): Handler** => D√πng ƒë·ªÉ ƒëƒÉng k√Ω handler (middleware)\n*   **get(url: string, callback: (data: any) => void): void** => ƒêƒÉng k√Ω get request handler\n\n**Handler interface**\n\n```javascript\ninterface Handler {\n  use(h: Handler): Handler;\n  get(url: string, callback: (data: any) => void): void;\n}\n```\n\nSau ƒë√≥, ch√∫ng ta ƒë·ªãnh nghƒ©a m·ªôt abstract Class `AbstractHandler`, g√≥i g·ªçn logic x·ª≠ l√Ω c·ªßa **Chain of Responsibility**. T·ª©c l√† k·∫øt h·ª£p c√°c tr√¨nh x·ª≠ l√Ω kh√°c nhau ƒë·ªÉ t·∫°o th√†nh m·ªôt chu·ªói tham chi·∫øu.\n\n**AbstractHandler abstract class**\n\n```javascript\nabstract class AbstractHandler implements Handler {\n  next!: Handler;\n  use(h: Handler) {\n    this.next = h;\n    return this.next;\n  }\n  get(url: string, callback: (data: any) => void) {\n    if (this.next) {\n      return this.next.get(url, callback);\n    }\n  }\n}\n```\n\nD·ª±a tr√™n abstract Class `AbstractHandler`, ch√∫ng ta ƒë·ªãnh nghƒ©a `AuthMiddleware` v√† `LoggerMidddleware` t∆∞∆°ng ·ª©ng. `AuthMiddleware` middleware ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ x·ª≠ l√Ω authentication user v√† `LoggerMidddleware` middleware ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ghi log cho t·ª´ng request.\n\n**AuthMiddleware class**\n\n```javascript\nclass AuthMiddleware extends AbstractHandler {\n  isAuthenticated: boolean;\n  constructor(username: string, password: string) {\n    super();\n    this.isAuthenticated = false;\n    if (username === \"bytefer\" && password === \"666\") {\n      this.isAuthenticated = true;\n    }\n  }\n  get(url: string, callback: (data: any) => void) {\n    if (this.isAuthenticated) {\n      return super.get(url, callback);\n    } else {\n      throw new Error(\"Not Authorized\");\n    }\n  }\n}\n```\n\n**LoggerMiddleware class**\n\n```javascript\nclass LoggerMiddleware extends AbstractHandler {\n  get(url: string, callback: (data: any) => void) {\n    console.log(`Request url is: ${url}`);\n    return super.get(url, callback);\n  }\n}\n```\n\nV·ªõi middleware `AuthMiddleware` v√† `LoggerMidddleware`, h√£y ƒë·ªãnh nghƒ©a m·ªôt `Route class` ƒë·ªÉ ƒëƒÉng k√Ω c√°c middleware n√†y.\n\n**Route class**\n\n```javascript\nclass Route extends AbstractHandler {\n  urlDataMap: { [key: string]: any };\n  constructor() {\n    super();\n    this.urlDataMap = {\n      \"/api/todos\": [\n        { title: \"Learn Design Pattern\" },\n      ],\n      \"/api/random\": () => Math.random(),\n    };\n  }\n get(url: string, callback: (data: any) => void) {\n    super.get(url, callback);\n  if (this.urlDataMap.hasOwnProperty(url)) {\n      const value = this.urlDataMap[url];\n      const result = typeof value === \"function\" ? value() : value;\n      callback(result);\n    }\n  }\n}\n```\n\nSau khi ƒë·ªãnh nghƒ©a `Route` Route class, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng n√≥ v√† ƒëƒÉng k√Ω c√°c middleware theo c√°ch sau:\n\n```javascript\nconst route = new Route();\nroute.use(new AuthMiddleware(\"bytefer\", \"666\"))\n .use(new LoggerMiddleware());\nroute.get(\"/api/todos\", (data) => {\n  console.log(JSON.stringify({ data }, null, 2));\n});\nroute.get(\"/api/random\", (data) => {\n  console.log(data);\n});\n```\n\n![image.png](https://images.viblo.asia/741b7268-5ff8-4491-b540-de4af0856d99.png)\n\nKhi b·∫°n ch·∫°y th√†nh c√¥ng ƒëo·∫°n code tr√™n, output t∆∞∆°ng ·ª©ng ƒë∆∞·ª£c hi·ªÉn th·ªã trong h√¨nh sau:\n\n![image.png](https://images.viblo.asia/3bf89619-0f33-40f2-bb3e-ffdb3933fb63.png)\n\nC√°c t√¨nh hu·ªëng s·ª≠ d·ª•ng c·ªßa **Chain of Responsibility**:\n\n*   Mu·ªën g·ª≠i request t·ªõi m·ªôt trong nhi·ªÅu ƒë·ªëi t∆∞·ª£ng m√† kh√¥ng ch·ªâ ƒë·ªãnh r√µ r√†ng ƒë·ªëi t∆∞·ª£ng nh·∫≠n request.\n*   C√≥ nhi·ªÅu ƒë·ªëi t∆∞·ª£ng c√≥ th·ªÉ x·ª≠ l√Ω m·ªôt request v√† ƒë·ªëi t∆∞·ª£ng n√†o x·ª≠ l√Ω request ƒë∆∞·ª£c x√°c ƒë·ªãnh t·ª± ƒë·ªông trong th·ªùi gian ch·∫°y v√† Client ch·ªâ c·∫ßn g·ª≠i request ƒë·∫øn Chain m√† th√¥i.\n\nRoundup\n----\nNh∆∞ m·ªçi khi, m√¨nh hy v·ªçng b·∫°n th√≠ch b√†i vi·∫øt n√†y v√† h·ªçc th√™m ƒë∆∞·ª£c ƒëi·ªÅu g√¨ ƒë√≥ m·ªõi.\n\nC·∫£m ∆°n v√† h·∫πn g·∫∑p l·∫°i c√°c b·∫°n trong nh·ªØng b√†i vi·∫øt ti·∫øp theo! üòç\n\nN·∫øu b·∫°n th·∫•y Blog n√†y hay xin h√£y cho m√¨nh m·ªôt like v√† ƒëƒÉng k√Ω ƒë·ªÉ ·ªßng h·ªô m√¨nh nh√©. Thank you.üòâ\n\nRef\n----\n*https://tuan200tokyo.blogspot.com/2022/11/blog54-design-patterns-chain-of.html",
      "published_at": "2022-12-03T01:56:59.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-03T02:15:08.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 4,
      "points": 0,
      "views_count": 2,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "vi",
      "is_video": false,
      "thumbnail_url": "https://images.viblo.asia/1958d061-17b7-4a0e-915d-a36d09466071.png",
      "user": {
        "data": {
          "id": 74229,
          "url": "https://viblo.asia/u/Clarence161095",
          "avatar": "82afa6c9-073b-419a-aceb-ae889b85c554.jpg",
          "name": "NGUY·ªÑN ANH TU·∫§N",
          "username": "Clarence161095",
          "followers_count": 129,
          "reputation": 1981,
          "posts_count": 54,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "design-patterns",
            "name": "Design Patterns",
            "primary": false,
            "image": "https://placehold.jp/16/16a085/ffffff/80x80.jpg?text=Design+Patterns&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "chain-of-responsibility-pattern",
            "name": "Chain of Responsibility Pattern",
            "primary": false,
            "image": "https://placehold.jp/16/d35400/ffffff/80x80.jpg?text=Chain+of+Responsibility+Pattern&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "typescript",
            "name": "TypeScript",
            "primary": false,
            "image": "https://placehold.jp/16/16a085/ffffff/80x80.jpg?text=TypeScript&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "javascript",
            "name": "JavaScript",
            "primary": false,
            "image": "https://placehold.jp/16/16a085/ffffff/80x80.jpg?text=JavaScript&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65689,
      "title": "T·ªïng quan v·ªÅ Kotlin Multiplatform Mobile (KMM)",
      "slug": "5pPLkGRyLRZ",
      "url": "https://viblo.asia/p/tong-quan-ve-kotlin-multiplatform-mobile-kmm-5pPLkGRyLRZ",
      "user_id": 105100,
      "moderation": null,
      "transliterated": "tong-quan-ve-kotlin-multiplatform-mobile-kmm",
      "contents_short": "1. Kotlin Multiplatform Mobile (KMM) l√† g√¨?\nTrong b√†i vi·∫øt n√†y, ch√∫ng ta s·∫Ω t√¨m hi·ªÉu Kotlin Multiplatform Mobile l√† g√¨ v√† c√≥ th·ªÉ s·ª≠ d·ª•ng n√≥ nh∆∞ th·∫ø n√†o trong d·ª± √°n c·ªßa m√¨nh. Ch√∫ng ta s·∫Ω xem c√°ch thi·∫øt l·∫≠p (set-up) m√¥i tr∆∞·ªùng v√† chu·∫©n b·ªã cho vi·ªác t·∫°o m·ªôt ·ª©ng d·ª•ng di ƒë·ªông ƒëa n·ªÅn t·∫£ng (cross-platform mobile application) ƒë·∫ßu ti√™n c·ªßa m√¨nh v·ªõi KMM! <br>\nV·∫≠y KMM l√† g√¨? KMM l√† vi·∫øt t·∫Øt c·ªßa Kotlin Mult...",
      "contents": "# 1. Kotlin Multiplatform Mobile (KMM) l√† g√¨?\nTrong b√†i vi·∫øt n√†y, ch√∫ng ta s·∫Ω t√¨m hi·ªÉu **Kotlin Multiplatform Mobile** l√† g√¨ v√† c√≥ th·ªÉ s·ª≠ d·ª•ng n√≥ nh∆∞ th·∫ø n√†o trong d·ª± √°n c·ªßa m√¨nh. Ch√∫ng ta s·∫Ω xem c√°ch thi·∫øt l·∫≠p (set-up) m√¥i tr∆∞·ªùng v√† chu·∫©n b·ªã cho vi·ªác t·∫°o m·ªôt ·ª©ng d·ª•ng di ƒë·ªông ƒëa n·ªÅn t·∫£ng (cross-platform mobile application) ƒë·∫ßu ti√™n c·ªßa m√¨nh v·ªõi KMM! <br>\nV·∫≠y KMM l√† g√¨? KMM l√† vi·∫øt t·∫Øt c·ªßa Kotlin Multiplatform Mobile. ƒê√¢y l√† m·ªôt SDK ƒë·ªÉ ph√°t tri·ªÉn di ƒë·ªông tr√™n c·∫£ iOS l·∫´n Android. N√≥ s·ª≠ d·ª•ng c√°c kh·∫£ nƒÉng ƒëa n·ªÅn t·∫£ng c·ªßa Kotlin, bao g·ªìm c√°c c√¥ng c·ª• (tools) v√† t√≠nh nƒÉng (features) kh√°c nhau ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ c·∫£i thi·ªán tr·∫£i nghi·ªám x√¢y d·ª±ng c√°c *mobile cross-platform applications* (H√¨nh 1). \n\n![](https://images.viblo.asia/1be87b9c-2237-4f44-981b-6563c2ed51d0.png)\n<div align=\"center\">H√¨nh 1: T·ªïng quan v·ªÅ Kotlin Multiplatform Mobile</div>\n<br>\nM√¨nh s·∫Ω n√≥i v·ªÅ t·∫•t c·∫£ c√°c c√¥ng c·ª• n√†y trong c√°c b√†i vi·∫øt s·∫Øp t·ªõi! D√π b·∫°n ƒëang c√≥ d·ª± ƒë·ªãnh b·∫Øt ƒë·∫ßu l√†m m·ªôt project hay c√≥ m·ªôt codebase ƒë√£ ƒë∆∞·ª£c vi·∫øt t·ª´ tr∆∞·ªõc, b·∫°n c√≥ th·ªÉ t√≠ch h·ª£p KMM m·ªôt c√°ch li·ªÅn m·∫°ch. Shared code (·ªü trong 1 project KMM th√¨ c√≥ 3 th∆∞ m·ª•c quan tr·ªçng l√† androidApp, iosApp v√† shared), ƒë∆∞·ª£c vi·∫øt b·∫±ng Kotlin, ƒë∆∞·ª£c bi√™n d·ªãch th√†nh JVM bytecode v·ªõi Kotlin / JVM (gi·ªëng nh∆∞ ph√°t tri·ªÉn Android th√¥ng th∆∞·ªùng) v√† c√°c t·ªáp nh·ªã ph√¢n native (native binaries) cho iOS v·ªõi Kotlin / Native, v√¨ v·∫≠y b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng c√°c m√¥-ƒëun KMM c·ªßa m√¨nh gi·ªëng nh∆∞ b·∫•t k·ª≥ th∆∞ vi·ªán di ƒë·ªông th√¥ng th∆∞·ªùng n√†o kh√°c. (H√¨nh 2)\n\n![](https://images.viblo.asia/31ab95ba-3502-4753-aaee-8fbfcecf5189.png)\n<div align=\"center\" >\n    H√¨nh 2: c∆° ch·∫ø v·∫≠n h√†nh Module KMM\n</div>\n<br>\n  \nƒêi·ªÅu ƒë√≥ c≈©ng c√≥ nghƒ©a l√† KMM s·∫Ω kh√¥ng √°p ƒë·∫∑t b·∫•t k·ª≥ h·∫°n ch·∫ø n√†o ƒë·ªëi v·ªõi c√°ch b·∫°n ph√°t tri·ªÉn giao di·ªán ng∆∞·ªùi d√πng c·ªßa ·ª©ng d·ª•ng. B·∫°n c√≥ th·ªÉ t·ª± do s·ª≠ d·ª•ng b·∫•t k·ª≥ phong c√°ch v√† khu√¥n kh·ªï n√†o b·∫°n mu·ªën, b·∫°n th√≠ch l√†m g√¨ th√¨ l√†m, bao g·ªìm c·∫£ nh·ªØng ki·ªÉu hi·ªán ƒë·∫°i nh·∫•t, ch·∫≥ng h·∫°n nh∆∞ Jetpack Compose cho Android ho·∫∑c SwiftUl cho iOS.  <br>\nM√¨nh tin r·∫±ng v·∫ª ƒë·∫πp th·∫≠t s·ª± c·ªßa KMM n·∫±m ·ªü t√≠nh linh ho·∫°t c·ªßa n√≥. KMM cho ph√©p b·∫°n chia s·∫ª nh·ªØng g√¨ b·∫°n mu·ªën chia s·∫ª! N√≥ ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ gi√∫p c√°c nh√† ph√°t tri·ªÉn t√°i s·ª≠ d·ª•ng (reuse) business logic c·ªßa h·ªç gi·ªØa c√°c n·ªÅn t·∫£ng di ƒë·ªông (mobile platforms), ch·ªâ vi·∫øt code d√†nh ri√™ng cho t·ª´ng n·ªÅn t·∫£ng khi c·∫ßn thi·∫øt, nh∆∞ tri·ªÉn khai native Ul ho·∫∑c khi l√†m vi·ªác v·ªõi c√°c API d√†nh ri√™ng cho n·ªÅn t·∫£ng (platform-specific APIs).\n\n![](https://images.viblo.asia/76fcc09e-b77b-4db0-b20b-dd2b0a9d2c98.png)\n<div align=\"center\" >\n    H√¨nh 3: Native code v√† Shared code\n</div>\n\n# 2. S·ª≠ d·ª•ng Kotlin Multiplatform\nKh·∫£ nƒÉng s·ª≠ d·ª•ng s·ª©c m·∫°nh c·ªßa t·ª´ng n·ªÅn t·∫£ng m√† kh√¥ng c·∫ßn b·∫•t k·ª≥ chi ph√≠ n√†o trong khi v·∫´n gi·ªØ logic tr·ª´u t∆∞·ª£ng cho ph√©p b·∫°n s·ª≠ d·ª•ng KMM theo b·∫•t k·ª≥ c√°ch n√†o b·∫°n mu·ªën. B·∫°n c√≥ th·ªÉ quy·∫øt ƒë·ªãnh ch·ªâ chia s·∫ª c√°c l·ªõp d·ªØ li·ªáu (H√¨nh 4 - Data/Core), s·ª≠ d·ª•ng c√°c th∆∞ vi·ªán ph·ªï bi·∫øn nh∆∞ Ktor ho·∫∑c SQLDelight.\n\n![Presentation.png](https://images.viblo.asia/9dee9037-154f-4d41-8967-c739b54351b0.png)\n<div align=\"center\" >\n    H√¨nh 4: C·∫•u tr√∫c m·ªôt Project KMM - KMM Module l√∫c n√†y ch·ªâ c√≥ Data/Core\n</div>\n<br>\nC√≥ th·ªÉ b·∫°n ƒë√£ x√¢y d·ª±ng ƒë∆∞·ª£c m·ªôt ·ª©ng d·ª•ng di ƒë·ªông t·ª´ tr∆∞·ªõc, trong tr∆∞·ªùng h·ª£p ƒë√≥ b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng KMM khi c·∫ßn tri·ªÉn khai m·ªôt s·ªë thu·∫≠t to√°n x·ª≠ l√Ω d·ªØ li·ªáu m·ªõi. Logic n√†y c√≥ th·ªÉ d·ªÖ d√†ng t√≠ch h·ª£p v√†o c√°c d·ª± √°n hi·ªán c√≥, ƒë·∫£m b·∫£o h√†nh vi gi·ªëng h·ªát nhau tr√™n c·∫£ hai n·ªÅn t·∫£ng. (H√¨nh 5 - Business / Domain)\n\n![Presentation.png](https://images.viblo.asia/8f4724b9-49c8-49d5-8328-576025738cc4.png)\n<div align=\"center\" >\n    H√¨nh 5: C·∫•u tr√∫c m·ªôt Project KMM - KMM Module l√∫c n√†y c√≥ th√™m Business / Domain\n</div>\n<br>\nN·∫øu c√°c ·ª©ng d·ª•ng iOS v√† Android c·ªßa b·∫°n ƒë·ªß gi·ªëng nhau, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng KMM ƒë·ªÉ chia s·∫ª logic tr√¨nh b√†y (H√¨nh 6 - Presentation), cho ph√©p b·∫°n s·ª≠ d·ª•ng m·ªôt tr√¨nh b√†y, m√¥ h√¨nh ch·∫ø ƒë·ªô xem ho·∫∑c b·ªô ƒëi·ªÅu khi·ªÉn ch·∫ø ƒë·ªô xem ho·∫∑c th·∫≠m ch√≠ logic ƒëi·ªÅu h∆∞·ªõng. Trong c√°c b√†i vi·∫øt ti·∫øp theo, ch√∫ng ta s·∫Ω xem x√©t c√°c d·ª± √°n v√† chi·∫øn l∆∞·ª£c chia s·∫ª kh√°c nhau. \n\n![Presentation.png](https://images.viblo.asia/a7834699-13a4-4639-a99f-046156e00956.png)\n<div align=\"center\" >\n    H√¨nh 6: C·∫•u tr√∫c m·ªôt Project KMM - KMM Module l√∫c n√†y c√≥ th√™m Presentation - ·ªü Native ch·ªâ hi·ªán th·ªã UI,c√°c Module kh√°c ƒë√£ c√≥ th·ªÉ l√†m vi·ªác tr·ª±c ti·∫øp t·∫°i KMM Module m√† kh√¥ng c·∫ßn ƒë·ª•ng ƒë·∫øn Native.\n</div>\n\n# 3. C·∫ßn c√≥ g√¨ ƒë·ªÉ X√¢y d·ª±ng KMM Project (Prerequisites)\nKh√°i ni·ªám v·∫≠y ƒë·ªß r·ªìi. H√£y n√≥i v·ªÅ nh·ªØng g√¨ ch√∫ng ta c·∫ßn ƒë·ªÉ b·∫Øt ƒë·∫ßu v·ªõi KMM. M√¨nh hy v·ªçng b·∫°n s·∫Ω h√†o h·ª©ng khi ƒë·ªçc b√†i vi·∫øt n√†y - n√≥ th·ª±c s·ª± kh√¥ng nhi·ªÅu v√† ta c√≥ th·ªÉ th·ª±c hi·ªán h·∫ßu h·∫øt c√°c thi·∫øt l·∫≠p ch·ªâ trong v√†i ph√∫t. Ph√°t tri·ªÉn mobile cross-platform applications y√™u c·∫ßu c·∫ßn c√≥ Xcode ƒë·ªÉ build ·ª®ng d·ª•ng iOS. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† b·∫°n s·∫Ω c·∫ßn MacBook v·ªõi h·ªá ƒëi·ªÅu h√†nh MacOS ƒë·ªÉ ph√°t tri·ªÉn c√°c ·ª©ng d·ª•ng iOS v·ªõi KMM, trong khi b·∫°n v·∫´n c√≥ th·ªÉ ch·∫°y ph·∫ßn ch·ªâ d√†nh cho Android tr√™n m√°y Windows ho·∫∑c Linux. B·∫°n c≈©ng s·∫Ω c·∫ßn Android Studio ƒë·ªÉ code b·∫±ng ng√¥n ng·ªØ l·∫≠p tr√¨nh Kotlin cho c·∫£ ·ª©ng d·ª•ng Android v√† *cross-platform module*. Ngo√†i ra, b·∫°n s·∫Ω c·∫ßn Gradle ƒë·ªÉ build t·∫•t c·∫£ m·∫•y c√°i ·ªü tr√™n. \n\n\nT·∫•t c·∫£ c√°c d·ª± √°n Kotlin Multiplatform ƒë·ªÅu ƒë∆∞·ª£c t·∫°o b·∫±ng plugin **Kotlin Multiplatform Gradle**. V√† cu·ªëi c√πng, ƒë·ªÉ s·ª≠ d·ª•ng Gradle, b·∫°n s·∫Ω c·∫ßn c√†i ƒë·∫∑t *Java Development Kit (jdk)* tr√™n m√°y c·ªßa m√¨nh.\n\nT√≥m l·∫°i, c√°c c√¥ng c·ª• c·∫ßn c√≥ g·ªìm:\n* Android Studio: ƒë·ªÉ t·∫°o multiplatform applications v√† run app tr√™n m√°y ·∫£o ho·∫∑c m√°y th·∫≠t.\n* XCode (ch·ªâ ch·∫°y tr√™n Macbook)\n* Gradle\n* Kotlin Multiplatform Mobile plugin\n* JDK\n* Kotlin plugin: Check n√≥ t∆∞∆°ng t·ª± nh∆∞ KMM Plugin, v√†o **Plugins | Installed.** Check Kotlin version ·ªü **Tools | Kotlin | Configure Kotlin Plugin Updates.**\n\nInstall JDK theo h∆∞·ªõng d·∫´n: https://www.geeksforgeeks.org/download-and-install-java-development-kit-jdk-on-windows-mac-and-linux/\n\nT·∫£i Xcode tr√™n appStore MacOS ƒë·ªÉ t·∫£i version m·ªõi nh·∫•t ho·∫∑c t·∫£i Xcode theo version https://xcodereleases.com/\n\nT·∫£i Android Studio ngay tr√™n https://developer.android.com/android-studio/download\n\nT·∫•t t·∫ßn t·∫≠t t√†i li·ªáu v·ªÅ KMM t·∫°i: https://kotlinlang.org/docs/multiplatform-mobile-getting-started.html\n# 4. Kotlin for Android Studio\nƒê·∫ßu ti√™n b·∫°n n√™n c√†i ƒë·∫∑t Plugin Kotlin Multiplatform Mobile cho Android Studio. \n\nC√°c b∆∞·ªõc c√†i ƒë·∫∑t nh∆∞ sau:\n\n1) Ch·∫°y App **Android Studio**\n\n2) Ch·ªçn **File -> Settings** (**Preferences** ƒë·ªëi v·ªõi M√°y MacOS )\n\n3) Plugins \n4) ·ªû Marketplace -> Search **Kotlin Multiplatform Mobile** -> Nh·∫•n **Install** (H√¨nh 7)\n\n![Screenshot 2022-12-02 at 20.41.20.png](https://images.viblo.asia/de9bb89b-e042-4dc9-a639-736f434bc447.png)\n\n<div align=\"center\" >\n    H√¨nh 7: C√†i ƒë·∫∑t Plugin Kotlin Multiplatform Mobile cho Android Studio\n</div>\n<br>\nPlugin n√†y cung c·∫•p t√≠ch h·ª£p v·ªõi tr√¨nh m√¥ ph·ªèng iOS v√† thi·∫øt b·ªã iOS trong Android Studio. B·∫°n s·∫Ω c√≥ th·ªÉ ch·∫°y v√† g·ª° l·ªói ·ª©ng d·ª•ng v√† th·ª≠ nghi·ªám c·ªßa m√¨nh tr√™n iOS t·ª´ Android Studio m√† kh√¥ng c·∫ßn ph·∫£i chuy·ªÉn ƒë·ªïi IDE trong khi l√†m vi·ªác tr√™n ph·∫ßn shared part c·ªßa code. Plugin c≈©ng cung c·∫•p c√°c tr√¨nh h∆∞·ªõng d·∫´n ti·ªán d·ª•ng ƒë·ªÉ t·∫°o c√°c KMM project m·ªõi ho·∫∑c th√™m m√¥-ƒëun v√†o c√°c d·ª± √°n Android hi·ªán c√≥. V·ªõi tr√¨nh h∆∞·ªõng d·∫´n ‚Äúnew project‚Äù, b·∫°n c√≥ th·ªÉ t·∫°o m·ªôt cross-platform mobile application s·∫µn s√†ng ƒë·ªÉ ch·∫°y ch·ªâ trong v√†i c√∫ nh·∫•p chu·ªôt!\n\nV·∫≠y l√† m√¥i tr∆∞·ªùng c·ªßa ch√∫ng ta ƒë√£ ƒë∆∞·ª£c thi·∫øt l·∫≠p, 2 h√¨nh 8 v√† 9 l√† h√¨nh ·∫£nh project s·ª≠ d·ª•ng KMM c·ªßa m√¨nh.\nC√°c b·∫°n c√≥ th·ªÉ tham kh·∫£o source code ·ªü ƒë√¢y: https://github.com/misterbo271/mpvKmmApp\n\n![Screenshot 2022-12-02 at 19.25.50.png](https://images.viblo.asia/29dac05f-8b5c-450d-922a-e406248c408c.png)\n<div align=\"center\" >\n    H√¨nh 8: Ch·∫°y iOS Simulator ngay tr√™n Android Studio m√† kh√¥ng c·∫ßn XCode\n</div>\n<br>\n\n![Screenshot 2022-12-02 at 19.28.27.png](https://images.viblo.asia/5dd440d2-03f8-4827-b568-9f4033923a0e.png)\n<div align=\"center\" >\n    H√¨nh 9: Kotlin Multiplatform Mobile Project\n</div>\n<br>\n\nC·∫£m ∆°n b·∫°n ƒë√£ ƒë·ªçc b√†i vi·∫øt, ch·ªù ƒë√≥n nh·ªØng n·ªôi dung v·ªÅ Kotlin, KMM trong c√°c b√†i vi·∫øt ti·∫øp theo nh√©.\n\n# Preferences\n* Get started with Kotlin Multiplatform Mobile, *Last modified: 21 October 2022*, url: https://kotlinlang.org/docs/multiplatform-mobile-getting-started.html\n* FAQ - What is Kotlin Multiplatform Mobile?, *Last modified: 04 November 2022*, url: https://kotlinlang.org/docs/multiplatform-mobile-faq.html",
      "published_at": "2022-12-02T13:52:48.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-03T02:22:02.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 9,
      "points": 1,
      "views_count": 18,
      "clips_count": 1,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "vi",
      "is_video": false,
      "thumbnail_url": "https://images.viblo.asia/1be87b9c-2237-4f44-981b-6563c2ed51d0.png",
      "user": {
        "data": {
          "id": 105100,
          "url": "https://viblo.asia/u/mienpv",
          "avatar": "ca64ebde-2d89-4f14-8a41-92429c2c507f.jpg",
          "name": "Mi√™n PV",
          "username": "mienpv",
          "followers_count": 0,
          "reputation": 7,
          "posts_count": 1,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "android",
            "name": "Android",
            "primary": false,
            "image": "https://placehold.jp/16/8e44ad/ffffff/80x80.jpg?text=Android&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "android-kotlin",
            "name": "android kotlin",
            "primary": false,
            "image": "https://placehold.jp/16/2980b9/ffffff/80x80.jpg?text=android+kotlin&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "android-va-ios",
            "name": "android v√† ios",
            "primary": false,
            "image": "https://placehold.jp/16/f39c12/ffffff/80x80.jpg?text=android+v√†+ios&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "androidios",
            "name": "AndroidiOS",
            "primary": false,
            "image": "https://placehold.jp/16/c0392b/ffffff/80x80.jpg?text=AndroidiOS&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "multiplatform",
            "name": "MultiPlatform",
            "primary": false,
            "image": "https://placehold.jp/16/8e44ad/ffffff/80x80.jpg?text=MultiPlatform&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65760,
      "title": "[K8S basic] Kubernetes Secrets",
      "slug": "zOQJwYrdVMP",
      "url": "https://viblo.asia/p/k8s-basic-kubernetes-secrets-zOQJwYrdVMP",
      "user_id": 78826,
      "moderation": null,
      "transliterated": "k8s-basic-kubernetes-secrets",
      "contents_short": "Secret l√† g√¨\nGi·ªõi thi·ªáu v·ªÅ Secret\nSecret t∆∞∆°ng t·ª± v·ªõi configmap, l√† m·ªôt t√†i nguy√™n m·ª©c namespace tr√™n k8s d√πng ƒë·ªÉ l∆∞u tr·ªØ c√°c d·ªØ li·ªáu d·∫°ng key-value. ƒêi·ªÉm kh√°c bi·ªát l·ªõn nh·∫•t gi·ªØa secret v√† configmap ƒë√≥ l√† secret sinh ra ƒë·ªÉ l∆∞u nh·ªØng th√¥ng tin nh·∫°y c·∫£m (sensitive data) nh∆∞ username, password, token... v√† c√°c th√¥ng tin n√†y s·∫Ω ƒë∆∞·ª£c m√£ h√≥a b·∫±ng base64 khi l∆∞u v√†o h·ªá th·ªëng.\n\nV·ªÅ c√°ch s·ª≠ d·ª•ng th√¨ g·∫ßn ...",
      "contents": "# Secret l√† g√¨\n## Gi·ªõi thi·ªáu v·ªÅ Secret\nSecret t∆∞∆°ng t·ª± v·ªõi configmap, l√† m·ªôt t√†i nguy√™n m·ª©c namespace tr√™n k8s d√πng ƒë·ªÉ l∆∞u tr·ªØ c√°c d·ªØ li·ªáu d·∫°ng key-value. ƒêi·ªÉm kh√°c bi·ªát l·ªõn nh·∫•t gi·ªØa secret v√† configmap ƒë√≥ l√† secret sinh ra ƒë·ªÉ l∆∞u nh·ªØng th√¥ng tin nh·∫°y c·∫£m (sensitive data) nh∆∞ username, password, token... v√† c√°c th√¥ng tin n√†y s·∫Ω ƒë∆∞·ª£c m√£ h√≥a b·∫±ng base64 khi l∆∞u v√†o h·ªá th·ªëng.\n\nV·ªÅ c√°ch s·ª≠ d·ª•ng th√¨ g·∫ßn nh∆∞ kh√¥ng c√≥ kh√°c bi·ªát g√¨ so v·ªõi configmap, ch√∫ng ta s·∫Ω v·∫´n c√≥ m·ªôt s·ªë c√°ch s·ª≠ d·ª•ng c∆° b·∫£n nh∆∞:\n- T·∫°o bi·∫øn m√¥i tr∆∞·ªùng t·ª´ key c·ªßa secret\n- S·ª≠ d·ª•ng secret nh∆∞ m·ªôt volume ch·ª©a c√°c file (v√≠ d·ª• c√°c file certificate, key..)\n\n![image.png](https://images.viblo.asia/c6d86210-ebf3-4f2c-96d1-57718a71cfd6.png)\n\n## C·∫•u tr√∫c file manifest c·ªßa Secret\nM·ªôt ƒë·ªëi t∆∞·ª£ng secret c√≥ d·∫°ng nh∆∞ sau:\n```\napiVersion: v1\nkind: Secret\nmetadata:\n  name: my-secret\ntype: Opaque\nstringData:\n  EMAIL: \"viettq@gmail.com\"\n  PASSWORD: \"Try2HackM3H3H3\"\n  secret.txt: |\n    My supersecret\n```\nC∆° b·∫£n th√¨ c·∫•u tr√∫c n√†y kh√° gi·ªëng v·ªõi configmap, nh∆∞ng n√≥ c√≥ th√™m m·ªôt tham s·ªë \"type\". \n\n**Secret c√≥ nhi·ªÅu lo·∫°i kh√°c nhau cho c√°c m·ª•c ƒë√≠ch s·ª≠ d·ª•ng kh√°c nhau:**\n![image.png](https://images.viblo.asia/4c8286af-9bf9-476c-8cfa-4375616d4000.png)\n\nTh√¥ng th∆∞·ªùng th√¨ ch√∫ng ta s·∫Ω l√†m vi·ªác th∆∞·ªùng xuy√™n nh·∫•t v·ªõi lo·∫°i secret l√† Opaque. Trong b√†i n√†y ch√∫ng ta s·∫Ω t√¨m hi·ªÉu c√°ch t·∫°o v√† s·ª≠ d·ª•ng lo·∫°i secret n√†y.\n\n\n# C√°c usecase s·ª≠ d·ª•ng secret\n## C√°c c√°ch t·∫°o secret\nC√≥ m·ªôt s·ªë c√°ch ph·ªï bi·∫øn d√πng ƒë·ªÉ t·∫°o secret t·ª´ c√¢u l·ªánh nh∆∞ sau:\n- T·∫°o t·ª´ng gi√° tr·ªã key/value c·ª• th·ªÉ\n- T·∫°o t·ª´ file\n- T·∫°o t·ª´ folder\n- T·∫°o t·ª´ file v√† l∆∞u v√†o kh√≥a m·ªõi\n- T·∫°o t·ª´ file env (file env ch·ª©a c√°c th√¥ng tin d·∫°ng key:value t∆∞∆°ng t·ª± v·ªõi configmap)\n\n![image.png](https://images.viblo.asia/79204994-ab36-4ac2-9f32-0882feacf9be.png)\n\n### T·ªïng h·ª£p l·ªánh t·∫°o secret\n**T·∫°o secret t·ª´ gi√° tr·ªã c·ª• th·ªÉ**:\n```\nkubectl -n [namespace] create secret generic [secret-name] --from-literal [key1=value1] --from-literal [key2=value2] --from-literal [keyN=valueN]\n```\n**T·∫°o secret t·ª´ file** ***filename***:\n```\nkubectl -n [namespace] create secret generic [secret-name] --from-file [filename]\n```\n\n**T·∫°o secret t·ª´ th∆∞ m·ª•c** ***config-dir***:\n```\nkubectl -n [namespace] create secret generic [secret-name] --from-file [secret-dir]\n```\n**T·∫°o secret t·ª´ file bi·∫øn m√¥i tr∆∞·ªùng c√≥ t√™n** ***env-file***:\n```\nkubectl -n [namespace] create secret generic [secret-name] --from-env-file [env-file]\n```\n**Ki·ªÉm tra n·ªôi dung c·ªßa secret v·ª´a t·∫°o**:\n```\nkubectl -n [namespace] get secret [secret-name] -oyaml\n```\n\n### T·∫°o secret b·∫±ng c√°ch g√°n gi√° tr·ªã t·ª´ng key-value c·ª• th·ªÉ (from-literal)\n**V√≠ d·ª•:**\n```\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo create secret generic sec-from-literal --from-literal USER=viettq --from-literal PASSWORD=\"VeryHard2H@ck\"\nsecret/sec-from-literal created\n```\n**Ki·ªÉm tra k·∫øt qu·∫£ t·∫°o secret:**\n```\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo get secrets sec-from-literal -oyaml\n```\n```\napiVersion: v1\ndata:\n  PASSWORD: VmVyeUhhcmQySEBjaw==\n  USER: dmlldHRx\nkind: Secret\nmetadata:\n  name: sec-from-literal\n  namespace: secret-demo  \ntype: Opaque\n```\n**C√°c b·∫°n s·∫Ω th·∫•y gi√° tr·ªã c·ªßa 2 key USER v√† PASSWORD ƒë√£ b·ªã m√£ h√≥a. ƒê·ªÉ xem n·ªôi dung ta ph·∫£i gi·∫£i m√£ b·∫±ng base64:**\n```\n[sysadmin@vtq-cicd secret]$ echo \"VmVyeUhhcmQySEBjaw==\" |base64 -d\nVeryHard2H@ck\n```\n\n### T·∫°o secret t·ª´ file (s·ª≠ d·ª•ng n·ªôi dung file)\nT·∫°o m·ªôt file c√≥ n·ªôi dung nh∆∞ sau:\n```\ncat <<EOF>> secret-file.conf\n> USER=\"viettq\"\n> PASS=\"ABC_123456\"\n> EOF\n```\nT·∫°o secret t·ª´ file c√≥ t√™n `secret-file.conf` v·ªõi keyword l√† `--from-file=file-name`:\n```\nkubectl -n secret-demo create secret generic sec-from-file --from-file=secret-file.conf\n```\nK·∫øt qu·∫£:\n```\nkubectl -n secret-demo get secret sec-from-file -oyaml\n```\n\n```\napiVersion: v1\ndata:\n  secret-file.conf: VVNFUj0idmlldHRxIgpQQVNTPSJBQkNfMTIzNDU2Igo=\nkind: Secret\nmetadata:  \n  name: sec-from-file\n  namespace: secret-demo  \ntype: Opaque\n```\nK·∫øt qu·∫£ ta ƒë√£ t·∫°o m·ªôt secret c√≥ **key** c√≥ t√™n l√† t√™n file, **value** l√† n·ªôi dung file. N·ªôi dung file ƒë√£ ƒë∆∞·ª£c m√£ h√≥a d·∫°ng base64.\n\n### T·∫°o secret t·ª´ m·ªôt th∆∞ m·ª•c ch·ª©a c√°c file \nC√°ch t·∫°o n√†y c≈©ng th∆∞·ªùng d√πng khi ta c·∫ßn g√°n c·∫£ m·ªôt th∆∞ m·ª•c ch·ª©a c√°c file v√†o secret v√† sau n√†y s·∫Ω ƒë∆∞·ª£c mount v√†o Pod ƒë·ªÉ s·ª≠ d·ª•ng d∆∞·ªõi d·∫°ng file v√† volumes. Ta th∆∞·ªùng g·∫∑p v·ªõi case l√† th∆∞ m·ª•c ch·ª© file cert (.crt) v√† key (.key).\n\nT·∫°o th∆∞ m·ª•c v√† c√°c file config m·∫´u trong ƒë√≥ c√≥ n·ªôi dung nh∆∞ sau:\n```\n[sysadmin@vtq-cicd]$ mkdir secret-dir\n[sysadmin@vtq-cicd]$ cd secret-dir\n[sysadmin@vtq-cicd secret-dir]$ ll\ntotal 8\n-rw-rw-r-- 1 sysadmin sysadmin 26 Nov 28 21:39 login-policy.conf\n-rw-rw-r-- 1 sysadmin sysadmin 55 Nov 28 21:37 password-policy.conf\n[sysadmin@vtq-cicd secret-dir]$ cat login-policy.conf\nlock_after=5\nlock_time=60\n[sysadmin@vtq-cicd secret-dir]$ cat password-policy.conf\npassword_length=8\nexpire_day=30\nspecial_character=true\n```\n\nNh∆∞ v·∫≠y ·ªü th∆∞ m·ª•c `secret-dir` ƒëang c√≥ 2 file config c√≥ t√™n `login-policy.conf` v√† `password-policy.conf`.\nTa s·∫Ω t·∫°o secret t·ª´ th∆∞ m·ª•c tr√™n ƒë·ªÉ l∆∞u c·∫£ 2 file config n√†y v√†o secret:\n```\n[sysadmin@vtq-cicd ]$ ls -lrt\ndrwxrwxr-x 2 sysadmin sysadmin  59 Nov 28 21:39 secret-dir\n[sysadmin@vtq-cicd ]$ kubectl -n secret-demo create secret generic sec-from-dir --from-file=secret-dir\n```\nK·∫øt qu·∫£:\n```\nkubectl -n secret-demo get secret sec-from-dir -oyaml\n```\n```\napiVersion: v1\ndata:\n  login-policy.conf: bG9ja19hZnRlcj01CmxvY2tfdGltZT02MAo=\n  password-policy.conf: cGFzc3dvcmRfbGVuZ3RoPTgKZXhwaXJlX2RheT0zMApzcGVjaWFsX2NoYXJhY3Rlcj10cnVlCg==\nkind: Secret\nmetadata: \n  name: sec-from-dir\n  namespace: secret-demo  \ntype: Opaque\n \n```\nNh∆∞ v·∫≠y secret ƒë∆∞·ª£c t·∫°o ra v·ªõi 2 key l√† t√™n c·ªßa 2 file trong th∆∞ m·ª•c m√† ch√∫ng ta t·∫°o config. Value c·ªßa c√°c key ƒë√≥ ch√≠nh l√† n·ªôi dung c·ªßa file.\n\n### T·∫°o secret t·ª´ file bi·∫øn m√¥i tr∆∞·ªùng\nS·ª≠ d·ª•ng trong tr∆∞·ªùng h·ª£p ta ƒë√£ c√≥ file bi·∫øn m√¥i tr∆∞·ªùng c√≥ n·ªôi dung d·∫°ng key=value v√† mu·ªën t·∫°o ra secret v·ªõi c√°c key/value t∆∞∆°ng ·ª©ng v·ªõi file m√¥i tr∆∞·ªùng.\n\nT·∫°o file bi·∫øn m√¥i tr∆∞·ªùng m·∫´u:\n```\n[sysadmin@vtq-cicd secret]$ cat sec-env.conf\nUSER=viettq\nPASS=Abc_123456\n```\nTh·ª±c hi·ªán l·ªánh t·∫°o secret v·ªõi tham s·ªë `--from-env-file=`\n```\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo create secret generic sec-from-env-file --from-env-file=sec-env.conf\nsecret/sec-from-env-file created\n```\nKi·ªÉm tra k·∫øt qu·∫£:\n```\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo get secrets sec-from-env-file -oyaml\n```\n```\napiVersion: v1\ndata:\n  PASS: QWJjXzEyMzQ1Ng==\n  USER: dmlldHRx\nkind: Secret\nmetadata:\n  name: sec-from-env-file\n  namespace: secret-demo  \ntype: Opaque\n```\n\nNh∆∞ v·∫≠y m·ªôt bi·∫øn m√¥i tr∆∞·ªùng t∆∞∆°ng ·ª©ng s·∫Ω l√† m·ªôt key-value trong secret. N√≥ kh√°c v·ªõi vi·ªác t·∫°o secret t·ª´ file th√¥ng th∆∞·ªùng th√¨ t√™n file l√† key, n·ªôi dung file l√† value\n\n### T·∫°o secret t·ª´ m·ªôt file v√†o m·ªôt key x√°c ƒë·ªãnh\nTrong tr∆∞·ªùng h·ª£p ta mu·ªën t·∫°o secret t·ª´ n·ªôi dung m·ªôt file t√™n l√† A, nh∆∞ng ta kh√¥ng mu·ªën t√™n c·ªßa key trong secret l√† t√™n c·ªßa file A m√† l√† m·ªôt t√™n g√¨ ƒë√≥ g·ª£i nh·ªõ h∆°n, th√¨ ta s·∫Ω th·ª±c hi·ªán theo c√°ch n√†y.\n\nT·∫°o file m·∫´u:\n```\n[sysadmin@vtq-cicd secret]$ cat secret-file.conf\nUSER=\"viettq\"\nPASS=\"ABC_123456\"\n```\nSau ƒë√≥ ta s·∫Ω t·∫°o m·ªôt secret c√≥ key l√† **my-secret-key** v√† value l√† n·ªôi dung file tr√™n:\n```\nkubectl -n secret-demo create secret generic sec-from-file-to-key --from-file=my-secret-key=secret-file.conf\nsecret/sec-from-file-to-key created\n```\nK·∫øt qu·∫£:\n\n```\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo get secret sec-from-file-to-key -oyaml\n```\n```\napiVersion: v1\ndata:\n  my-secret-key: VVNFUj0idmlldHRxIgpQQVNTPSJBQkNfMTIzNDU2Igo=\nkind: Secret\nmetadata:\n  name: sec-from-file-to-key\n  namespace: secret-demo\ntype: Opaque\n```\nC√°c b·∫°n c√≥ th·ªÉ th·∫•y, n·∫øu t·∫°o secret t·ª´ file th√¥ng th∆∞·ªùng th√¨ t√™n key s·∫Ω l√† t√™n c·ªßa file. C√≤n d√πng c√°ch n√†y tao c√≥ th·ªÉ set t√™n key theo √Ω mu·ªën.\n\n## S·ª≠ d·ª•ng secret trong Pod\n### S·ª≠ d·ª•ng key-value c·ª• th·ªÉ trong secret th√†nh bi·∫øn m√¥i tr∆∞·ªùng trong Pod\nT·∫°o file manifest `sec-as-env.yaml` c√≥ n·ªôi dung nh∆∞ sau:\n```\napiVersion: v1\nkind: Pod\nmetadata:\n  name: sec-as-env\nspec:\n  containers:\n  - name: env-print-demo\n    image: busybox\n    env:\n    - name: USER\n      valueFrom:\n        secretKeyRef:\n          name: sec-from-literal\n          key: USER\n    - name: PASSWORD\n      valueFrom:\n        secretKeyRef:\n          name: sec-from-literal\n          key: PASSWORD    \n    command: [\"sh\",\"-c\",\"echo user=$(USER) password=$(PASSWORD);sleep 365d\"]\n```\nT·∫°o pod v√†o h·ªá th·ªëng:\n```\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo apply -f sec-as-env.yaml\npod/sec-as-env created\n```\nKi·ªÉm tra bi·∫øn m√¥i tr∆∞·ªùng b√™n trong Pod ƒë√£ nh·∫≠n ƒë√∫ng value t·ª´ secret hay ch∆∞a:\n```\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo exec -it sec-as-env -- env |egrep \"USER|PASS\"\nUSER=viettq\nPASSWORD=VeryHard2H@ck\n```\nNh∆∞ v·∫≠y trong Pod ƒë√£ c√≥ 2 bi·∫øn m√¥i tr∆∞·ªùng l√† USER v√† PASSWORD l·∫•y gi√° tr·ªã t·ª´ gi√° tr·ªã c·ªßa key trong secret.\n\n### S·ª≠ d·ª•ng t·∫•t c·∫£ key-value trong secret th√†nh bi·∫øn m√¥i tr∆∞·ªùng trong Pod\nS·ª≠ d·ª•ng khi ta mu·ªën mapping to√†n b·ªô c√°c key-value c·ªßa m·ªôt secret v√†o th√†nh bi·∫øn m√¥i tr∆∞·ªùng trong Pod lu√¥n. Thay v√¨ ta ph·∫£i √°nh x·∫° t·ª´ng key trong secret v√† th√†nh m·ªôt bi·∫øn m√¥i tr∆∞·ªùng m·ªõi trong Pod.\n\nTa s·∫Ω s·ª≠ d·ª•ng t·∫•t c·∫£ c√°c key-value c·ªßa secret `sec-from-literal` th√†nh c√°c bi·∫øn m√¥i tr∆∞·ªùng trong Pod b·∫±ng c√°ch khai b√°o file manifest `pod-map-sec.yaml` nh∆∞ sau:\n```\napiVersion: v1\nkind: Pod\nmetadata:\n  name: pod-map-sec\nspec:\n  containers:\n    - name: pod-map-sec\n      image: busybox\n      command: [\"sh\",\"-c\",\"echo user=$(USER) password=$(PASSWORD);sleep 365d\"]\n      envFrom:        \n        - secretRef:\n            name: sec-from-literal\n  restartPolicy: Never\n```\nT·∫°o Pod:\n```\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo apply -f pod-map-sec.yaml\npod/pod-map-sec created\n```\nKi·ªÉm tra k·∫øt qu·∫£ c√°c bi·∫øn m√¥i tr∆∞·ªùng trong Pod:\n```\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo exec -it  pod-map-sec -- env |egrep \"USER|PASS\"\nPASSWORD=VeryHard2H@ck\nUSER=viettq\n```\nNh∆∞ v·∫≠y to√†n b·ªô c√°c key-value c·ªßa secret ƒë∆∞·ª£c d√πng th√†nh bi·∫øn m√¥i tr∆∞·ªùng trong Pod. \n\n### Mount secret d∆∞·ªõi d·∫°ng volume trong Pod ƒë·ªÉ s·ª≠ d·ª•ng n·ªôi dung file  trong secret\nB√™n tr√™n ta ƒë√£ t·∫°o m·ªôt secret nh∆∞ v·∫≠y c√≥ t√™n **sec-from-dir**\n```\n[sysadmin@vtq-cicd secret]$ k -n secret-demo get secret sec-from-dir -oyaml\n```\n```\napiVersion: v1\ndata:\n  login-policy.conf: bG9ja19hZnRlcj01CmxvY2tfdGltZT02MAo=\n  password-policy.conf: cGFzc3dvcmRfbGVuZ3RoPTgKZXhwaXJlX2RheT0zMApzcGVjaWFsX2NoYXJhY3Rlcj10cnVlCg==\nkind: Secret\nmetadata:  \n  name: sec-from-dir\n  namespace: secret-demo  \ntype: Opaque\n```\nT·∫°o Pod s·ª≠ d·ª•ng secret **sec-from-dir** v√† mount v√†o th√†nh volume trong Pod. Khai b√°o file manifest `pod-sec-dir.yaml` cho Pod nh∆∞ sau:\n```\napiVersion: v1\nkind: Pod\nmetadata:\n  name: pod-sec-dir\nspec:\n  containers:\n  - name: env-print-demo\n    image: busybox\n    command: [\"sh\",\"-c\",\"sleep 365d\"]    \n    volumeMounts:\n    - name: secret-volume\n      mountPath: \"/app/config\"\n      readOnly: true\n  volumes:\n      - name: secret-volume\n        secret:\n          name: sec-from-dir\n          items:\n          - key: \"login-policy.conf\"\n            path: \"login-policy.conf\"\n          - key: \"password-policy.conf\"\n            path: \"password-policy.conf\"  \n```\nV·ªõi c√°ch khai b√°o Pod nh∆∞ tr√™n, ta ƒë√£ mount ƒë∆∞·ª£c n·ªôi dung file **login-policy.conf** v√†o ƒë∆∞·ªùng d·∫´n **/app/config/login-policy.conf** trong container c·ªßa Pod.\n\nT∆∞∆°ng t·ª± mount n·ªôi dung file **password-policy.conf** v√†o ƒë∆∞·ªùng d·∫´n **/app/config/password-policy.conf** trong container c·ªßa Pod.\n\nT·∫°o Pod t·ª´ file manifest tr√™n:\n```\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo apply -f pod-sec-dir.yaml\npod/pod-sec-dir created\n```\n\n**Ki·ªÉm tra trong Pod xem ƒë√£ mount ƒë∆∞·ª£c n·ªôi dung file trong secret v√†o Pod hay ch∆∞a:**\n```\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo exec -it  pod-sec-dir -- ls -lrt /app/config\ntotal 0\nlrwxrwxrwx    1 root     root            27 Dec  2 11:16 password-policy.conf -> ..data/password-policy.conf\nlrwxrwxrwx    1 root     root            24 Dec  2 11:16 login-policy.conf -> ..data/login-policy.conf\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo exec -it  pod-sec-dir -- cat /app/config/password-policy.conf\npassword_length=8\nexpire_day=30\nspecial_character=true\n[sysadmin@vtq-cicd secret]$ kubectl -n secret-demo exec -it  pod-sec-dir -- cat /app/config/login-policy.conf\nlock_after=5\nlock_time=60\n```\nNh∆∞ v·∫≠y ta ƒë√£ mount ƒë∆∞·ª£c n·ªôi dung file config v√†o trong Pod b·∫±ng c√°ch s·ª≠ d·ª•ng secret.\n\nTrong th·ª±c t·∫ø tri·ªÉn khai ·ª©ng d·ª•ng th√¨ configmap v√† secret l√† kh√¥ng th·ªÉ thi·∫øu. Qua b√†i n√†y hy v·ªçng c√°c b·∫°n s·∫Ω c√≥ c√°i nh√¨n r√µ h∆°n v·ªÅ secret v√† c√°c c√°ch s·ª≠ d·ª•ng c·ªßa secret t·ª´ ƒë√≥ s·∫Ω √°p d·ª•ng ƒë∆∞·ª£c v√†o c√¥ng vi·ªác c·ªßa m√¨nh n·∫øu c√≥.",
      "published_at": "2022-12-02T11:33:00.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-03T01:55:02.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 7,
      "points": 0,
      "views_count": 17,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "vi",
      "is_video": false,
      "thumbnail_url": "https://images.viblo.asia/c6d86210-ebf3-4f2c-96d1-57718a71cfd6.png",
      "user": {
        "data": {
          "id": 78826,
          "url": "https://viblo.asia/u/rockman88v",
          "avatar": "3a181c0a-3ec1-4368-80c3-47ad6b64922a.jpeg",
          "name": "Tr·ªãnh Qu·ªëc Vi·ªát",
          "username": "rockman88v",
          "followers_count": 477,
          "reputation": 14601,
          "posts_count": 38,
          "banned_at": null,
          "level_partner": "gold",
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "contentcreator",
            "name": "ContentCreator",
            "primary": false,
            "image": "https://placehold.jp/16/2980b9/ffffff/80x80.jpg?text=ContentCreator&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "kubernetes",
            "name": "Kubernetes",
            "primary": false,
            "image": "https://placehold.jp/16/2980b9/ffffff/80x80.jpg?text=Kubernetes&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "viettq",
            "name": "viettq",
            "primary": false,
            "image": "https://placehold.jp/16/d35400/ffffff/80x80.jpg?text=viettq&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "secret",
            "name": "Secret",
            "primary": false,
            "image": "https://placehold.jp/16/27ae60/ffffff/80x80.jpg?text=Secret&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65736,
      "title": "[RASA 3] - B√†i 2: Nh√∫ng Chatbot Rasa v√†o website UI",
      "slug": "EbNVQZnW4vR",
      "url": "https://viblo.asia/p/rasa-3-bai-2-nhung-chatbot-rasa-vao-website-ui-EbNVQZnW4vR",
      "user_id": 103686,
      "moderation": null,
      "transliterated": "rasa-3-bai-2-nhung-chatbot-rasa-vao-website-ui",
      "contents_short": "B√†i tr∆∞·ªõc m√¨nh ƒë√£ th·ª±c h√†nh l√†m quen v·ªõi Rasa 3 v√† d·∫°y chatbot ch√†o h·ªèi c∆° b·∫£n.\nTuy nhi√™n chatbot m√† d√πng giao di·ªán command line th√¨ nh√¨n c≈©ng h∆°i ch√°n n√™n m√¨nh s·∫Ω nh√∫ng Chatbot rasa v√†o giao di·ªán website.\n\nV√¨ m·ª•c ƒë√≠ch b√†i n√†y ch·ªâ l√† c√≥ m·ªôt giao di·ªán chat thay th·∫ø command line cho ƒë·∫πp th√¥i n√™n m√¨nh s·∫Ω l√†m theo c√°ch ƒë∆°n gi·∫£n v√† nhanh nh·∫•t c√≥ th·ªÉ, kh√¥ng ƒëi s√¢u v√†o c√°c config, n·∫øu mu·ªën hi·ªÉu s√¢u h∆°...",
      "contents": "B√†i tr∆∞·ªõc m√¨nh ƒë√£ th·ª±c h√†nh [l√†m quen v·ªõi Rasa 3 v√† d·∫°y chatbot ch√†o h·ªèi c∆° b·∫£n](https://viblo.asia/p/rasa-3-bai-1-lam-quen-rasa-3-tao-chatbot-chao-hoi-don-gian-Ny0VG9ZYJPA).\nTuy nhi√™n chatbot m√† d√πng giao di·ªán command line th√¨ nh√¨n c≈©ng h∆°i ch√°n n√™n m√¨nh s·∫Ω nh√∫ng Chatbot rasa v√†o giao di·ªán website.\n\nV√¨ m·ª•c ƒë√≠ch b√†i n√†y ch·ªâ l√† c√≥ m·ªôt giao di·ªán chat thay th·∫ø command line cho ƒë·∫πp th√¥i n√™n m√¨nh s·∫Ω l√†m theo c√°ch ƒë∆°n gi·∫£n v√† nhanh nh·∫•t c√≥ th·ªÉ, kh√¥ng ƒëi s√¢u v√†o c√°c config, n·∫øu mu·ªën hi·ªÉu s√¢u h∆°n b·∫°n c√≥ th·ªÉ xem th√™m ·ªü [trang t√†i li·ªáu c·ªßa Rasa](https://rasa.com/docs/rasa/connectors/your-own-website) nh√©.\n\n# Build Websocket Rasa\n**B∆∞·ªõc 1**: Trong file credentials.yml th√™m ƒëo·∫°n code sau:\n```\nsocketio:\n  user_message_evt: user_uttered\n  bot_message_evt: bot_uttered\n  session_persistence: true\n```\nRasa c√≥ h·ªó tr·ª£ Authentication cho qu√° tr√¨nh truy·ªÅn n·ªôi dung chat n·ªØa nh∆∞ng ·ªü b√†i n√†y m√¨nh ch∆∞a mu·ªën ƒëi s√¢u, b·∫°n c√≥ th·ªÉ xem th√™m ·ªü trang ch√≠nh c·ªßa Rasa m√¨nh ƒë·ªÉ link ƒë∆∞·ªõi ph·∫ßn \"T√†i li·ªáu tham kh·∫£o\".\n\n**B∆∞·ªõc 2**: Run Rasa server d√πng l·ªánh sau:\n```\nrasa run --cors \"*\"\n```\nM·∫∑c ƒë·ªãnh Rasa s·∫Ω start server tr√™n http://0.0.0.0:5005\n\n# Nh√∫ng Rasa \nCh√®n ƒëo·∫°n code sau v√†o website c·ªßa b·∫°n:\n```\n<div id=\"rasa-chat-widget\" data-websocket-url=\"http://localhost:5005\"></div>\n<script src=\"https://unpkg.com/@rasahq/rasa-chat\" type=\"application/javascript\"></script>\n```\nThu·ªôc t√≠nh **data-websocket-url** ƒëi·ªÅn url Websocket Rasa ƒë√£ build.\n\nL√Ω do m√¨nh d√πng \"http://localhost:5005\" ch·ª© kh√¥ng ph·∫£i \"http://0.0.0.0:5005\" l√† do khi ch·∫°y ·ªü m√°y m√¨nh b·ªã b√°o l·ªói \"Connection refused\" n√™n m√¨nh ph·∫£i map host. N·∫øu b·∫°n d√πng \"http://0.0.0.0:5005\" kh√¥ng l·ªói th√¨ c·ª© d√πng nh√©.\n\nTh√¥ng tin map host c·ªßa m√¨nh nh∆∞ sau:\n```\n0.0.0.0 localhost\n```\n\nN·∫øu b·∫°n ch∆∞a build s·∫µn m·ªôt website th√¨ c≈©ng kh√¥ng sao, ch·ªâ c·∫ßn t·∫°o m·ªôt file html c√≥ n·ªôi dung nh∆∞ sau:\n```\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\">\n    <title>Rasa ChatBot UI</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\n</head>\n  <body>\n    <h1>Rasa ChatBot UI</h1>\n    <div id=\"rasa-chat-widget\" data-websocket-url=\"http://localhost:5005/\"></div>\n    <script src=\"https://unpkg.com/@rasahq/rasa-chat\" type=\"application/javascript\"></script>\n\n  </body>\n</html>\n```\nM·ªü file html v·ª´a t·∫°o l√™n b·∫±ng tr√¨nh duy·ªát b·∫•t k·ª≥ v√† test chat c√°c c√¢u ch√†o h·ªèi m√¨nh ƒë√£ hu·∫•n luy·ªán cho bot ·ªü b√†i tr∆∞·ªõc v√† xem ph·∫£n h·ªìi.\n\nK·∫øt qu·∫£ s·∫Ω nh∆∞ h√¨nh sau:\n\n![image.png](https://images.viblo.asia/c9426fcf-33ee-4e8f-91ae-a9264c950599.png)\n\nNgo√†i website Rasa c√≤n h·ªó tr·ª£ t√≠ch h·ª£p chatbot l√™n nhi·ªÅu k√™nh kh√°c nh∆∞: Facebook Messenger, Telegram,... m√¨nh s·∫Ω c√πng t√¨m hi·ªÉu sau nh√©.\n\n# T√†i li·ªáu tham kh·∫£o\nhttps://rasa.com/docs/rasa/connectors/your-own-website",
      "published_at": "2022-12-02T11:31:22.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-03T01:26:01.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 2,
      "points": 0,
      "views_count": 9,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "vi",
      "is_video": false,
      "thumbnail_url": "https://images.viblo.asia/c9426fcf-33ee-4e8f-91ae-a9264c950599.png",
      "user": {
        "data": {
          "id": 103686,
          "url": "https://viblo.asia/u/itkiwi",
          "avatar": "1af90d0c-0709-4cfb-8496-5cb2d59ce3e2.jpg",
          "name": "Tuy√™n V√µ",
          "username": "itkiwi",
          "followers_count": 0,
          "reputation": 4,
          "posts_count": 2,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "chatbot",
            "name": "ChatBot",
            "primary": false,
            "image": "https://placehold.jp/16/16a085/ffffff/80x80.jpg?text=ChatBot&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "rasa",
            "name": "Rasa",
            "primary": false,
            "image": "https://placehold.jp/16/c0392b/ffffff/80x80.jpg?text=Rasa&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "rasa3",
            "name": "Rasa3",
            "primary": false,
            "image": "https://placehold.jp/16/f39c12/ffffff/80x80.jpg?text=Rasa3&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "rasa-frontend",
            "name": "rasa frontend",
            "primary": false,
            "image": "https://placehold.jp/16/8e44ad/ffffff/80x80.jpg?text=rasa+frontend&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "rasa-socket",
            "name": "Rasa socket",
            "primary": false,
            "image": "https://placehold.jp/16/2980b9/ffffff/80x80.jpg?text=Rasa+socket&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65759,
      "title": "Why Mp3juice is Best Music Downloader?",
      "slug": "EoW4obQrVml",
      "url": "https://viblo.asia/p/why-mp3juice-is-best-music-downloader-EoW4obQrVml",
      "user_id": 105578,
      "moderation": null,
      "transliterated": "why-mp3juice-is-best-music-downloader",
      "contents_short": "Mp3juice is a music file downloader tool using any user can download unlimited youtube videos into mp3 music format for free. You can access mp3juice from different devices and browsers. Mp3juices is also called a search engine because you can search different queries on the website and you get answers similar to your query very quickly. To use and access mp3 juice on mobile or pc devices you n...",
      "contents": "[Mp3juice](https://www-mp3juices.com/id2/) is a music file downloader tool using any user can download unlimited youtube videos into mp3 music format for free. You can access mp3juice from different devices and browsers. Mp3juices is also called a search engine because you can search different queries on the website and you get answers similar to your query very quickly. To use and access mp3 juice on mobile or pc devices you need an internet connection. Download music from differnet genres easily and listen offline when you want. No need to register and paid money to use mp3juice for free mp3 downloads. \n\n## Features of Free Mp3juice\nThere are a number of different features to use mp3juice and the reason behind it mp3juice is best music downloader because of its features. \n### No Disturbing Ads\nWhen you use the mp3juice tool on any device at that time you have to not show any ads to download mp3 files from youtube videos. \n### Fast Speed to Download Music Files\nWhen you click on the download button in mp3juice then it will take around 2 to 5 seconds to complete the download audio file. \n### Different Language Supported\nAvailability of [mp3 juice](https://www.mp3juices.click/) in different languages like Indonesian, English, French, Spanish, and Italian so users can access it from their native language. \n### No Need to Create an Account\nIf you use different tools before mp3juice to convert youtube videos into mp3 format then you native you need to register first then you can use it but in mp3juice you do not need to register to access and use the tool. \n## How to Download MP3 File using Mp3juice?\n1. Open [https://www.mp3juices.link/](https://www.mp3juices.link/) website on the browser\n1. Then search music query using the in-built search option\n1. Get the result list\n1. Select the result and click on the download button\n1. Wait a few seconds to complete the download process\n1. After downloading listen to it",
      "published_at": "2022-12-02T10:28:48.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-03T01:43:02.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 1,
      "points": -1,
      "views_count": 9,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 105578,
          "url": "https://viblo.asia/u/Mp3juice",
          "avatar": "65e6367e-3055-441a-ae4b-6cd068b137dd.png",
          "name": "JohnDean",
          "username": "Mp3juice",
          "followers_count": 0,
          "reputation": 0,
          "posts_count": 1,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "mp3juice",
            "name": "mp3juice",
            "primary": false,
            "image": "https://placehold.jp/16/2980b9/ffffff/80x80.jpg?text=mp3juice&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "mp3-juice",
            "name": "mp3 juice",
            "primary": false,
            "image": "https://placehold.jp/16/16a085/ffffff/80x80.jpg?text=mp3+juice&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "mp3juices",
            "name": "mp3juices",
            "primary": false,
            "image": "https://placehold.jp/16/8e44ad/ffffff/80x80.jpg?text=mp3juices&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 63993,
      "title": "Ch·∫°y cronjob trong Docker container v·ªõi Python",
      "slug": "0gdJzjp3Jz5",
      "url": "https://viblo.asia/p/chay-cronjob-trong-docker-container-voi-python-0gdJzjp3Jz5",
      "user_id": 45120,
      "moderation": null,
      "transliterated": "chay-cronjob-trong-docker-container-voi-python",
      "contents_short": "Trong qu√° tr√¨nh ph√°t tri·ªÉn, s·∫Ω kh√¥ng thi·∫øu nh·ªØng l√∫c m√† ch√∫ng ta c·∫ßn ch·∫°y ƒë·ªãnh k·ª≥ m·ªôt v√†i script ho·∫∑c ch·∫°y m·ªôt t√°c v·ª• n√†o ƒë√≥ v√†o th·ªùi gian nh·∫•t ƒë·ªãnh. Nh·ªØng l√∫c nh∆∞ v·∫≠y th√¨ Cron l√† m·ªôt c√¥ng c·ª• v√¥ c√πng h·ªØu hi·ªáu.\n\nCron c≈©ng r·∫•t d·ªÖ s·ª≠ d·ª•ng. Tuy nhi√™n khi ƒë√≥ng g√≥i cronjob v√†o Docker th√¨ m√¨nh ƒë√£ g·∫∑p m·ªôt v√†i kh√≥ khƒÉn v√† ph·∫£i th·ª≠ qua m·∫•y solution m·ªõi l√†m n√≥ ch·∫°y ƒë∆∞·ª£c. Do v·∫≠y m√¨nh vi·∫øt b√†i n√†y ƒë·ªÉ ghi ch...",
      "contents": "Trong qu√° tr√¨nh ph√°t tri·ªÉn, s·∫Ω kh√¥ng thi·∫øu nh·ªØng l√∫c m√† ch√∫ng ta c·∫ßn ch·∫°y ƒë·ªãnh k·ª≥ m·ªôt v√†i script ho·∫∑c ch·∫°y m·ªôt t√°c v·ª• n√†o ƒë√≥ v√†o th·ªùi gian nh·∫•t ƒë·ªãnh. Nh·ªØng l√∫c nh∆∞ v·∫≠y th√¨ Cron l√† m·ªôt c√¥ng c·ª• v√¥ c√πng h·ªØu hi·ªáu. \n\nCron c≈©ng r·∫•t d·ªÖ s·ª≠ d·ª•ng. Tuy nhi√™n khi ƒë√≥ng g√≥i cronjob v√†o Docker th√¨ m√¨nh ƒë√£ g·∫∑p m·ªôt v√†i kh√≥ khƒÉn v√† ph·∫£i th·ª≠ qua m·∫•y solution m·ªõi l√†m n√≥ ch·∫°y ƒë∆∞·ª£c. Do v·∫≠y m√¨nh vi·∫øt b√†i n√†y ƒë·ªÉ ghi ch√∫ l·∫°i c√°ch d·ªÖ th·ª±c hi·ªán nh·∫•t, ti·ªán s·ª≠ d·ª•ng v·ªÅ sau, c≈©ng nh∆∞ hy v·ªçng c√≥ th·ªÉ gi√∫p ƒë∆∞·ª£c cho nh·ªØng b·∫°n ƒëang hoang mang gi·ªëng m√¨nh :) \n\n# Cron l√† g√¨?\n**Cron** l√† m·ªôt c√¥ng c·ª• **l·∫≠p l·ªãch c√¥ng vi·ªác d·ª±a tr√™n th·ªùi gian** trong c√°c h·ªá ƒëi·ªÅu h√†nh t∆∞∆°ng t·ª± Unix. Cron cho ph√©p ng∆∞·ªùi d√πng Linux v√† Unix ch·∫°y c√°c command ho·∫∑c script v√†o m·ªôt ng√†y gi·ªù nh·∫•t ƒë·ªãnh c≈©ng nh∆∞ l√™n l·ªãch ƒë·ªÉ ch·∫°y c√°c l·ªánh m·ªôt c√°ch ƒë·ªãnh k·ª≥. \n\n**Crontab** l√† danh s√°ch c√°c l·ªánh m√† b·∫°n mu·ªën ch·∫°y theo l·ªãch tr√¨nh v√† c≈©ng l√† t√™n c·ªßa l·ªánh ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ qu·∫£n l√Ω danh s√°ch ƒë√≥. \n\n**python-crontab** l√† module Python cho ph√©p ch√∫ng ta ƒë·ªçc/ vi·∫øt c√°c file crontab, c≈©ng nh∆∞ truy c·∫≠p cron c·ªßa h·ªá th·ªëng m·ªôt c√°ch t·ª± ƒë·ªông v√† ƒë∆°n gi·∫£n b·∫±ng c√°ch s·ª≠ d·ª•ng API tr·ª±c ti·∫øp. N√≥ c≈©ng cho ph√©p ch·∫°y m·ªôt crontab nh∆∞ m·ªôt ti·∫øn tr√¨nh n·ªÅn n·∫øu c√†i ƒë·∫∑t th√™m croniter. Nh·ªù th·∫ø m√† m√¨nh tr√°nh ƒë∆∞·ª£c vi·ªác ph·∫£i th√™m c√°c command b·∫±ng tay ƒë·ªÉ config cron c·ªßa container khi vi·∫øt Dockerfile, n√≥i chung l√† kh√° ti·ªán, g·ªçn v√† kh√¥ng ph·∫£i nh·ªõ nhi·ªÅu üòÇ \n\n(N·∫øu build Docker t·ª´ base image l√† python-alpine th√¨ s·∫Ω c√≥ s·∫µn cron nh∆∞ng n·∫øu base image l√† python th√¨ ph·∫£i t·ª± c√†i ƒë·∫∑t v√† setting v√†i th·ª©)\n\n# Ch·∫°y cronjob v·ªõi Python trong Docker container\n\nM√¨nh b·∫Øt ƒë·∫ßu v·ªõi m·ªôt task python c·∫ßn ch·∫°y ƒë·ªãnh k·ª≥, v√≠ d·ª• in ra ch·ªØ \"hello!\"\n\n**hello.py**\n```\nimport datetime\nprint(datetime.datetime.now(), \"------ hello!\")\n```\n\nC√°c package c·∫ßn thi·∫øt:\n\n**requirements.txt**\n```\ncroniter \npython-crontab\n```\n\nFile crontab ƒë·ªãnh nghƒ©a c√¥ng vi·ªác, ·ªü ƒë√¢y l√† ch·∫°y file hello.py m·ªói ph√∫t m·ªôt l·∫ßn. \n\n**crontab.tab**\n```\n* * * * * python /full/path/to/hello.py >> /full/path/to/cron.log\n\n```\n**cron_run.py**\n```\nfrom datetime import datetime\nfrom crontab import CronTab\ntab = CronTab(tabfile='crontab.tab')\nfor result in tab.run_scheduler():\n    print(datetime.now().strftime(\"%d/%m/%Y %H:%M:%S\"))\n```\n**Dockerfile**\n```\nFROM python:3.8\n# \nWORKDIR /cronjob\n\n# \nCOPY . /cronjob\n\n# \nRUN pip install --no-cache-dir --upgrade -r requirements.txt \n\n#\nCMD [\"python\", \"cron_run.py\"]\n```\n**cron.log**\n```\n2022-09-26 06:00:32.478099 ------ hello!\n2022-09-26 06:01:32.754784 ------ hello!\n2022-09-26 06:02:33.057975 ------ hello!\n2022-09-26 06:03:33.360725 ------ hello!\n2022-09-26 06:04:33.781451 ------ hello!\n2022-09-26 06:05:34.107770 ------ hello!\n2022-09-26 06:06:34.381700 ------ hello!\n2022-09-26 06:07:34.702155 ------ hello!\n2022-09-26 06:08:34.997329 ------ hello!\n2022-09-26 06:09:35.275052 ------ hello!\n2022-09-26 06:10:35.669773 ------ hello!\n```\n# Notes\n- C√°c b·∫°n c√≥ th·ªÉ tham kh·∫£o th√™m c√°c c√∫ ph√°p c·ªßa crontab m·ªôt c√°ch tr∆∞c quan t·∫°i [ƒë√¢y](https://crontab.guru/) \n- C√°c cronjob ƒë∆∞·ª£c schedule theo local time zone c·ªßa h·ªá th·ªëng => c·∫ßn ch√∫ √Ω ƒëi·ªÉm n√†y khi l√†m vi·ªác v·ªõi c√°c h·ªá th·ªëng cho user n∆∞·ªõc ngo√†i\n- M·ªói cronjob s·∫Ω ch·∫°y trong m·ªôt shell sessions bi·ªát l·∫≠p n√™n n·∫øu mu·ªën xem output c·ªßa n√≥ th√¨ c·∫ßn in ra file. \n- **N√äN** s·ª≠ d·ª•ng ƒë∆∞·ªùng d·∫´n tuy·ªát ƒë·ªëi cho c√°c script v√† output file\n\nReferences: \n\nhttps://www.geeksforgeeks.org/how-to-schedule-python-scripts-as-cron-jobs-with-crontab/?ref=rp\n\nhttps://www.geeksforgeeks.org/create-multiple-jobs-using-python-crontab/\n\nhttps://nschdr.medium.com/running-scheduled-python-tasks-in-a-docker-container-bf9ea2e8a66c\n\nhttps://stackoverflow.com/questions/37458287/how-to-run-a-cron-job-inside-a-docker-container",
      "published_at": "2022-12-02T09:56:09.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-03T02:04:01.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 3,
      "points": 2,
      "views_count": 23,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "vi",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 45120,
          "url": "https://viblo.asia/u/hoang.thu.thao",
          "avatar": "f80ed89c-393c-43c4-bbde-f5db845ed676.jpg",
          "name": "Thao Hoang Thu",
          "username": "hoang.thu.thao",
          "followers_count": 24,
          "reputation": 825,
          "posts_count": 15,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "cronjob",
            "name": "CronJob",
            "primary": false,
            "image": "https://placehold.jp/16/2980b9/ffffff/80x80.jpg?text=CronJob&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "docker",
            "name": "Docker",
            "primary": false,
            "image": "https://placehold.jp/16/16a085/ffffff/80x80.jpg?text=Docker&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "python",
            "name": "Python",
            "primary": false,
            "image": "https://placehold.jp/16/d35400/ffffff/80x80.jpg?text=Python&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65708,
      "title": "Blog#53: Design Patterns: Builder Pattern trong TypeScript üòä (Series: B√≥n h√†nh TypeScript - PH·∫¶N 3)",
      "slug": "W13VM2P54Y7",
      "url": "https://viblo.asia/p/blog53-design-patterns-builder-pattern-trong-typescript-series-bon-hanh-typescript-phan-3-W13VM2P54Y7",
      "user_id": 74229,
      "moderation": null,
      "transliterated": "blog53-design-patterns-builder-pattern-trong-typescript-series-bon-hanh-typescript-phan-3",
      "contents_short": "\n\nM√¨nh l√† TU·∫§N hi·ªán ƒëang l√† m·ªôt Full-stack Web Developer t·∫°i Tokyo üòä.\nN·∫øu b·∫°n th·∫•y Blog n√†y hay xin h√£y cho m√¨nh m·ªôt like v√† ƒëƒÉng k√Ω ƒë·ªÉ ·ªßng h·ªô m√¨nh nh√© üòâ.\n\nC√°ch s·ª≠ d·ª•ng Builder Pattern b·∫±ng TypeScript ƒë·ªÉ gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ th·ª±c t·∫ø trong c√°c project web. L√†m ch·ªß Builder Pattern s·∫Ω gi√∫p b·∫°n d·ªÖ d√†ng x·ª≠ l√Ω vi·ªác t·∫°o c√°c ƒë·ªëi t∆∞·ª£ng.\n\nCh√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi lo·∫°t b√†i Design Patterns trong TypeScript, ...",
      "contents": "![image.png](https://images.viblo.asia/a5f5bdaf-1a64-4014-84e0-4c50f55ed5c0.png)\n\nM√¨nh l√† TU·∫§N hi·ªán ƒëang l√† m·ªôt Full-stack Web Developer t·∫°i Tokyo üòä.\nN·∫øu b·∫°n th·∫•y Blog n√†y hay xin h√£y cho m√¨nh m·ªôt like v√† ƒëƒÉng k√Ω ƒë·ªÉ ·ªßng h·ªô m√¨nh nh√© üòâ.\n\n**C√°ch s·ª≠ d·ª•ng Builder Pattern b·∫±ng TypeScript ƒë·ªÉ gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ th·ª±c t·∫ø trong c√°c project web. L√†m ch·ªß Builder Pattern s·∫Ω gi√∫p b·∫°n d·ªÖ d√†ng x·ª≠ l√Ω vi·ªác t·∫°o c√°c ƒë·ªëi t∆∞·ª£ng.**\n\nCh√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi lo·∫°t b√†i **Design Patterns trong TypeScript**, lo·∫°t b√†i n√†y m√¨nh s·∫Ω gi·ªõi thi·ªáu m·ªôt s·ªë Design Patterns h·ªØu √≠ch trong ph√°t tri·ªÉn web b·∫±ng TypeScript.\n\nC√°c **Design Patterns** r·∫•t quan tr·ªçng ƒë·ªëi v·ªõi c√°c web developer v√† ch√∫ng ta c√≥ th·ªÉ code t·ªët h∆°n b·∫±ng c√°ch th√†nh th·∫°o ch√∫ng. Trong b√†i vi·∫øt n√†y, m√¨nh s·∫Ω s·ª≠ d·ª•ng **TypeScript** ƒë·ªÉ gi·ªõi thi·ªáu **Builder Pattern**.\n\nBuilder Pattern\n----\n\n**Builder Pattern** ph√¢n t√°ch m·ªôt ƒë·ªëi t∆∞·ª£ng ph·ª©c t·∫°p th√†nh c√°c ph·∫ßn t∆∞∆°ng ƒë·ªëi ƒë∆°n gi·∫£n, sau ƒë√≥ t·∫°o ch√∫ng m·ªôt c√°ch ri√™ng bi·ªát theo c√°c nhu c·∫ßu kh√°c nhau v√† cu·ªëi c√πng l√† x√¢y d·ª±ng ƒë·ªëi t∆∞·ª£ng ph·ª©c t·∫°p.\n\nV·∫≠y l√†m th·∫ø n√†o ƒë·ªÉ hi·ªÉu r√µ h∆°n v·ªÅ vai tr√≤ c·ªßa **Builder Pattern**? H√£y th·ª≠ l·∫•y m·ªôt v√≠ d·ª•:\n\n```javascript\nclass User {\n  constructor(\n    public username: string,\n    public sex: string,\n    public age: number,\n    public photo: string,\n    public email: string\n  ) {}\n}\n```\n\nTrong ƒëo·∫°n code tr√™n, ch√∫ng ta ƒë√£ s·ª≠ d·ª•ng c√∫ ph√°p **Class** ƒë·ªÉ ƒë·ªãnh nghƒ©a m·ªôt l·ªõp `User`, v·ªõi `Class` n√†y, ch√∫ng ta c√≥ th·ªÉ t·∫°o m·ªôt instance c·ªßa l·ªõp `User`:\n\n```javascript\nconst bytefer = new User(\n  \"Bytefer\",\n  \"male\",\n  30,\n  \"https://***.com/**\",\n  \"bytefer@gmail.com\"\n);\n```\n\nƒê·ªëi v·ªõi ƒëo·∫°n code tr√™n, m·∫∑c d√π ch√∫ng ta c√≥ th·ªÉ t·∫°o th√†nh c√¥ng m·ªôt `instance` c·ªßa l·ªõp `User`. Nh∆∞ng trong qu√° tr√¨nh t·∫°o c√°c `instance`, **ch√∫ng ta c·∫ßn ch√∫ √Ω ƒë·∫øn ki·ªÉu v√† th·ª© t·ª± c·ªßa c√°c tham s·ªë constructor c·ªßa l·ªõp `User`**. ƒê·ªìng th·ªùi, ch√∫ng ta c≈©ng c·∫ßn truy·ªÅn ƒë·ªß tham s·ªë c√πng m·ªôt l√∫c ƒë·ªÉ x√¢y d·ª±ng m·ªôt instance c·ªßa l·ªõp `User`.\n\nƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ tr√™n, m·ªôt gi·∫£i ph√°p l√† s·ª≠ d·ª•ng **Design Patterns**. Ch√¨a kh√≥a c·ªßa **Patterns** n√†y l√† ph√¢n t√°ch m·ªôt ƒë·ªëi t∆∞·ª£ng ph·ª©c t·∫°p th√†nh c√°c ph·∫ßn t∆∞∆°ng ƒë·ªëi ƒë∆°n gi·∫£n, sau ƒë√≥ t·∫°o ch√∫ng ri√™ng bi·ªát theo c√°c nhu c·∫ßu kh√°c nhau v√† cu·ªëi c√πng l√† x√¢y d·ª±ng ƒë·ªëi t∆∞·ª£ng ph·ª©c t·∫°p.\n\nSau khi hi·ªÉu c√°c th√¥ng tin ch√≠nh ·ªü tr√™n, h√£y ƒë·ªãnh nghƒ©a m·ªôt l·ªõp `UserBuilder`:\n\n```javascript\nclass UserBuilder {\n  public username!: string;\n  public sex!: string;\n  public age!: number;\n  public photo!: string;\n  public email!: string;\n\n  setUserName(name: string) {\n    this.username = name;\n    return this;\n  }\n\n  setSex(sex: string) {\n    this.sex = sex;\n    return this;\n  }\n\n  setAge(age: number) {\n    this.age = age;\n    return this;\n  }\n\n  setPhoto(photo: string) {\n    this.photo = photo;\n    return this;\n  }\n\n  setEmail(email: string) {\n    this.email = email;\n    return this;\n  }\n\n  build() {\n    return new User(this.username, this.sex, this.age, this.photo, this.email);\n  }\n}\n```\n\nTrong l·ªõp `UserBuilder`, ch√∫ng ta ƒë·ªãnh nghƒ©a m·ªôt s·ªë h√†m `setXXX` v√† m·ªôt h√†m `build`. Ph∆∞∆°ng th·ª©c `setXXX` ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ƒë·∫∑t value cho m·ªôt Properties c·ªßa `UserBuilder` instance v√† h√†m `build` ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ th·ª±c hi·ªán thao t√°c t·∫°o m·ªôt instance c·ªßa l·ªõp `User`.\n\nV·ªõi l·ªõp `UserBuilder`, ch√∫ng ta c√≥ th·ªÉ t·∫°o m·ªôt instance c·ªßa l·ªõp `User` theo c√°ch sau:\n\n```javascript\nconst bytefer = new UserBuilder()\n  .setAge(30)\n  .setSex(\"male\")\n  .setEmail(\"bytefer@gmail.com\")\n  .setPhoto(\"https://***.com/**\")\n  .setUserName(\"Bytefer\")\n  .build();\n```\n\nH√î H√î nh√¨n quen quen nh·ªâ ch·∫Øc ae c≈©ng ƒë√£ th·∫•y c√°ch t·∫°o Object n√†y ·ªü ƒë√¢u ƒë√≥ r·ªìi ƒë√∫ng ko.\n\nTi·∫øp theo, m√¨nh s·∫Ω s·ª≠ d·ª•ng h√¨nh b√™n d∆∞·ªõi ƒë·ªÉ hi·ªÉn th·ªã c√°c c√°ch kh√°c nhau ƒë·ªÉ t·∫°o m·ªôt instance c·ªßa class `User`:\n\n![image.png](https://images.viblo.asia/a05729b9-39c2-4d07-80b8-3933a4b084e0.png)\n\nSau khi ƒë·ªçc v√≠ d·ª• tr√™n, b·∫°n s·∫Ω th·∫•y r·∫±ng **Builder Pattern** kh√¥ng h·ªÅ ph·ª©c t·∫°p ƒë√∫ng ko. Trong m·ªôt project TypeScript th·ª±c t·∫ø, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng th∆∞ vi·ªán [**Builder Pattern**](https://github.com/Vincent-Pang/builder-pattern) ƒë·ªÉ √°p d·ª•ng Builder Pattern m·ªôt c√°ch hi·ªáu qu·∫£. C√≥ s·∫µn h·∫øt r·ªìi d√πng th√¥i tuy nhi√™n v·∫´n c√¢u n√≥i c≈©ng d√πng m√† hi·ªÉu th√¨ v·∫´n s∆∞·ªõng h∆°n d√πng m√† ko hi·ªÉu. Ph·∫£i b√≥n h√†nh cho t·ª•i n√†y lu√¥n ch·ª©....\n\n**S·ª≠ d·ª•ng c∆° b·∫£n**\n\n```javascript\ninterface UserInfo {\n  id: number;\n  userName: string;\n  email: string;\n}\nconst userInfo = Builder<UserInfo>()\n                   .id(28)\n                   .userName('bytefer')\n                   .email('bytefer@gmail.com')\n                   .build();\n```\n\n**C√°ch s·ª≠ d·ª•ng v·ªõi c√°c ƒë·ªëi t∆∞·ª£ng m·∫´u (template objects)**\n\n```javascript\nconst defaultUserInfo: UserInfo = {\n  id: 1,\n  userName: 'bytefer',\n  email: 'bytefer@gmail.com'\n};\nconst modifiedUserInfo = Builder(defaultUserInfo)\n                          .id(28)\n                          .build();\n```\n\n**C√°ch s·ª≠ d·ª•ng v·ªõi class object**\n\n```javascript\nclass UserInfo {\n  id!: number;\n  userName!: string;\n  email!: string;\n}\nconst userInfo = Builder(UserInfo) \n                   .id(28)\n                   .userName('bytefer')\n                   .email('bytefer@gmail.com')\n                   .build();\n```\n\nSau khi ƒë·ªçc ba v√≠ d·ª• s·ª≠ d·ª•ng ·ªü tr√™n, b·∫°n th·∫•y ƒë√≥ th∆∞ vi·ªán [Builder Pattern](https://github.com/Vincent-Pang/builder-pattern) kh√° m·∫°nh m·∫Ω. Tr√™n th·ª±c t·∫ø, th∆∞ vi·ªán ƒë∆∞·ª£c implement d·ª±a tr√™n [**ES6 Proxy API**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy). N·∫øu b·∫°n quan t√¢m th√¨ c√≥ th·ªÉ ƒë·ªçc [source code](https://github.com/Vincent-Pang/builder-pattern/blob/master/src/Builder.ts) c·ªßa n√≥.\n\nTrong tr∆∞·ªùng h·ª£p truy v·∫•n d·ªØ li·ªáu, ch√∫ng ta th∆∞·ªùng th·∫•y **Builder Pattern**. V√≠ d·ª•: ƒë·ªÉ x√¢y d·ª±ng c√°c ƒëi·ªÅu ki·ªán truy v·∫•n `sql` ho·∫∑c `elaticsearch`. \n·ªû ƒë√¢y ch√∫ng ta l·∫•y th∆∞ vi·ªán [**bodybuilder**](https://bodybuilder.js.org/) l√†m v√≠ d·ª• ƒë·ªÉ xem c√°ch s·ª≠ d·ª•ng c∆° b·∫£n c·ªßa n√≥:\n\n```javascript\nbodybuilder()\n  .query('match', 'message', 'this is a test')\n  .filter('term', 'user', 'kimchy')\n  .filter('term', 'user', 'herald')\n  .orFilter('term', 'user', 'johnny')\n  .notFilter('term', 'user', 'cassie')\n  .aggregation('terms', 'user')\n  .build()\n```\n\nM·ªôt s·ªë tr∆∞·ªùng h·ª£p s·ª≠ d·ª•ng c·ªßa Builder Pattern:\n\n*   Khi m·ªôt l·ªõp c√≥ nhi·ªÅu h∆°n 4 tham s·ªë constructor v√† m·ªôt s·ªë tham s·ªë n√†y l√† t√πy ch·ªçn, h√£y c√¢n nh·∫Øc s·ª≠ d·ª•ng Builder Pattern (Ho·∫∑c m·ªôt pattern n√†o ƒë√≥ trong b·ªô Constructor pattern m√¨nh s·∫Ω gi·ªõi thi·ªáu trong c√°c b√†i vi·∫øt sau).\n\nRoundup\n----\nNh∆∞ m·ªçi khi, m√¨nh hy v·ªçng b·∫°n th√≠ch b√†i vi·∫øt n√†y v√† h·ªçc th√™m ƒë∆∞·ª£c ƒëi·ªÅu g√¨ ƒë√≥ m·ªõi.\n\nC·∫£m ∆°n v√† h·∫πn g·∫∑p l·∫°i c√°c b·∫°n trong nh·ªØng b√†i vi·∫øt ti·∫øp theo! üòç\n\nN·∫øu b·∫°n th·∫•y Blog n√†y hay xin h√£y cho m√¨nh m·ªôt like v√† ƒëƒÉng k√Ω ƒë·ªÉ ·ªßng h·ªô m√¨nh nh√©. Thank you.üòâ\n\nRef\n----\n* https://tuan200tokyo.blogspot.com/2022/11/blog53-design-patterns-builder-pattern.html",
      "published_at": "2022-12-02T00:21:28.000000Z",
      "is_published": true,
      "is_shared": true,
      "updated_at": "2022-12-03T01:21:01.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 5,
      "points": 1,
      "views_count": 92,
      "clips_count": 0,
      "comments_count": 1,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "vi",
      "is_video": false,
      "thumbnail_url": "https://images.viblo.asia/a5f5bdaf-1a64-4014-84e0-4c50f55ed5c0.png",
      "user": {
        "data": {
          "id": 74229,
          "url": "https://viblo.asia/u/Clarence161095",
          "avatar": "82afa6c9-073b-419a-aceb-ae889b85c554.jpg",
          "name": "NGUY·ªÑN ANH TU·∫§N",
          "username": "Clarence161095",
          "followers_count": 129,
          "reputation": 1981,
          "posts_count": 54,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "builder-pattern",
            "name": "builder pattern",
            "primary": false,
            "image": "https://placehold.jp/16/c0392b/ffffff/80x80.jpg?text=builder+pattern&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "design-patterns",
            "name": "Design Patterns",
            "primary": false,
            "image": "https://placehold.jp/16/d35400/ffffff/80x80.jpg?text=Design+Patterns&css=%7B%22padding%22%3A%223px%22%7D"
          },
          {
            "slug": "typescript",
            "name": "TypeScript",
            "primary": false,
            "image": "https://placehold.jp/16/f39c12/ffffff/80x80.jpg?text=TypeScript&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": [
          {
            "id": 58086,
            "url": "https://viblo.asia/u/vinhtieng",
            "avatar": "77c8dd4d-4335-45e2-80b9-2fca5943f901.jpg",
            "name": "Nguy·ªÖn Vinh Ti·∫øng",
            "username": "vinhtieng",
            "followers_count": 0,
            "reputation": 0,
            "posts_count": 0,
            "banned_at": null,
            "level_partner": null
          }
        ]
      }
    },
    {
      "id": 65751,
      "title": "Amazon API Gateway HTTP API to AWS Simple Queue Service (SQS) to Lambda",
      "slug": "vlZL9NKvVQK",
      "url": "https://viblo.asia/p/amazon-api-gateway-http-api-to-aws-simple-queue-service-sqs-to-lambda-vlZL9NKvVQK",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "amazon-api-gateway-http-api-to-aws-simple-queue-service-sqs-to-lambda",
      "contents_short": "This pattern creates an Amazon API Gateway HTTP API with a  route that send message to a SQS queue. The  Amazon API Gateway HTTP API has basic CORS configured. Upon receiving message, SQS will trigger a Lambda function to process the message. The function will only  the message only. The function written in Python.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessla...",
      "contents": "This pattern creates an Amazon API Gateway HTTP API with a ```send``` route that send message to a SQS queue. The  Amazon API Gateway HTTP API has basic CORS configured. Upon receiving message, SQS will trigger a Lambda function to process the message. The function will only ```print``` the message only. The function written in Python.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/apigw-http-sqs-lambda-cdk\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n* [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n* [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n* [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n* [AWS Cloud Development Kit](https://docs.aws.amazon.com/cdk/latest/guide/cli.html) (AWS CDK) installed\n* [Python 3.8+](https://www.python.org/downloads/) Installed\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n    ``` \n    git clone https://github.com/aws-samples/serverless-patterns\n    ```\n1. Change directory to the pattern directory:\n    ```\n    cd apigw-http-api-sqs-lambda-cdk\n    ```\n1. Create virtualenv\n    ```\n    python3 -m venv .venv\n    ```\n1. Activate your virtualenv.\n    ```\n    source .venv/bin/activate\n    ```\n1. Once the virtualenv is activated, you can install the required dependencies.\n    ```\n    pip install -r requirements.txt\n    ```\n1. At this point you can now synthesize the CloudFormation template for this code.\n    ```\n    cdk synth\n    ```\n\n    ## Useful CDK commands\n\n    * `cdk ls`          list all stacks in the app\n    * `cdk synth`       emits the synthesized CloudFormation template\n    * `cdk deploy`      deploy this stack to your default AWS account/region\n    * `cdk diff`        compare deployed stack with current state\n    * `cdk docs`        open CDK documentation\n\n1. Deploy CDK stack\n    ```\n    cdk deploy\n    ```\n\n\n## How it works\n\nThe API Gateway handles the incoming API requests and send the ```$request.body.MessageBody``` as a message to SQS queue. A Lambda function will be trigger upon the message arraived.\n\n## Testing\n\n### Running following cURL command to agaist the HTTP API Endpoint\n```\ncurl -XPOST https://${HTTP_API_ENDPOOINT}/send -d'{\"MessageBody\":\"hello\"}'\n```\n### Expected result\n```\n<?xml version=\"1.0\"?><SendMessageResponse xmlns=\"http://queue.amazonaws.com/doc/2012-11-05/\">\n    <SendMessageResult>\n        <MessageId>xxxxxx</MessageId>\n        <MD5OfMessageBody>xxxxxx</MD5OfMessageBody>\n    </SendMessageResult>\n    <ResponseMetadata>\n        <RequestId>xxxx</RequestId>\n    </ResponseMetadata>\n</SendMessageResponse>\n```\n# Cleanup\n\n```\ncdk destroy\n```\n\n----",
      "published_at": "2022-12-01T17:15:32.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-03T01:00:05.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 1,
      "points": 1,
      "views_count": 42,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/27ae60/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65750,
      "title": "AWS API Gateway HTTP API to AWS Lambda to RDS Proxy",
      "slug": "2oKLn21aLQO",
      "url": "https://viblo.asia/p/aws-api-gateway-http-api-to-aws-lambda-to-rds-proxy-2oKLn21aLQO",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "aws-api-gateway-http-api-to-aws-lambda-to-rds-proxy",
      "contents_short": "This pattern sets up API Gateway HTTP API using AWS Lambda function as an integration which talks to RDS Aurora(Postgres) via RDS Proxy\nwith IAM Authentication enabled. The Lambda function will only be using short-lived credentials to authenticate through RDS proxy via IAM authentication using the popular JavaScript ORM sequelize.\n\nLearn more about this pattern at Serverless Land Patterns: http...",
      "contents": "This pattern sets up API Gateway HTTP API using AWS Lambda function as an integration which talks to RDS Aurora(Postgres) via RDS Proxy\nwith IAM Authentication enabled. The Lambda function will only be using short-lived credentials to authenticate through RDS proxy via IAM authentication using the popular JavaScript ORM [sequelize](https://sequelize.org).\n\nLearn more about this pattern at Serverless Land Patterns: [https://serverlessland.com/patterns/apigw-http-api-lambda-rds-proxy-cdk](https://serverlessland.com/patterns/apigw-http-api-lambda-rds-proxy-cdk)\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n* [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n* [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n* [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n* [AWS CDK Installed](https://docs.aws.amazon.com/cdk/latest/guide/getting_started.html#getting_started_install)\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n    ``` bash\n    git clone https://github.com/aws-samples/serverless-patterns\n    ```\n2. Change directory to the pattern directory:\n    ```bash\n    cd apigw-http-api-lambda-rds-proxy-cdk/src\n    ```\n3. Install dependencies:\n    ```bash\n    npm install\n    ```\n4. Deploy the application. This will take some time to provision the database.\n    ```bash\n    cdk deploy\n    ```\n\n## How it works\n\nThis pattern sets up API Gateway HTTP API using AWS Lambda function as an integration which talks to RDS Aurora(Postgres) via RDS Proxy with IAM Authentication enabled. The Lambda function will only be using short-lived credentials to authenticate through RDS proxy via IAM authentication using the popular JavaScript ORM [sequelize](https://sequelize.org).\n\nRDS Proxy has to exist in the same VPC as your database and it cannot be public. Security groups are configured to [only allow communication from the lambda functions to RDS proxy](./src/lib/rds-proxy-sequelize-stack.ts#L55), and [from the RDS proxy to the Aurora database](./src/lib/rds-proxy-sequelize-stack.ts#L61).\n\n[The lambda functions are granted the ability to connect to the RDS proxy using the provided username](./src/lib/rds-proxy-sequelize-stack.ts#L137). \n\nWhile the lambda authenticates to your proxy using IAM authentication, RDS proxy still connects to your database using native database authentication. Therefore, a new set of RDS credentials are created in secrets manager which allow RDS proxy to connect to the database. See [the connecting to a database through RDS Proxy documentation](https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/rds-proxy-setup.html#rds-proxy-iam-setup) for more information.\n\nRDS proxy supports connecting to your database with multiple database users. This means that different usernames with limited privileges *inside your database* could be configured for different lambda functions if necessary.\n\nThe [`beforeConnect` lifecycle hook](./src/lambda/sequelize.ts#L26) provided by sequelize is used to generate a current, short-lived access token.\n\n![](https://images.viblo.asia/be9f2b8c-afb9-437a-8a04-a563383e7f72.png)\n\n\n## Testing\n\nOnce `cdk deploy` has completed, you will receive 2 URL outputs similar to:\n\n```bash\nOutputs:\nRdsProxySequelizeStack.populateEndpointUrl = https://aabbccddee.execute-api.us-west-2.amazonaws.com/populate\nRdsProxySequelizeStack.stadiumsEndpointUrl = https://aabbccddee.execute-api.us-west-2.amazonaws.com/\n\nStack ARN:\narn:aws:cloudformation:us-west-2:001122334455:stack/RdsProxySequelizeStack/11111111-1111-1111-1111-111111111111\n```\n\nIf you did not retain these URLs, they are also available in the Outputs tab of the CloudFormation stack inside the AWS console.\n\nFirst, we will create and populate a simple `Stadium` table in our new database by sending a `POST` request to the `/populate` endpoint URL:\n\n```bash\ncurl -request POST https://aabbccddee.execute-api.us-west-2.amazonaws.com/populate\n{\"message\":\"Stadium table and data successfully created.\"}\n```\n\nNow that we have data stored inside of our database, we can retrieve it to verify that it has been persisted using the stadiums endpoint URL:\n\n```bash\ncurl -request GET https://aabbccddee.execute-api.us-west-2.amazonaws.com/\n[{\"id\":1,\"name\":\"Los Angeles Memorial Coliseum\",\"capacity\":93607,\"location\":\"Los Angeles, California\",\"surface\":\"Natural grass\",\"roof\":\"Open\",\"team\":\"Los Angeles Rams\",\"yearOpened\":\"1923\",\"createdAt\":\"2021-12-01T20:58:08.906Z\",\"updatedAt\":\"2021-12-01T20:58:08.906Z\"},{\"id\":2,\"name\":\"MetLife Stadium\",\"capacity\":82500,\"location\":\"East Rutherford, New Jersey\",\"surface\":\"UBU Speed Ser...\n...\n...\n}]\n```\n\n## Cleanup\n \n1. Delete the stack\n    ```bash\n    cdk destroy\n    ```\n----",
      "published_at": "2022-12-01T17:12:54.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-03T01:54:01.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 2,
      "points": 1,
      "views_count": 22,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": "https://images.viblo.asia/be9f2b8c-afb9-437a-8a04-a563383e7f72.png",
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/f39c12/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65749,
      "title": "Amazon API Gateway to AWS Fargate",
      "slug": "0gdJzjzAJz5",
      "url": "https://viblo.asia/p/amazon-api-gateway-to-aws-fargate-0gdJzjzAJz5",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "amazon-api-gateway-to-aws-fargate",
      "contents_short": "This project contains a sample AWS Cloud Development Kit (AWS CDK) template for deploying an AWS Fargate service running on an Amazon Elastic Container Service (ECS) cluster with a private Application Load Balancer in-front. The Application Load Balanced Fargate Service is integrated with Amazon API Gateway HTTP API to expose the endpoint. This template uses a custom image without having to pre...",
      "contents": "This project contains a sample AWS Cloud Development Kit (AWS CDK) template for deploying an AWS Fargate service running on an Amazon Elastic Container Service (ECS) cluster with a private Application Load Balancer in-front. The Application Load Balanced Fargate Service is integrated with Amazon API Gateway HTTP API to expose the endpoint. This template uses a custom image without having to pre-push the image to Amazon Elastic Container Registry (ECR) or another container library. This makes use of the in-built `ecs.ContainerImage.fromAsset` method. The custom image has a base route `/` to output a message.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/apigw-fargate-cdk.\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\nWarning: As of this writing, there are known issues with the images built on Apple's M1 chip, which is based on the ARM architecture. You might encounter the following error log on ECS `standard_init_linux.go:228: exec user process caused: exec format error fargate`. More details can be found at [Stackoverflow 'exec user process caused: exec format error' in AWS Fargate Service](https://stackoverflow.com/questions/67361936/exec-user-process-caused-exec-format-error-in-aws-fargate-service)\n\n## Requirements\n\n- [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n- [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n- [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n- [AWS CDK](https://docs.aws.amazon.com/cdk/latest/guide/cli.html) installed and configured\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n   ```bash\n   git clone https://github.com/aws-samples/serverless-patterns\n   ```\n2. Change directory to the pattern directory:\n   ```bash\n   cd serverless-patterns/apigw-fargate-cdk/cdk\n   ```\n3. Install dependencies:\n   ```bash\n   npm install\n   ```\n4. From the command line, configure AWS CDK:\n   ```bash\n   cdk bootstrap ACCOUNT-NUMBER/REGION # e.g.\n   cdk bootstrap 1111111111/us-east-1\n   cdk bootstrap --profile test 1111111111/us-east-1\n   ```\n5. Ensure that the bucket name is unique in [cdk-stack.ts](./cdk/lib/cdk-stack.ts)\n6. From the command line, use AWS CDK to deploy the AWS resources for the pattern as specified in the `lib/cdk-stack.ts` file:\n   ```bash\n   cdk deploy\n   ```\n7. Note the outputs from the CDK deployment process. This contains the apigw endpoint that is used to make the GET request\n\n## How it works\n\n- The image is constructed directly from sources on disk when `cdk deploy` is executed\n- The image is automatically pushed to Amazon ECR\n- The VPC and subnets are created\n- The ECS cluster is created\n- The Task Definitions are created\n- The API Gateway Integration, Route, and VPC Link are created\n- The Fargate Service is created\n\n## Testing\n\nRetrieve the API Gateway URL from the `cdk deploy` output. Example of the output is:\n\n```\nCdkStack.APIGatewayUrl = https://abcd123efg.execute-api.ap-southeast-2.amazonaws.com/\n```\n\nFor reference:\n\n<img src=\"./docs/01-cdk-deploy-output.png\" alt=\"cdk-deploy-output\" width=\"90%\"/>\n\nThe API Gateway allows a GET request to `/`. To call it, run the following:\n\n```bash\ncurl --location --request GET '<REPLACE WITH API GATEWAY URL>'\n# Example\ncurl --location --request GET 'https://abcd123efg.execute-api.ap-southeast-2.amazonaws.com/'\n```\n\nRunning the request above should produce the following output:\n\n<img src=\"./docs/02-example-request.png\" alt=\"example-request\" width=\"90%\"/>\n\n## Cleanup\n\n1. Delete the stack\n   ```bash\n   cdk destroy\n   ```\n2. Navigate to ECR in the AWS console and delete the container images created\n\n## Documentation and useful references\n\n- [GitHub issue where one of the contributors provided an example with a pre-built image and any type of request](https://github.com/aws/aws-cdk/issues/8066)\n- [CDK documentation for ApplicationLoadBalancedFargateService](https://docs.aws.amazon.com/cdk/api/latest/docs/@aws-cdk_aws-ecs-patterns.ApplicationLoadBalancedFargateService.html)\n- [CDK documentation for APIGatewayv2 CfnIntegration](https://docs.aws.amazon.com/cdk/api/latest/docs/@aws-cdk_aws-apigatewayv2.CfnIntegration.html)\n- [CDK documentation for APIGatewayv2 CfnRoute](https://docs.aws.amazon.com/cdk/api/latest/docs/@aws-cdk_aws-apigatewayv2.CfnRoute.html)\n- [CDK documentation for APIGatewayv2 HttpApi](https://docs.aws.amazon.com/cdk/api/latest/docs/@aws-cdk_aws-apigatewayv2.HttpApi.html)\n- [CDK documentation for CDK Core CfnResource](https://docs.aws.amazon.com/cdk/api/latest/docs/@aws-cdk_core.CfnResource.html)\n\n---",
      "published_at": "2022-12-01T17:11:40.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-03T01:59:01.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 2,
      "points": 0,
      "views_count": 7,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/2980b9/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65748,
      "title": "Amazon API Gateway Custom Resource Policy",
      "slug": "obA46PE0LKv",
      "url": "https://viblo.asia/p/amazon-api-gateway-custom-resource-policy-obA46PE0LKv",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "amazon-api-gateway-custom-resource-policy",
      "contents_short": "This pattern creates an API Gateway REST endpoint with a custom resource policy. The resource policy limits access to the endpoint to within a certain date range.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/apigw-custom-resource-policy\n\nImportant: this application uses various AWS services and there are costs associated with these services aft...",
      "contents": "This pattern creates an API Gateway REST endpoint with a custom resource policy. The resource policy limits access to the endpoint to within a certain date range.\n\nLearn more about this pattern at Serverless Land Patterns: [https://serverlessland.com/patterns/apigw-custom-resource-policy](https://serverlessland.com/patterns/apigw-custom-resource-policy)\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n* [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n* [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n* [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n* [AWS Serverless Application Model](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html) (AWS SAM) installed\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n    ``` \n    git clone https://github.com/aws-samples/serverless-patterns\n    ```\n1. Change directory to the pattern directory:\n    ```\n    apigw-custom-resource-policy\n    ```\n1. From the command line, use AWS SAM to deploy the AWS resources for the pattern as specified in the template.yml file:\n    ```\n    sam deploy --guided\n    ```\n1. During the prompts:\n    * Enter a stack name\n    * Enter the desired AWS Region\n    * Allow SAM CLI to create IAM roles with the required permissions.\n\n    Once you have run `sam deploy --guided` mode once and saved arguments to a configuration file (samconfig.toml), you can use `sam deploy` in future to use these defaults.\n\n1. Note the outputs from the SAM deployment process. These contain the resource names and/or ARNs which are used for testing.\n\n## How it works\n\nThis endpoint will only accept requests between certain dates. The dates can be changed in the SAM template.\n\n## Testing\n\nIn the template.yaml file, set the desired start and end dates. Then hit the endpoint in the deployment outputs. If the date of the current request falls within the range, API Gateway will invoke the Lambda function and return the response. If it is outside the desired range, API Gateway will not invoke the Lambda function and immediately respond with an authorization error.\n\n## Cleanup\n \n1. Delete the stack\n    ```bash\n    sam delete --stack-name STACK_NAME\n    ```\n1. Confirm the stack has been deleted\n    ```bash\n    aws cloudformation list-stacks --query \"StackSummaries[?contains(StackName,'STACK_NAME')].StackStatus\"\n    ```\n----",
      "published_at": "2022-12-01T17:10:05.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-02T15:00:10.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 1,
      "points": 1,
      "views_count": 7,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/8e44ad/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65747,
      "title": "Amazon API Gateway REST API Regional Custom Domain Name",
      "slug": "5OXLAXmxJGr",
      "url": "https://viblo.asia/p/amazon-api-gateway-rest-api-regional-custom-domain-name-5OXLAXmxJGr",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "amazon-api-gateway-rest-api-regional-custom-domain-name",
      "contents_short": "The SAM template deploys an Amazon API Gateway Regional Custom Domain Name.\n\nThe Regional Custom Domain Name is mapped to a Stage in an existing API Gateway. Additionally, a Route53 A record is created to map the Regional Custom Domain Name (i.e. example.com) to the Target Domain Name created by API Gateway (i.e. d-abcde12345.execute-api.ap-southeast-2.amazonaws.com).\n\nAs prerequisites for this...",
      "contents": "The SAM template deploys an Amazon API Gateway Regional Custom Domain Name.\n\nThe Regional Custom Domain Name is mapped to a Stage in an existing API Gateway. Additionally, a Route53 A record is created to map the Regional Custom Domain Name (i.e. example.com) to the Target Domain Name created by API Gateway (i.e. d-abcde12345.execute-api.ap-southeast-2.amazonaws.com).\n\nAs prerequisites for this pattern, you must have:\n\n* A valid certificate in ACM (Amazon Certificate Manager) that covers the namespace of the domain you would like to use (i.e. *.mydomain.com).\n* A public Hosted Zone in Route 53 with the domain name you would like to use (i.e. mydomain.com).\n* An API Gateway API (REST, HTTP or Websockets) and a deployed Stage within this API.\n\nNote: when deploying this pattern, *CAPABILITY_IAM* is required.\n\nLearn more about this pattern at Serverless Land Patterns: [https://serverlessland.com/patterns/apigw-custom-domain-regional](https://serverlessland.com/patterns/apigw-custom-domain-regional)\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n* [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n* [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n* [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n* [AWS Serverless Application Model](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html) (AWS SAM) installed\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n    ``` \n    git clone https://github.com/aws-samples/serverless-patterns\n    ```\n2. Change directory to the pattern directory:\n    ```\n    cd apigw-custom-domain-regional\n    ```\n3. From the command line, use AWS SAM to deploy the AWS resources for the pattern as specified in the template.yml file:\n    ```\n    sam deploy -g\n    ```\n1. During the prompts:\n    * Enter a stack name\n    * Select the desired AWS Region\n    * Enter your Custom Domain Name (i.e. test.mydomain.com) for the DomainName parameter.\n    * You must have a ACM Certificate that covers your Custom Domain namespace (i.e. *.mydomain.com). Enter the ARN for this certificate.\n    * You must have a public Hosted Zone in Route 53 with your Domain Name (i.e. mydomain.com). Enter the Hosted Zone Id for this Hosted Zone.\n    * Enter the API Id in API Gateway that you would like to map to your Custom Domain Name.\n    * Enter the name of the stage within your API Gateway that you would like to map to your Custom Domain Name.\n    * Allow SAM to create roles with the required permissions if needed.\n\n    Once you have run guided mode once, you can use `sam deploy` in future to use these defaults.\n\n1. Note the outputs from the SAM deployment process. These contain the resource names and/or ARNs which are used for testing.\n\n## Testing\n\nThe stack will output the **Regional Custom Domain endpoint**. You can use *curl* to send a HTTP request to the Regional Custom Domain endpoint to test the correct mapping to your API.\n   \n```\ncurl https://{DomainName}\n```\n\n## Cleanup\n \n1. Delete the stack\n    ```bash\n    sam delete\n    ```\n1. Confirm the stack has been deleted\n    ```bash\n    aws cloudformation list-stacks --query \"StackSummaries[?contains(StackName,'STACK_NAME')].StackStatus\"\n    ```\n----",
      "published_at": "2022-12-01T17:09:01.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-03T00:33:01.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 2,
      "points": 1,
      "views_count": 11,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/27ae60/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65746,
      "title": "Amazon API Gateway REST API Edge Custom Domain Name",
      "slug": "MkNLrZW7LgA",
      "url": "https://viblo.asia/p/amazon-api-gateway-rest-api-edge-custom-domain-name-MkNLrZW7LgA",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "amazon-api-gateway-rest-api-edge-custom-domain-name",
      "contents_short": "The SAM template deploys an Amazon API Gateway Edge Custom Domain Name.\n\nThe Edge Custom Domain Name is mapped to a Stage in an existing API Gateway. Additionally, a Route53 A record is created to map the Edge Custom Domain Name (i.e. example.com) to the Target Domain Name created by API Gateway (i.e. d-abcde12345.execute-api.ap-southeast-2.amazonaws.com).\n\nAs prerequisites for this pattern, yo...",
      "contents": "The SAM template deploys an Amazon API Gateway Edge Custom Domain Name.\n\nThe Edge Custom Domain Name is mapped to a Stage in an existing API Gateway. Additionally, a Route53 A record is created to map the Edge Custom Domain Name (i.e. example.com) to the Target Domain Name created by API Gateway (i.e. d-abcde12345.execute-api.ap-southeast-2.amazonaws.com).\n\nAs prerequisites for this pattern, you must have:\n\n* A valid certificate in ACM (Amazon Certificate Manager) in the us-east-1 Region that covers the namespace of the domain you would like to use (i.e. *.mydomain.com).\n* A public Hosted Zone in Route 53 with the domain name you would like to use (i.e. mydomain.com).\n* An API Gateway API (REST, HTTP or Websockets) and a deployed Stage within this API.\n\nNote: when deploying this pattern, *CAPABILITY_IAM* is required.\n\nLearn more about this pattern at Serverless Land Patterns: [https://serverlessland.com/patterns/apigw-custom-domain-edge](https://serverlessland.com/patterns/apigw-custom-domain-edge)\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n* [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n* [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n* [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n* [AWS Serverless Application Model](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html) (AWS SAM) installed\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n    ``` \n    git clone https://github.com/aws-samples/serverless-patterns\n    ```\n2. Change directory to the pattern directory:\n    ```\n    cd apigw-custom-domain-edge\n    ```\n3. From the command line, use AWS SAM to deploy the AWS resources for the pattern as specified in the template.yml file:\n    ```\n    sam deploy -g\n    ```\n1. During the prompts:\n    * Enter a stack name\n    * Select the desired AWS Region\n    * Enter your Custom Domain Name (i.e. test.mydomain.com) for the DomainName parameter.\n    * You must have a ACM Certificate in the us-east-1 Region that covers your Custom Domain namespace (i.e. *.mydomain.com). Enter the ARN for this certificate.\n    * You must have a public Hosted Zone in Route 53 with your Domain Name (i.e. mydomain.com). Enter the Hosted Zone Id for this Hosted Zone.\n    * Enter the API Id in API Gateway that you would like to map to your Custom Domain Name.\n    * Enter the name of the stage within your API Gateway that you would like to map to your Custom Domain Name.\n    * Allow SAM to create roles with the required permissions if needed.\n\n    Once you have run guided mode once, you can use `sam deploy` in future to use these defaults.\n\n1. Note the outputs from the SAM deployment process. These contain the resource names and/or ARNs which are used for testing.\n\n## Testing\n\nThe stack will output the **Edge Custom Domain endpoint**. You can use *curl* to send a HTTP request to the Edge Custom Domain endpoint to test the correct mapping to your API.\n   \n```\ncurl https://{DomainName}\n```\n\n## Cleanup\n \n1. Delete the stack\n    ```bash\n    sam delete\n    ```\n1. Confirm the stack has been deleted\n    ```bash\n    aws cloudformation list-stacks --query \"StackSummaries[?contains(StackName,'STACK_NAME')].StackStatus\"\n    ```\n----",
      "published_at": "2022-12-01T17:08:00.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-02T08:20:23.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 2,
      "points": 0,
      "views_count": 5,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/f39c12/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65745,
      "title": "Amazon API Gateway to Amazon CloudWatch",
      "slug": "5pPLkGm6LRZ",
      "url": "https://viblo.asia/p/amazon-api-gateway-to-amazon-cloudwatch-5pPLkGm6LRZ",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "amazon-api-gateway-to-amazon-cloudwatch",
      "contents_short": "This pattern creates an Amazon API Gateway with access logging to Amazon CloudWatch configured.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/apigw-cloudwatch\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the AWS Pricing page for details. You are r...",
      "contents": "This pattern creates an Amazon API Gateway with access logging to Amazon CloudWatch configured. \n\nLearn more about this pattern at Serverless Land Patterns: [https://serverlessland.com/patterns/apigw-cloudwatch](https://serverlessland.com/patterns/apigw-cloudwatch)\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n* [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n* [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n* [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n* [AWS Serverless Application Model](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html) (AWS SAM) installed\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n    ``` \n    git clone https://github.com/aws-samples/serverless-patterns\n    ```\n1. Change directory to the pattern directory:\n    ```\n    cd apigw-cloudwatch\n    ```\n1. From the command line, use AWS SAM to deploy the AWS resources for the pattern as specified in the template.yml file:\n    ```\n    sam deploy --guided\n    ```\n1. During the prompts:\n    * Enter a stack name\n    * Enter the desired AWS Region\n    * Allow SAM CLI to create IAM roles with the required permissions.\n\n    Once you have run `sam deploy --guided` mode once and saved arguments to a configuration file (samconfig.toml), you can use `sam deploy` in future to use these defaults.\n\n1. Note the outputs from the SAM deployment process. These contain the resource names and/or ARNs which are used for testing.\n\n## How it works\n\nThe application will only accept requests from countries that are in the country code array for the WAF rule.\n\n## Testing\n\nDeploy the application and then go to the oputput URL. Refresh the screen multiple times. Then go to Amazon CloudWatch and check the log group that is created. The name will be in the outputs. You will see something like:\n\n```\n{\n    \"requestId\": \"d14676c9-a4a3-46e0-9168-87ed1a429eb3\",\n    \"waf-error\": \"-\",\n    \"waf-status\": \"-\",\n    \"waf-latency\": \"-\",\n    \"waf-response\": \"-\",\n    \"authenticate-error\": \"-\",\n    \"authenticate-status\": \"-\",\n    \"authenticate-latency\": \"-\",\n    \"authorize-error\": \"-\",\n    \"authorize-status\": \"-\",\n    \"authorize-latency\": \"-\",\n    \"integration-error\": \"-\",\n    \"integration-status\": \"200\",\n    \"integration-latency\": \"15\",\n    \"integration-requestId\": \"55c51049-49c2-42f6-bb23-48e9595094da\",\n    \"integration-integrationStatus\": \"200\",\n    \"response-latency\": \"17\",\n    \"status\": \"200\"\n}\n```\nYou can add authorization and a WAF to see the other data filled in.\n## Cleanup\n \n1. Delete the stack\n    ```bash\n    sam delete --stack-name STACK_NAME\n    ```\n1. Confirm the stack has been deleted\n    ```bash\n    aws cloudformation list-stacks --query \"StackSummaries[?contains(StackName,'STACK_NAME')].StackStatus\"\n    ```\n----",
      "published_at": "2022-12-01T17:06:42.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-02T09:25:22.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 1,
      "points": 0,
      "views_count": 5,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": []
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65744,
      "title": "Amazon API Gateway REST API with a Client Certificate",
      "slug": "aNj4vXkoL6r",
      "url": "https://viblo.asia/p/amazon-api-gateway-rest-api-with-a-client-certificate-aNj4vXkoL6r",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "amazon-api-gateway-rest-api-with-a-client-certificate",
      "contents_short": "The SAM template deploys an Amazon API Gateway REST API endpoint that uses a Client Certificate that will be used to call your integration endpoints in the 'Prod' Stage.\n\nNote: when deploying this pattern, CAPABILITY_IAM is required.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/apigw-client-certificate\n\nImportant: this application uses various ...",
      "contents": "The SAM template deploys an Amazon API Gateway REST API endpoint that uses a Client Certificate that will be used to call your integration endpoints in the 'Prod' Stage.\n\nNote: when deploying this pattern, *CAPABILITY_IAM* is required.\n\nLearn more about this pattern at Serverless Land Patterns: [https://serverlessland.com/patterns/apigw-client-certificate](https://serverlessland.com/patterns/apigw-client-certificate)\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n* [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n* [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n* [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n* [AWS Serverless Application Model](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html) (AWS SAM) installed\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n    ``` \n    git clone https://github.com/aws-samples/serverless-patterns\n    ```\n2. Change directory to the pattern directory:\n    ```\n    cd apigw-client-certificate\n    ```\n3. From the command line, use AWS SAM to deploy the AWS resources for the pattern as specified in the template.yml file:\n    ```\n    sam deploy -g\n    ```\n1. During the prompts:\n    * Enter a stack name\n    * Select the desired AWS Region\n    * Allow SAM to create roles with the required permissions if needed.\n\n    Once you have run guided mode once, you can use `sam deploy` in future to use these defaults.\n\n1. Note the outputs from the SAM deployment process. These contain the resource names and/or ARNs which are used for testing.\n\n## Testing\n\nThe stack will output the **api endpoint**. Please check the instructions at https://docs.aws.amazon.com/apigateway/latest/developerguide/getting-started-client-side-ssl-authentication.html#certificate-validation to configure a backend HTTPS server to verify the client certificate.\n   \n\n## Cleanup\n \n1. Delete the stack\n    ```bash\n    sam delete\n    ```\n1. Confirm the stack has been deleted\n    ```bash\n    aws cloudformation list-stacks --query \"StackSummaries[?contains(StackName,'STACK_NAME')].StackStatus\"\n    ```\n----",
      "published_at": "2022-12-01T17:05:38.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-02T10:39:02.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 1,
      "points": 0,
      "views_count": 8,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/8e44ad/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65743,
      "title": "Amazon API Gateway Canary Deployment",
      "slug": "7ymJXK2R4kq",
      "url": "https://viblo.asia/p/amazon-api-gateway-canary-deployment-7ymJXK2R4kq",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "amazon-api-gateway-canary-deployment",
      "contents_short": "This pattern creates an Amazon API Gateway RESTful API, an AWS Lambda function, and then creates an APIGW Canary Deployment using the AWS Cloud Development Kit (AWS CDK) in Python.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/apigw-canary-deployment-cdk.\n\nImportant: this application uses various AWS services and there are costs associated with ...",
      "contents": "This pattern creates an Amazon [API Gateway RESTful API](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-rest-api.html), an AWS [Lambda function](https://docs.aws.amazon.com/lambda/latest/dg/welcome.html), and then creates an [APIGW Canary Deployment](https://docs.aws.amazon.com/apigateway/latest/developerguide/canary-release.html) using the AWS Cloud Development Kit (AWS CDK) in Python.\n\nLearn more about this pattern at Serverless Land Patterns: [https://serverlessland.com/patterns/apigw-canary-deployment-cdk](https://serverlessland.com/patterns/apigw-canary-deployment-cdk).\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n* [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n* [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n* [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n* [AWS CDK Toolkit](https://docs.aws.amazon.com/cdk/latest/guide/cli.html) installed and configured\n* [Python 3.9+](https://www.python.org/downloads/) installed\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n    ```\n    git clone https://github.com/aws-samples/serverless-patterns\n    ```\n2. Change directory to the pattern directory:\n    ```\n    cd serverless-patterns/apigw-canary-deployment-cdk\n    ```\n3. Create a virtual environment for Python\n    ```\n    python3 -m venv .venv\n    ```\n4. Activate the virtual environment\n    ```\n    source .venv/bin/activate\n    ```\n    For a Windows platform, activate the virtualenv like this:\n    ```\n    .venv\\Scripts\\activate.bat\n    ```\n5. Install the Python required dependencies:\n    ```\n    pip install -r requirements.txt\n    ```\n6. From the command line, use AWS CDK to deploy the AWS resources for the serverless application as specified in the app.py file:\n    ```\n    cdk deploy MyServerlessApplicationStack\n    ```\n7. Note the outputs from the CDK deployment process. These contain the API Gateway ID which is used for testing.\n8. Once the serverless application stack is successfully deployed, you will need to [deploy new Lambda code](https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-package.html). This can be accomplished by performing the following on the Lambda page in the AWS console:\n\n    1. On the left panel, click functions.\n    2. Click on the ```MyServerlessApplicationStac-MyFunction*``` function.\n    3. Under the code tab, edit the Hello World code under the EDIT ME comment.\n    4. Under the file menu in the code editor, click save.\n    5. In the code editor, click the deploy button. This deploys the code to the [$LATEST version](https://docs.aws.amazon.com/lambda/latest/dg/configuration-versions.html).\n\n9. From the command line, use AWS CDK to deploy the AWS resources for the canary deployment as specified in the app.py file:\n    ```\n    cdk deploy CanaryDeploymentStack\n    ```\n\n## How it works\n\nThe API Gateway Canary Deployment will route 50% of the traffic to the new function version created using the updated code.\n\n## Testing\n\nFrom the command line, run the following command to send an HTTP `GET` request to APIs endpoint. Note that you must edit the {MyServerlessApplicationStack.ApigwId} and {Region} placeholder with the ID of the deployed API and Region that it is deployed in. This is provided in the MyServerlessApplicationStack deployment outputs.\n\n```\ncurl -H \"Origin: https://www.example.com\" \"https://{MyServerlessApplicationStack.ApigwId}.execute-api.{Region}.amazonaws.com/prod\"\n```\n\nSince the canary deployment is set at 50% traffic, when you run the above command more than once you should see the old version's and new version's output at a rate of about 50/50.\n\nThe `-H \"Origin: https://www.example.com\"` is the third party domain making the request, which you can substitute for other domains.\n\n## Cleanup\n\n1. Delete the Canary Deployment stack\n    ```\n    cdk destroy CanaryDeploymentStack\n    ```\n2. Delete the Serverless application stack\n   ```\n   cdk destroy MyServerlessApplicationStack\n   ```\n----",
      "published_at": "2022-12-01T17:04:32.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-02T03:00:27.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 2,
      "points": 0,
      "views_count": 8,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/8e44ad/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65742,
      "title": "Amazon API Gateway integration with WAF",
      "slug": "n1j4l3aDVwl",
      "url": "https://viblo.asia/p/amazon-api-gateway-integration-with-waf-n1j4l3aDVwl",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "amazon-api-gateway-integration-with-waf",
      "contents_short": "This pattern in CDK offers a example to generate an Amazon API Gateway with a greedy proxy (\"{proxy+}\") and \"ANY\" method from the specified path, meaning it will accept by default any method and any path. The VPC Lambda function provided in JavaScript only returns the path.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/apigw-waf-cdk\n\nImportant: ...",
      "contents": "This pattern in CDK offers a example to generate an Amazon API Gateway with a greedy proxy (\"{proxy+}\") and \"ANY\" method from the specified path, meaning it will accept by default any method and any path. The VPC Lambda function provided in JavaScript only returns the path.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/apigw-waf-cdk\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n* [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n* [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n* [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n* [Node and NPM](https://nodejs.org/en/download/) installed\n* [AWS Cloud Development Kit](https://docs.aws.amazon.com/cdk/latest/guide/cli.html) (AWS CDK) installed\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n    ```bash\n    git clone https://github.com/aws-samples/serverless-patterns\n    ```\n2. Change directory to the pattern directory its source code folder:\n    ```bash\n      cd apig-waf/src\n    ```\n3. From the command line, use npm to install the development dependencies:\n    ```bash\n      npm install\n    ```\n4. To deploy from the command line use the following:\n    ```bash\n      npx cdk bootstrap aws://accountnumber/region\n      npx cdk deploy --app 'ts-node .' --all\n    ```\n\n## Testing\n\n\n  *  Locate WAFAPIGatewayApi.ApiUrl from output printed by cdk, this is the api endpoint to be invoked\n    In a browser\n\n    ```https://<api_id>.execute-api.<region>.amazonaws.com/prod```\n\n    You should see: ```Success path: \"/\"```\n\n\n\n## Cleanup\n \n1. From the command line, use the following in the source folder\n    ```bash\n    npx cdk destroy --app 'ts-node .' --all\n    ```\n2. Confirm the removal and wait for the resource deletion to complete.",
      "published_at": "2022-12-01T17:03:23.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-02T07:59:03.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 1,
      "points": 0,
      "views_count": 7,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/d35400/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65741,
      "title": "Integration of Amplify Frontend, Cognito, API Gateway, Lambda",
      "slug": "GAWVpoqYL05",
      "url": "https://viblo.asia/p/integration-of-amplify-frontend-cognito-api-gateway-lambda-GAWVpoqYL05",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "integration-of-amplify-frontend-cognito-api-gateway-lambda",
      "contents_short": "This pattern explains how to deploy a SAM application that includes an AWS Amplify Frontend, Cognito, API Gateway and Lambda Function and set environmental variables to be used by Amplify and the Lambda function.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/amplify-apigw-lambda.\n\nImportant: this application uses various AWS services and there a...",
      "contents": "This pattern explains how to deploy a SAM application that includes an AWS Amplify Frontend, Cognito, API Gateway and Lambda Function and set environmental variables to be used by Amplify and the Lambda function.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/amplify-apigw-lambda.\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n* [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n* [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n* [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n* [AWS Serverless Application Model](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html) (AWS SAM) installed\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n    ``` \n    git clone https://github.com/aws-samples/serverless-patterns\n    ```\n1. Change directory to the pattern directory:\n    ```\n    cd _patterns-model\n    ```\n1. From the command line, use AWS SAM to deploy the AWS resources for the pattern as specified in the template.yml file:\n    ```\n    sam deploy --guided\n    ```\n1. During the prompts:\n    * Enter a stack name\n    * Enter the desired AWS Region\n    * Enter the Frontend Repository URL that will be hosted by AWS Amplify Frontend\n    * Enter the OauthToken for you git provider\n    * Allow SAM CLI to create IAM roles with the required permissions.\n\n    Once you have run `sam deploy --guided` mode once and saved arguments to a configuration file (samconfig.toml), you can use `sam deploy` in future to use these defaults.\n\n1. Note the outputs from the SAM deployment process. These contain the resource names and/or ARNs which are used for testing.\n\n## How it works\n\nThis template deploys a full-stack application where Amplify frontend application and Lambda Function will have as environmental variables Cognito Region, Cognito User Pool ID and Cognito User Pool Client ID allowing developer to quickly develop an application with Authentication on front and backend. Template set cognito as authorizer for API Gateway, requiring the frontend app to pass json web token (JWT) to call API\n\n## Testing\n\nOn AWS amplify Service, click on the app name (same of SAM stack name), click environment varaibles. You should be able to see 4 environmental variables created by the template.\n\nOn AWS Lambda Service, click Applications, click the application name (same of SAM stack name), click on Resource called myFunction, click configuration, click Environment variables. You should be able to see 4 environmental variables created by the template.\nExecute the lambda function and check the logs. You will see a result like:\nCognito Region:  us-east-1\nCognito User Pool Id:  us-east-1_aYtONfZZZ\nCognito User Pool Client ID:  1h2rrpldfqg8lhbgej2o5s2ZZZ\n\n## Cleanup\n \n1. Delete the stack\n    ```bash\n    aws cloudformation delete-stack --stack-name STACK_NAME\n    ```\n1. Confirm the stack has been deleted\n    ```bash\n    aws cloudformation list-stacks --query \"StackSummaries[?contains(StackName,'STACK_NAME')].StackStatus\"\n    ```\n----",
      "published_at": "2022-12-01T17:02:22.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-02T15:00:10.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 2,
      "points": 1,
      "views_count": 6,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/27ae60/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65740,
      "title": "Application Load balancer with AWS Lambda as target with CDK",
      "slug": "r1QLxPApLAw",
      "url": "https://viblo.asia/p/application-load-balancer-with-aws-lambda-as-target-with-cdk-r1QLxPApLAw",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "application-load-balancer-with-aws-lambda-as-target-with-cdk",
      "contents_short": "This pattern demonstrates how to create an Application Load Balancer with AWS Lambda as target. Implemented in CDK.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/alb-lambda-cdk\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the AWS Pricing page for ...",
      "contents": "This pattern demonstrates how to create an Application Load Balancer with AWS Lambda as target. Implemented in CDK.\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/alb-lambda-cdk\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n* [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n* [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n* [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n* [Node and NPM](https://nodejs.org/en/download/) installed\n* [AWS Cloud Development Kit](https://docs.aws.amazon.com/cdk/latest/guide/cli.html) (AWS CDK) installed\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n    ``` \n    git clone https://github.com/aws-samples/serverless-patterns\n    ```\n1. Change directory to the pattern directory:\n    ```\n    cd alb-lambda-cdk\n    ```\n2. Run below command to install required dependancies:\n    ```\n    npm install\n    ```\n4. From the command line, run:\n    ```\n    cdk deploy --all\n    ```\n\n## Testing\n\n1. In the stack output, you can see `ALBUrl` and when access the url, you can get the response from Lambda.\n\n** Please note: Application Load Balancer's default settings for health check are 5 consecutive health check successes with 35 seconds interval. So, it will take couple of minutes for the target to be healthy.\n\n## Cleanup\n \n1. To delete the stack, run:\n    ```bash\n    cdk destroy --all\n    ```",
      "published_at": "2022-12-01T17:00:50.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-03T01:54:02.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 1,
      "points": 1,
      "views_count": 6,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/8e44ad/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    },
    {
      "id": 65739,
      "title": "Amazon API Gateway HTTP API to Amazon EventBridge",
      "slug": "bXP4WPyoJ7G",
      "url": "https://viblo.asia/p/amazon-api-gateway-http-api-to-amazon-eventbridge-bXP4WPyoJ7G",
      "user_id": 51762,
      "moderation": null,
      "transliterated": "amazon-api-gateway-http-api-to-amazon-eventbridge",
      "contents_short": "This pattern creates an HTTP API endpoint that directly integrates with Amazon EventBridge\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/apigw-http-api-eventbridge-python\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the AWS Pricing page for detail...",
      "contents": "This pattern creates an HTTP API endpoint that directly integrates with Amazon EventBridge\n\nLearn more about this pattern at Serverless Land Patterns: https://serverlessland.com/patterns/apigw-http-api-eventbridge-python\n\nImportant: this application uses various AWS services and there are costs associated with these services after the Free Tier usage - please see the [AWS Pricing page](https://aws.amazon.com/pricing/) for details. You are responsible for any AWS costs incurred. No warranty is implied in this example.\n\n## Requirements\n\n- [Create an AWS account](https://portal.aws.amazon.com/gp/aws/developer/registration/index.html) if you do not already have one and log in. The IAM user that you use must have sufficient permissions to make necessary AWS service calls and manage AWS resources.\n- [AWS CLI](https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html) installed and configured\n- [Git Installed](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)\n- [AWS Serverless Application Model](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html) (AWS SAM) installed\n\n## Deployment Instructions\n\n1. Create a new directory, navigate to that directory in a terminal and clone the GitHub repository:\n   ```\n   git clone https://github.com/aws-samples/serverless-patterns\n   ```\n2. Change directory to the pattern directory:\n   ```\n   cd serverless-patterns/apigw-http-api-eventbridge-python\n   ```\n3. Create a virtual environment for Python:\n   ```\n   python3 -m venv .venv\n   ```\n4. Activate the virtual environment\n   ```\n   source .venv/bin/activate\n   ```\n   For a Windows platform, activate the virtualenv like this:\n   ```\n   .venv\\Scripts\\activate.bat\n   ```\n5. Install the Python required dependencies:\n   ```\n   pip install -r requirements.txt\n   ```\n6. Review the CloudFormation template the cdk generates for you stack using the following AWS CDK CLI command:\n   ```\n   cdk synth\n   ```\n7. From the command line, use AWS CDK to deploy the AWS resources for the serverless application as specified in the app.py file:\n   ```\n   cdk deploy\n   ```\n8. Note the outputs from the CDK deployment process. These contain the API Gateway ID which is used for testing.\n\n## How it works\n\nThis pattern creates an Amazon API gateway HTTP API endpoint. The endpoint uses service integrations to directly connect to Amazon EventBridge.\n\n## Testing\n\nTo test the endpoint first send data using the following command. Be sure to update the endpoint with endpoint of your stack.\n\n```\n   curl --location --request POST '<your api endpoint>' --header 'Content-Type: application/json' \\\n--data-raw '{\n    \"Detail\":{\n        \"message\": \"This is my test\"\n    }\n}'\n```\n\nIf everything works as expected EventBridge will return the result of sending the message operation and APIGateway will proxy the payload to the client application. The payload should looks like something like the following payload:\n\n```\n{\n    \"Entries\": [\n        {\n            \"EventId\": \"{UNIQUE_UUID}\"\n        }\n    ],\n    \"FailedEntryCount\": 0 // <- This indicates that the message was successfully sent\n}\n```\n\n## Cleanup\n\nRun the given command to delete the resources that were created. It might take some time for the CloudFormation stack to get deleted.\n\n```\ncdk destroy\n```",
      "published_at": "2022-12-01T16:59:30.000000Z",
      "is_published": true,
      "is_shared": false,
      "updated_at": "2022-12-02T19:00:05.000000Z",
      "translation_source": null,
      "trend_at": null,
      "promoted_at": null,
      "reading_time": 1,
      "points": 1,
      "views_count": 14,
      "clips_count": 0,
      "comments_count": 0,
      "rated_value": null,
      "promoted": false,
      "trending": false,
      "is_draft": false,
      "is_public": true,
      "locale_code": "en",
      "is_video": false,
      "thumbnail_url": null,
      "user": {
        "data": {
          "id": 51762,
          "url": "https://viblo.asia/u/Dragon2k",
          "avatar": "6f641ead-e915-4f19-b199-e799ca7bf22b.png",
          "name": "AWS Community Builder",
          "username": "Dragon2k",
          "followers_count": 4,
          "reputation": 150,
          "posts_count": 32,
          "banned_at": null,
          "level_partner": null,
          "following": false
        }
      },
      "tags": {
        "data": [
          {
            "slug": "amazon-web-services-aws",
            "name": "Amazon Web Services (AWS)",
            "primary": false,
            "image": "https://placehold.jp/16/2980b9/ffffff/80x80.jpg?text=Amazon+Web+Services+AWS&css=%7B%22padding%22%3A%223px%22%7D"
          }
        ]
      },
      "commentators": {
        "data": []
      }
    }
  ],
  "meta": {
    "pagination": {
      "total": 34557,
      "count": 20,
      "per_page": 20,
      "current_page": 1,
      "total_pages": 1728,
      "links": {
        "next": "http://viblo.asia/posts/newest?page=2"
      }
    }
  }
}
